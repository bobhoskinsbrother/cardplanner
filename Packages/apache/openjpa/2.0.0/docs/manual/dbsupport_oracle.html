<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>19.&nbsp; Oracle</title><link rel="stylesheet" href="css/docbook.css" type="text/css"><base href="display"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="manual.html" title="Apache OpenJPA 2.0 User's Guide"><link rel="up" href="supported_databases.html" title="Appendix&nbsp;2.&nbsp; Supported Databases"><link rel="prev" href="dbsupport_mysql.html" title="18.&nbsp; MySQL"><link rel="next" href="dbsupport_pointbase.html" title="20.&nbsp; Pointbase"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">19.&nbsp;
            Oracle
        </th></tr><tr><td width="20%" align="left"><a accesskey="p" href="dbsupport_mysql.html">Prev</a>&nbsp;</td><th width="60%" align="center">Appendix&nbsp;2.&nbsp;
        Supported Databases
    </th><td width="20%" align="right">&nbsp;<a accesskey="n" href="dbsupport_pointbase.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dbsupport_oracle"></a>19.&nbsp;
            Oracle
        </h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="dbsupport_oracle.html#dbsupport_oracle_query_hints">19.1. 
                Using Query Hints with Oracle
            </a></span></dt><dt><span class="section"><a href="dbsupport_oracle.html#dbsupport_oracle_issues">19.2. 
                Known issues with Oracle
            </a></span></dt></dl></div><div class="example"><a name="example_props_oracle"></a><p class="title"><b>Example&nbsp;2.17.&nbsp;
                Example properties for Oracle
            </b></p><div class="example-contents"><pre class="programlisting">
openjpa.ConnectionDriverName: oracle.jdbc.driver.OracleDriver
openjpa.ConnectionURL: jdbc:oracle:thin:@SERVER_NAME:1521:DB_NAME
</pre></div></div><br class="example-break"><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dbsupport_oracle_query_hints"></a>19.1.&nbsp;
                Using Query Hints with Oracle
            </h3></div></div></div><p>
Oracle has support for "query hints", which are formatted comments embedded in
SQL that provide some hint for how the query should be executed. These hints are
usually designed to provide suggestions to the Oracle query optimizer for how to
efficiently perform a certain query, and aren't typically needed for any but
the most intensive queries.
            </p><div class="example"><a name="dbsupport_oracle_query_hints_ex"></a><p class="title"><b>Example&nbsp;2.18.&nbsp;
                    Using Oracle Hints
                </b></p><div class="example-contents"><pre class="programlisting">
Query query = em.createQuery(...);
query.setHint("openjpa.hint.OracleSelectHint", "/*+ first_rows(100) */");
List results = query.getResultList();
</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="dbsupport_oracle_issues"></a>19.2.&nbsp;
                Known issues with Oracle
            </h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p> 
The Oracle JDBC driver has significant differences between different versions. 
It is important to use the officially supported version of the driver 
(10.2.0.1.0), which is backward compatible with previous versions of the Oracle
server. It can be downloaded from 
<a xmlns:xlink="http://www.w3.org/1999/xlink" href="http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/htdocs/jdbc101040.html" target="_top">
http://www.oracle.com/technology/software/tech/java/sqlj_jdbc/htdocs/jdbc101040.html</a>.
                    </p></li><li><p>
Empty string/char values are stored as NULL.
                    </p></li><li><p>
Oracle corp's JDBC driver for Oracle has only limited support for batch updates.
The result for OpenJPA is that batching of some statements may fail and in some cases, 
the exact object that failed an optimistic lock check cannot be determined. OpenJPA will
throw an <code class="classname">OptimisticException</code> with more failed objects than actually
failed.  This situation may be resolved by disabling statement batching by setting the
batchLimit value to zero or by using a more recent Oracle JDBC Driver (11.2.0.1) with 
batch support improvements.  Attempting to resolve the issue with a more current driver
is recommended since disabling statement batching can result in a decrease in performance.
            </p><div class="example"><a name="dbsupport_oracle_disable_batch_updates"></a><p class="title"><b>Example&nbsp;2.19.&nbsp;
                    Property to disable statement batching for Oracle
                </b></p><div class="example-contents"><pre class="programlisting">
openjpa.jdbc.DBDictionary: oracle(batchLimit=0)
</pre></div></div><p><br class="example-break">
                    </p></li><li><p>
Oracle cannot store numbers with more than 38 digits in numeric columns.
                    </p></li><li><p>
Floats and doubles may lose precision when stored.
                    </p></li><li><p>
CLOB columns cannot be used in queries.
                    </p></li><li><p>
The use of LOBs with persistent attributes of a streaming data type (ex. 
<code class="literal">java.io.InputStream</code> or <code class="literal">java.io.Reader</code>) may 
require the same connection to be used over the life of the transaction or 
entity manager.  If the same connection is not used for persistent operations
a <code class="literal">java.io.IOException</code> with message <code class="literal">Closed Connection
</code> may result.  The OpenJPA property <code class="literal">openjpa.ConnectionRetainMode</code>
can be used to control how OpenJPA uses datastore connections.  See 
<a href="ref_guide_dbsetup_retain.html" title="8.&nbsp; Configuring the Use of JDBC Connections">Section&nbsp;8, &#8220;
            Configuring the Use of JDBC Connections
        &#8221;</a> for details.
            </p><div class="example"><a name="dbsupport_oracle_retain_connection"></a><p class="title"><b>Example&nbsp;2.20.&nbsp;
                    Property to retain connection over the lifetime of the entity manager
                </b></p><div class="example-contents"><pre class="programlisting">
openjpa.ConnectionRetainMode: always
</pre></div></div><p><br class="example-break">
                    </p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="dbsupport_mysql.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="supported_databases.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="dbsupport_pointbase.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">18.&nbsp;
            MySQL
        &nbsp;</td><td width="20%" align="center"><a accesskey="h" href="manual.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;20.&nbsp;
            Pointbase
        </td></tr></table></div></body></html>