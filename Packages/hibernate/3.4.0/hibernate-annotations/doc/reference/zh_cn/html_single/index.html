<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Hibernate Annotations</title><link rel="stylesheet" href="../shared/css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="zh_cn"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>Hibernate Annotations</h1></div><div><h2 class="subtitle">&#21442;&#32771;&#25991;&#26723;</h2></div><div><p class="releaseinfo">3.2.0 CR1</p></div></div><div></div><hr></div><div class="toc"><p><b>&#30446;&#24405;</b></p><dl><dt><span class="preface"><a href="#preface">&#21069;&#35328;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#preface-translate-comments-zh-cn">1. &#32763;&#35793;&#35828;&#26126;</a></span></dt><dt><span class="sect1"><a href="#preface-translate-licence-zh-cn">2. &#29256;&#26435;&#22768;&#26126;</a></span></dt></dl></dd><dt><span class="preface"><a href="#d0e199">&#21069;&#35328;</a></span></dt><dt><span class="chapter"><a href="#d0e224">1. &#21019;&#24314;&#19968;&#20010;&#27880;&#35299;&#39033;&#30446;</a></span></dt><dd><dl><dt><span class="section"><a href="#setup-requirements">1.1. &#31995;&#32479;&#38656;&#27714;</a></span></dt><dt><span class="section"><a href="#setup-configuration">1.2. &#31995;&#32479;&#37197;&#32622;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#entity">2. &#23454;&#20307;Bean</a></span></dt><dd><dl><dt><span class="sect1"><a href="#entity-overview">2.1. &#31616;&#20171;</a></span></dt><dt><span class="sect1"><a href="#mapping">2.2. &#29992;EJB3&#27880;&#35299;&#36827;&#34892;&#26144;&#23556;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e346">2.2.1. &#22768;&#26126;&#23454;&#20307;bean</a></span></dt><dd><dl><dt><span class="sect3"><a href="#d0e384">2.2.1.1. &#23450;&#20041;&#34920;(Table)</a></span></dt><dt><span class="sect3"><a href="#d0e427">2.2.1.2. &#20048;&#35266;&#38145;&#23450;&#29256;&#26412;&#25511;&#21046;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#d0e447">2.2.2. &#26144;&#23556;&#31616;&#21333;&#23646;&#24615;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#d0e450">2.2.2.1. &#22768;&#26126;&#22522;&#26412;&#30340;&#23646;&#24615;&#26144;&#23556;</a></span></dt><dt><span class="sect3"><a href="#d0e559">2.2.2.2. &#22768;&#26126;&#21015;&#23646;&#24615;</a></span></dt><dt><span class="sect3"><a href="#d0e687">2.2.2.3. &#23884;&#20837;&#24335;&#23545;&#35937;(&#21448;&#21517;&#32452;&#20214;)</a></span></dt><dt><span class="sect3"><a href="#d0e784">2.2.2.4. &#26080;&#27880;&#35299;&#20043;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#mapping-identifier">2.2.. &#26144;&#23556;&#20027;&#38190;&#23646;&#24615;</a></span></dt><dt><span class="sect2"><a href="#d0e936">2.2.4. &#26144;&#23556;&#32487;&#25215;&#20851;&#31995;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#d0e956">2.2.4.1. &#27599;&#20010;&#31867;&#19968;&#24352;&#34920;</a></span></dt><dt><span class="sect3"><a href="#d0e977">2.2.4.2. &#27599;&#20010;&#31867;&#23618;&#27425;&#32467;&#26500;&#19968;&#24352;&#34920;</a></span></dt><dt><span class="sect3"><a href="#d0e1014">2.2.4.3. &#36830;&#25509;&#30340;&#23376;&#31867;</a></span></dt><dt><span class="sect3"><a href="#d0e1047">2.2.4.4. &#20174;&#29238;&#31867;&#32487;&#25215;&#30340;&#23646;&#24615;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#entity-mapping-association">2.2.5. &#26144;&#23556;&#23454;&#20307;Bean&#30340;&#20851;&#32852;&#20851;&#31995;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#d0e1148">2.2.5.1. &#19968;&#23545;&#19968;(One-to-one)</a></span></dt><dt><span class="sect3"><a href="#d0e1291">2.2.5.2. &#22810;&#23545;&#19968;(Many-to-one)</a></span></dt><dt><span class="sect3"><a href="#entity-mapping-association-collections">2.2.5.3. &#38598;&#21512;&#31867;&#22411;</a></span></dt><dt><span class="sect3"><a href="#d0e1715">2.2.5.4. &#29992;cascading&#23454;&#29616;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(Transitive persistence)</a></span></dt><dt><span class="sect3"><a href="#d0e1739">2.2.5.5. &#20851;&#32852;&#20851;&#31995;&#33719;&#21462;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#d0e1765">2.2.6. &#26144;&#23556;&#22797;&#21512;&#20027;&#38190;&#19982;&#22806;&#38190;</a></span></dt><dt><span class="sect2"><a href="#d0e1823">2.2.7. &#26144;&#23556;&#20108;&#32423;&#34920;(secondary tables)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#entity-mapping-query">2.3. &#26144;&#23556;&#26597;&#35810;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e1906">2.3.1. &#26144;&#23556;EJBQL/HQL&#26597;&#35810;</a></span></dt><dt><span class="sect2"><a href="#entity-mapping-query-native">2.3.2. &#26144;&#23556;&#26412;&#22320;&#21270;&#26597;&#35810;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#entity-hibspec">2.4. Hibernate&#29420;&#26377;&#30340;&#27880;&#35299;&#25193;&#23637;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#entity-hibspec-entity">2.4.1. &#23454;&#20307;</a></span></dt><dt><span class="sect2"><a href="#d0e2195">2.4.2. &#26631;&#35782;&#31526;</a></span></dt><dt><span class="sect2"><a href="#entity-hibspec-property">2.4.3. &#23646;&#24615;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#d0e2219">2.4.3.1. &#35775;&#38382;&#31867;&#22411;</a></span></dt><dt><span class="sect3"><a href="#d0e2267">2.4.3.2. &#20844;&#24335;</a></span></dt><dt><span class="sect3"><a href="#d0e2276">2.4.3.3. &#31867;&#22411;</a></span></dt><dt><span class="sect3"><a href="#d0e2299">2.4.3.4. &#32034;&#24341;</a></span></dt><dt><span class="sect3"><a href="#d0e2309">2.4.3.5. @Parent</a></span></dt><dt><span class="sect3"><a href="#d0e2316">2.4.3.6. &#29983;&#25104;&#30340;&#23646;&#24615;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#d0e2341">2.4.4. &#32487;&#25215;</a></span></dt><dt><span class="sect2"><a href="#d0e2354">2.4.5. &#20851;&#20110;&#21333;&#20010;&#20851;&#32852;&#20851;&#31995;&#30340;&#27880;&#35299;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#d0e2382">2.4.5.1. &#24310;&#36831;&#36873;&#39033;&#21644;&#33719;&#21462;&#27169;&#24335;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#entity-hibspec-collection">2.4.6. &#20851;&#20110;&#38598;&#21512;&#31867;&#22411;&#30340;&#27880;&#35299;</a></span></dt><dd><dl><dt><span class="sect3"><a href="#d0e2502">2.4.6.1. &#21442;&#25968;&#27880;&#35299;</a></span></dt><dt><span class="sect3"><a href="#d0e2530">2.4.6.2. &#26356;&#22810;&#30340;&#38598;&#21512;&#31867;&#22411;</a></span></dt></dl></dd><dt><span class="sect2"><a href="#d0e2613">2.4.7. &#32531;&#23384;</a></span></dt><dt><span class="sect2"><a href="#d0e2646">2.4.8. &#36807;&#28388;&#22120;</a></span></dt><dt><span class="sect2"><a href="#d0e2678">2.4.9. &#26597;&#35810;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#xml-overriding">3. &#36890;&#36807;XML&#35206;&#20889;&#20803;&#25968;&#25454;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2735">3.1. &#21407;&#21017;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2742">3.1.1. &#20840;&#23616;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</a></span></dt><dt><span class="section"><a href="#d0e2761">3.1.2. &#23454;&#20307;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</a></span></dt><dt><span class="section"><a href="#d0e2923">3.1.3. &#23646;&#24615;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</a></span></dt><dt><span class="section"><a href="#d0e2968">3.1.4. &#20851;&#32852;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#validator">4. Hibernate&#39564;&#35777;&#22120;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#validator-constraints">4.1. &#32422;&#26463;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e3043">4.1.1. &#20160;&#20040;&#26159;&#32422;&#26463;&#65311;</a></span></dt><dt><span class="sect2"><a href="#d0e3048">4.1.2. &#20869;&#24314;&#32422;&#26463;</a></span></dt><dt><span class="sect2"><a href="#validator-constraints-error">4.1.3. &#38169;&#35823;&#20449;&#24687;</a></span></dt><dt><span class="sect2"><a href="#d0e3208">4.1.4. &#32534;&#20889;&#20320;&#33258;&#24049;&#30340;&#32422;&#26463;</a></span></dt><dt><span class="sect2"><a href="#d0e3262">4.1.5. &#27880;&#35299;&#20320;&#30340;&#39046;&#22495;&#27169;&#22411;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d0e3279">4.2. &#20351;&#29992;&#39564;&#35777;&#22120;&#26694;&#26550;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e3284">4.2.1. &#25968;&#25454;&#24211;schema&#23618;&#27425;&#39564;&#35777;</a></span></dt><dt><span class="sect2"><a href="#d0e3295">4.2.2. Hibernate&#22522;&#20110;&#20107;&#20214;&#30340;&#39564;&#35777;</a></span></dt><dt><span class="sect2"><a href="#d0e3318">4.2.3. &#31243;&#24207;&#32423;&#39564;&#35777;</a></span></dt><dt><span class="sect2"><a href="#d0e3341">4.2.4. &#39564;&#35777;&#20449;&#24687;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#lucene">5. Hibernate&#19982;Lucene&#38598;&#25104;</a></span></dt><dd><dl><dt><span class="sect1"><a href="#lucene-intro">5.1. &#20351;&#29992;Lucene&#20026;&#23454;&#20307;&#24314;&#31435;&#32034;&#24341;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e3390">5.1.1. &#27880;&#35299;&#39046;&#22495;&#27169;&#22411;</a></span></dt><dt><span class="sect2"><a href="#d0e3448">5.1.2. &#21551;&#29992;&#33258;&#21160;&#32034;&#24341;</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="#d0e3458">A. &#26415;&#35821;&#34920;</a></span></dt></dl></div><div class="preface" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="preface"></a>&#21069;&#35328;</h2></div></div><div></div></div><p>WARNING! This is a translated version of the English Hibernate
    reference documentation. The translated version might not be up to date!
    However, the differences should only be very minor. Consult the English
    reference documentation if you are missing information or encounter a
    translation error. If you like to contribute to a particular translation,
    contact us on the Hibernate developer mailing list.</p><p>Translator(s): RedSaga Translate Team &#28385;&#27743;&#32418;&#32763;&#35793;&#22242;&#38431;
    &lt;caoxg@yahoo.com&gt;</p><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="preface-translate-comments-zh-cn"></a>1.&nbsp;&#32763;&#35793;&#35828;&#26126;</h2></div></div><div></div></div><p>&#26412;&#25991;&#26723;&#30340;&#32763;&#35793;&#26159;&#22312;&#32593;&#32476;&#19978;&#21327;&#20316;&#36827;&#34892;&#30340;&#65292;&#20063;&#20250;&#19981;&#26029;&#26681;&#25454;Hibernate&#30340;&#21319;&#32423;&#36827;&#34892;&#26356;&#26032;&#12290;&#25552;&#20379;&#27492;&#25991;&#26723;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#20943;&#32531;&#23398;&#20064;Hibernate&#30340;&#22369;&#24230;&#65292;&#32780;&#38750;&#20195;&#26367;&#21407;&#25991;&#26723;&#12290;&#25105;&#20204;&#24314;&#35758;&#25152;&#26377;&#26377;&#33021;&#21147;&#30340;&#35835;&#32773;&#37117;&#30452;&#25509;&#38405;&#35835;&#33521;&#25991;&#21407;&#25991;&#12290;&#33509;&#24744;&#23545;&#32763;&#35793;&#26377;&#24322;&#35758;&#65292;&#25110;&#21457;&#29616;&#32763;&#35793;&#38169;&#35823;&#65292;&#25964;&#35831;&#19981;&#21533;&#36176;&#25945;&#65292;&#25253;&#21578;&#21040;&#22914;&#19979;&#22320;&#22336;&#65306;http://wiki.redsaga.com/confluence/display/HART/Home</p><div class="table"><a name="redsaga-translate-team"></a><p class="title"><b>&#34920;&nbsp;1.&nbsp;Hibernate Annotation v3&#32763;&#35793;&#22242;&#38431;</b></p><table summary="Hibernate Annotation v3&#32763;&#35793;&#22242;&#38431;" border="1"><colgroup><col><col><col><col><col><col></colgroup><thead><tr><th align="center">&#24207;&#21495;</th><th align="center">&#26631;&#39064;</th><th align="center">&#20013;&#25991;&#26631;&#39064;</th><th align="center">&#32763;&#35793;</th><th align="center">1&#23457;</th><th align="center"> 2&#23457;</th></tr></thead><tbody><tr><td>--</td><td>Contents</td><td>&#30446;&#24405;</td><td>Liu Chang</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>#1</td><td>Setting up an annotations projec</td><td>&#21019;&#24314;&#19968;&#20010;&#27880;&#35299;&#39033;&#30446;</td><td>melthaw</td><td>Zheng Shuai</td><td>superq</td></tr><tr><td>#2</td><td>Entity Beans-Introduction</td><td>&#23454;&#20307;Bean-&#31616;&#20171;</td><td>melthaw</td><td>Zheng Shuai</td><td>superq</td></tr><tr><td>#3</td><td>Entity Beans-Mapping with EJB3 Annotations</td><td>&#23454;&#20307;Bean-&#29992;EJB3&#27880;&#35299;&#36827;&#34892;&#26144;&#23556;</td><td>melthaw</td><td>Zheng Shuai</td><td>superq, Liu Chang, Sean Chan</td></tr><tr><td>#4</td><td>Entity Beans-Mapping Queries</td><td>&#23454;&#20307;Bean-&#26144;&#23556;&#26597;&#35810;</td><td>melthaw</td><td>Zheng Shuai</td><td>superq, Liu Chang, Sean Chan</td></tr><tr><td>#5</td><td>Entity Beans-Hibernate Annotation Extensions</td><td>&#23454;&#20307;Bean-Hibernate&#29420;&#26377;&#30340;&#27880;&#35299;&#25193;&#23637;</td><td>Sean Chan</td><td>morning</td><td>melthaw</td></tr><tr><td>#6</td><td>Overriding metadata through XML</td><td>&#36890;&#36807;XML&#35206;&#20889;&#20803;&#25968;&#25454;</td><td>icess</td><td>melthaw</td><td>Sean Chan</td></tr><tr><td>#7</td><td>Hibernate Validator</td><td>Hibernate&#39564;&#35777;&#22120;</td><td>DigitalSonic</td><td>morning</td><td>melthaw</td></tr><tr><td>#8</td><td>Hibernate Lucene Integration</td><td>Hibernate&#19982;Lucene&#38598;&#25104;</td><td>mochow</td><td>morning</td><td>melthaw</td></tr><tr><td>#9</td><td>Appendix:Glossary</td><td>&#38468;&#24405;:&#26415;&#35821;&#34920;</td><td>mochow</td><td>Liu Chang</td><td>&#26361;&#26195;&#38050;</td></tr></tbody></table></div><p>&#20851;&#20110;&#25105;&#20204;</p><div class="variablelist"><dl><dt><span class="term">&#28385;&#27743;&#32418;.&#24320;&#28304;, http://www.redsaga.com</span></dt><dd><p>&#20174;&#25104;&#31435;&#20043;&#21021;&#23601;&#33268;&#21147;&#20110;Java&#24320;&#25918;&#28304;&#20195;&#30721;&#22312;&#20013;&#22269;&#30340;&#20256;&#25773;&#19982;&#21457;&#23637;,&#19982;&#22269;&#20869;&#22810;&#20010;Java&#22242;&#20307;&#21450;&#20986;&#29256;&#31038;&#26377;&#28145;&#20837;&#20132;&#27969;&#12290;&#22362;&#25345;&#23569;&#35828;&#22810;&#20570;&#30340;&#21407;&#21017;&#65292;&#30446;&#21069;&#26377;&#20004;&#20010;&#22242;&#38431;&#65292;&#8220;OpenDoc&#22242;&#38431;&#8221;&#19982;&#8220;&#32763;&#35793;&#22242;&#38431;&#8221;&#65292;&#26412;&#32763;&#35793;&#25991;&#26723;&#21363;&#20026;&#32763;&#35793;&#22242;&#38431;&#20316;&#21697;&#12290;OpenDoc&#22242;&#38431;&#24050;&#32463;&#25512;&#20986;&#21253;&#25324;Hibernate&#12289;iBatis&#12289;Spring&#12289;WebWork&#30340;&#22810;&#20221;&#24320;&#25918;&#25991;&#26723;&#65292;&#24182;&#20110;2005&#24180;5&#26376;&#22312;Hibernate&#24320;&#25918;&#25991;&#26723;&#22522;&#30784;&#19978;&#25193;&#20805;&#25104;&#20070;&#65292;&#20986;&#29256;&#20102;&#21407;&#21019;&#20070;&#31821;&#65306;&#12298;&#28145;&#20837;&#27973;&#20986;Hibernate&#12299;&#65292;&#26412;&#20070;400&#20313;&#39029;&#65292;&#36866;&#21512;&#21508;&#20010;&#23618;&#27425;&#30340;Hibernate&#29992;&#25143;&#12290;(http://www.redsaga.com/hibernate_book.html)&#25964;&#35831;&#25903;&#25345;&#12290;</p></dd><dt><span class="term">&#33268;&#35874;</span></dt><dd><p>&#22312;&#25105;&#20204;&#32763;&#35793;Hibernate
            Annotation&#21442;&#32771;&#25991;&#26723;&#30340;&#21516;&#26102;&#65292;&#36824;&#26377;&#19968;&#20301;&#28909;&#24515;&#30340;&#26379;&#21451;&#20063;&#22312;&#36827;&#34892;&#30528;&#21516;&#26679;&#30340;&#24037;&#20316;&#65292;&#36825;&#20301;&#26379;&#21451;&#23601;&#26159;icess(&#20912;&#38632;)&#65292;&#30001;icess&#32763;&#35793;&#30340;&#20013;&#25991;&#29256;&#30340;&#22320;&#22336;&#65306;
            http://icess.my.china.com/hibernate/a/ref/index.htm</p></dd></dl></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="preface-translate-licence-zh-cn"></a>2.&nbsp;&#29256;&#26435;&#22768;&#26126;</h2></div></div><div></div></div><p>Hibernate&#33521;&#25991;&#25991;&#26723;&#23646;&#20110;Hibernate&#21457;&#34892;&#21253;&#30340;&#19968;&#37096;&#20998;&#65292;&#36981;&#24490;LGPL&#21327;&#35758;&#12290;&#26412;&#32763;&#35793;&#29256;&#26412;&#21516;&#26679;&#36981;&#24490;LGPL&#21327;&#35758;&#12290;&#21442;&#19982;&#32763;&#35793;&#30340;&#35793;&#32773;&#19968;&#33268;&#21516;&#24847;&#25918;&#24323;&#38500;&#32626;&#21517;&#26435;&#22806;&#23545;&#26412;&#32763;&#35793;&#29256;&#26412;&#30340;&#20854;&#23427;&#26435;&#21033;&#35201;&#27714;&#12290;</p><p>&#24744;&#21487;&#20197;&#33258;&#30001;&#38142;&#25509;&#12289;&#19979;&#36733;&#12289;&#20256;&#25773;&#27492;&#25991;&#26723;&#65292;&#25110;&#32773;&#25918;&#32622;&#22312;&#24744;&#30340;&#32593;&#31449;&#19978;&#65292;&#29978;&#33267;&#20316;&#20026;&#20135;&#21697;&#30340;&#19968;&#37096;&#20998;&#21457;&#34892;&#12290;&#20294;&#21069;&#25552;&#26159;&#24517;&#39035;&#20445;&#35777;&#20840;&#25991;&#23436;&#25972;&#36716;&#36733;&#65292;&#21253;&#25324;&#23436;&#25972;&#30340;&#29256;&#26435;&#20449;&#24687;&#21644;&#20316;&#35793;&#32773;&#22768;&#26126;&#65292;&#24182;&#19981;&#33021;&#36829;&#21453;LGPL&#21327;&#35758;&#12290;&#36825;&#37324;&#8220;&#23436;&#25972;&#8221;&#30340;&#21547;&#20041;&#26159;&#65292;&#19981;&#33021;&#36827;&#34892;&#20219;&#20309;&#21024;&#38500;/&#22686;&#28155;/&#27880;&#35299;&#12290;&#33509;&#26377;&#21024;&#38500;/&#22686;&#28155;/&#27880;&#35299;&#65292;&#24517;&#39035;&#36880;&#27573;&#26126;&#30830;&#22768;&#26126;&#37027;&#20123;&#37096;&#20998;&#24182;&#38750;&#26412;&#25991;&#26723;&#30340;&#19968;&#37096;&#20998;&#12290;</p></div></div><div class="preface" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="d0e199"></a>&#21069;&#35328;</h2></div></div><div></div></div><p>&#27491;&#22914;&#20854;&#20182;&#30340;ORM&#24037;&#20855;,Hibernate&#21516;&#26679;&#38656;&#35201;&#20803;&#25968;&#25454;&#26469;&#25511;&#21046;&#22312;&#19981;&#21516;&#25968;&#25454;&#34920;&#36798;&#24418;&#24335;&#20043;&#38388;&#30340;&#36716;&#21270;. &#22312;Hibernate
    2.x&#37324;,&#22810;&#25968;&#24773;&#20917;&#19979;&#34920;&#31034;&#26144;&#23556;&#20851;&#31995;&#30340;&#20803;&#25968;&#25454;&#20445;&#23384;&#22312;XML&#25991;&#26412;&#25991;&#20214;&#20013;.
    &#36824;&#26377;&#19968;&#31181;&#26041;&#24335;&#23601;&#26159;Xdoclet,&#23427;&#21487;&#20197;&#22312;&#32534;&#35793;&#26102;&#21033;&#29992;Javadoc&#20013;&#30340;&#28304;&#30721;&#27880;&#37322;&#20449;&#24687;&#26469;&#36827;&#34892;&#39044;&#22788;&#29702;.
    &#29616;&#22312;&#26032;&#30340;JDK&#26631;&#20934;&#65288;JDK1.5&#20197;&#19978;&#65289;&#20063;&#25903;&#25345;&#31867;&#20284;&#30340;&#27880;&#35299;&#21151;&#33021;,&#20294;&#30456;&#27604;&#20043;&#19979;&#24456;&#22810;&#24037;&#20855;&#23545;&#27492;&#25552;&#20379;&#20102;&#26356;&#24378;&#22823;&#26356;&#22909;&#29992;&#30340;&#25903;&#25345;. &#20197;IntelliJ
    IDEA&#21644;Eclipse&#20026;&#20363;,&#36825;&#20123;IDE&#24037;&#20855;&#20026;JDK 5.0&#27880;&#35299;&#21151;&#33021;&#25552;&#20379;&#20102;&#33258;&#21160;&#23436;&#25104;&#21644;&#35821;&#27861;&#39640;&#20142;&#21151;&#33021;. &#27880;&#35299;&#34987;&#30452;&#25509;&#32534;&#35793;&#21040;&#23383;&#33410;&#30721;&#37324;,&#24182;
    &#22312;&#36816;&#34892;&#26102;&#65288;&#23545;&#20110;Hibernate&#26469;&#35762;&#23601;&#26159;&#21551;&#21160;&#30340;&#26102;&#20505;&#65289;&#36890;&#36807;&#21453;&#23556;&#35835;&#21462;&#36825;&#20123;&#27880;&#35299;, &#22240;&#27492;&#22806;&#37096;XML&#25991;&#20214;&#23601;&#19981;&#20877;&#38656;&#35201;&#20102;.</p><p>EJB3&#35268;&#33539;&#26368;&#32456;&#35748;&#21487;&#20102;&#36879;&#26126;&#21270;ORM&#30340;&#25104;&#21151;&#33539;&#20363;&#20197;&#21450;&#24066;&#22330;&#23545;&#20110;&#36825;&#31181;&#25216;&#26415;&#30340;&#20852;&#36259;.
    EJB3&#35268;&#33539;&#26631;&#20934;&#21270;&#20102;ORM&#30340;&#22522;&#30784;API&#32780;&#19988;&#22312;&#20219;&#20309;ORM&#25345;&#20037;&#21270;&#26426;&#21046;&#20013;&#20351;&#29992;&#20803;&#25968;&#25454;. <span class="emphasis"><em>Hibernate
    EntityManager</em></span>&#23454;&#29616;&#20102;EJB3&#25345;&#20037;&#21270;&#35268;&#33539;&#20013;&#23450;&#20041;&#30340;&#32534;&#31243;&#25509;&#21475;&#21644;&#29983;&#21629;&#21608;&#26399;&#35268;&#21017;. &#22312;<span class="emphasis"><em>Hibernate
    Core</em></span>&#30340;&#22522;&#30784;&#19978;&#20877;&#32467;&#21512; <span class="emphasis"><em>Hibernate
    Annotations</em></span>&#23601;&#23454;&#29616;&#20102;&#19968;&#22871;&#23436;&#25972;(&#24182;&#19988;&#29420;&#31435;)&#30340;EJB3&#25345;&#20037;&#21270;&#35299;&#20915;&#26041;&#26696;.
    &#20320;&#21487;&#20197;&#32467;&#21512;&#19977;&#32773;&#26469;&#20351;&#29992;,&#20063;&#21487;&#20197;&#25243;&#24320;EJB3&#32534;&#31243;&#25509;&#21475;&#21644;&#29983;&#21629;&#21608;&#26399;&#35268;&#21017;&#32780;&#29420;&#31435;&#20351;&#29992;&#27880;&#35299;, &#29978;&#33267;&#21482;&#21333;&#29420;&#20351;&#29992;<span class="emphasis"><em>Hibernate
    Core</em></span>. &#36825;&#20123;&#37117;&#21462;&#20915;&#20110;&#39033;&#30446;&#30340;&#21830;&#19994;&#21644;&#25216;&#26415;&#19978;&#30340;&#23454;&#38469;&#38656;&#27714;. Hibernate&#20801;&#35768;&#20320;&#30452;&#25509;&#20351;&#29992;native APIs,&#22914;&#26524;&#26377;&#38656;&#35201;,
    &#29978;&#33267;&#21487;&#20197;&#30452;&#25509;&#25805;&#20316;JDBC&#21644;SQL.</p><p>&#27880;&#24847;&#26412;&#25991;&#26723;&#22522;&#20110;Hibernate Annotations&#30340;&#39044;&#35272;&#29256;(&#36981;&#20174;EJB 3.0/JSR-220&#26368;&#32456;&#33609;&#26696;).
    &#36825;&#20010;&#29256;&#26412;&#21644;&#26032;&#35268;&#33539;&#20013;&#23450;&#20041;&#30340;&#26368;&#32456;&#27010;&#24565;&#24050;&#32463;&#38750;&#24120;&#25509;&#36817;&#20102;.&#25105;&#20204;&#30340;&#30446;&#26631;&#26159;&#25552;&#20379;&#19968;&#22871;&#23436;&#25972;&#30340;ORM&#27880;&#35299;,
    &#21253;&#25324;EJB3&#30340;&#26631;&#20934;&#27880;&#35299;&#20197;&#21450;Hibernate3&#30340;&#25193;&#23637;&#65288;&#21518;&#32773;&#26159;EJB3&#35268;&#33539;&#20013;&#27809;&#26377;&#28041;&#21450;&#21040;&#30340;&#65289;. &#26368;&#32456;&#36890;&#36807;&#27880;&#35299;&#20320;&#21487;&#20197;&#23436;&#25104;&#20219;&#20309;&#21487;&#33021;&#30340;&#26144;&#23556;.&#35814;&#24773;&#21442;&#32771;???.</p><p>EJB3&#26368;&#32456;&#33609;&#26696;&#20462;&#25913;&#20102;&#37096;&#20998;&#27880;&#35299;,
    http://www.hibernate.org/371.html&#25552;&#20379;&#20102;&#20174;&#19978;&#19968;&#20010;&#29256;&#26412;&#21040;&#26368;&#26032;&#29256;&#26412;&#30340;&#36801;&#31227;&#25351;&#21335;.</p></div><div class="chapter" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="d0e224"></a>&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#21019;&#24314;&#19968;&#20010;&#27880;&#35299;&#39033;&#30446;</h2></div></div><div></div></div><div class="section" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup-requirements"></a>1.1.&nbsp;&#31995;&#32479;&#38656;&#27714;</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>&#39318;&#20808;&#20174;Hibernate&#23448;&#26041;&#32593;&#31449;&#19979;&#36733;&#24182;&#35299;&#21387;Hibernate Annotations&#30340;&#21457;&#24067;&#21253;&#12290;</p></li><li><p><span class="emphasis"><em>&#36825;&#20010;&#29256;&#26412;(&#39044;&#35272;&#29256;)&#35201;&#27714;&#20351;&#29992;Hibernate 3.2.0.CR2&#25110;&#26356;&#39640;&#29256;&#26412;&#12290;&#35831;&#19981;&#35201;&#21644;&#32769;&#29256;&#26412;&#30340;Hibernate 3.x&#28151;&#21512;&#36215;&#26469;&#20351;&#29992;&#12290;</em></span></p></li><li><p>&#36825;&#20010;&#29256;&#26412;&#22312;Hibernate core 3.2.0.CR2&#30340;&#22522;&#30784;&#19978;&#24037;&#20316;&#33391;&#22909;&#12290;</p></li><li><p>&#39318;&#20808;&#30830;&#23450;&#20320;&#24050;&#32463;&#23433;&#35013;&#20102;JDK 5.0&#12290;&#24403;&#28982;&#23601;&#31639;&#20351;&#29992;&#20302;&#29256;&#26412;&#30340;JDK&#65292;
        Xdoclet&#20063;&#21487;&#20197;&#25552;&#20379;&#65288;&#22522;&#20110;&#27880;&#35299;&#30340;&#65289;&#20803;&#25968;&#25454;&#25152;&#24102;&#26469;&#30340;&#37096;&#20998;&#21151;&#33021;&#12290;
        &#19981;&#36807;&#35831;&#27880;&#24847;&#26412;&#25991;&#26723;&#21482;&#25551;&#36848;&#36319;JDK5.0&#27880;&#35299;&#26377;&#20851;&#30340;&#20869;&#23481;&#65292;&#20851;&#20110;Xdoclet&#35831;&#21442;&#32771;&#30456;&#20851;&#25991;&#26723;&#12290;</p></li></ul></div></div><div class="section" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="setup-configuration"></a>1.2.&nbsp;&#31995;&#32479;&#37197;&#32622;</h2></div></div><div></div></div><p>&#39318;&#20808;&#23601;&#26159;&#35774;&#32622;classpath(&#24403;&#28982;&#26159;&#22312;IDE&#20013;&#21019;&#24314;&#20102;&#19968;&#20010;&#26032;&#39033;&#30446;&#20043;&#21518;)&#12290; </p><div class="itemizedlist"><ul type="disc"><li><p>&#23558;Hibernate3&#26680;&#24515;&#25991;&#20214;&#20197;&#21450;&#20854;&#20381;&#36182;&#30340;&#31532;&#19977;&#26041;&#24211;&#25991;&#20214;(&#35831;&#21442;&#32771;lib/README.txt&#25991;&#20214;)&#21152;&#20837;&#21040;&#20320;&#30340;classpath&#37324;&#38754;&#12290;</p></li><li><p>&#23558;<tt class="filename">hibernate-annotations.jar</tt>
          &#21644;<tt class="filename">lib/ejb3-persistence.jar</tt>&#21152;&#20837;&#21040;&#20320;&#30340;classpath&#37324;&#38754;&#12290;</p></li><li><p>&#22914;&#26524;&#35201;&#20351;&#29992; <a href="#lucene" title="&#31532;&nbsp;5&nbsp;&#31456;&nbsp;Hibernate&#19982;Lucene&#38598;&#25104;">&#31532;&nbsp;5&nbsp;&#31456; <i>Hibernate&#19982;Lucene&#38598;&#25104;</i></a>&#65292;&#36824;&#38656;&#35201;&#23558;lucene&#30340;jar&#25991;&#20214;&#21152;&#20837;&#20320;&#30340;classpath&#12290;</p></li></ul></div><p>&#25105;&#20204;&#25512;&#33616;&#22312;&#19968;&#20010;&#21253;&#35013;&#22120;(wrapper)&#31867;<tt class="classname">HibernateUtil</tt>
    &#30340;&#38745;&#24577;&#21021;&#22987;&#21270;&#20195;&#30721;&#22359;&#20013;&#21551;&#21160;Hibernate&#12290;&#25110;&#35768;&#20320;&#22312;Hibernate&#25991;&#26723;&#30340;&#20854;&#20182;&#24456;&#22810;&#22320;&#26041;&#30475;&#21040;&#36807;&#36825;&#20010;&#31867;&#65292;
    &#20294;&#26159;&#35201;&#22312;&#20320;&#30340;&#39033;&#30446;&#20013;&#20351;&#29992;&#27880;&#35299;&#65292;&#36824;&#38656;&#35201;&#23545;&#36825;&#20010;&#36741;&#21161;(helper)&#31867;&#36827;&#34892;&#25193;&#23637;&#12290;&#25193;&#23637;&#22914;&#19979;:
    </p><pre class="programlisting">package hello;

import org.hibernate.*;
import org.hibernate.cfg.*;
import test.*;
import test.animals.Dog;

public class HibernateUtil {

private static final SessionFactory sessionFactory;

    static {
        try {

            sessionFactory = new <span class="bold"><b>AnnotationConfiguration()</b></span>.buildSessionFactory();
        } catch (Throwable ex) {
            // Log exception!
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static Session getSession()
            throws HibernateException {
        return sessionFactory.openSession();
    }
}
            </pre><p>&#36825;&#37324;&#27604;&#36739;&#26377;&#24847;&#24605;&#30340;&#26159;&#20351;&#29992;&#21040;&#20102;<tt class="classname">AnnotationConfiguration</tt>&#31867;&#12290;
    &#22312;XML&#37197;&#32622;&#25991;&#20214;(&#36890;&#24120;&#26159;<tt class="filename">hibernate.cfg.xml</tt>)&#20013;&#21017;&#23450;&#20041;&#20102;&#21253;&#21644;&#32463;&#36807;&#27880;&#35299;&#30340;&#31867;&#12290;&#19979;&#38754;&#30340;xml&#21644;&#21069;&#38754;&#30340;&#22768;&#26126;&#31561;&#20215;:
    </p><pre class="programlisting">&lt;!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;

        &lt;hibernate-configuration&gt;
          &lt;session-factory&gt;
            <span class="bold"><b>&lt;mapping package="test.animals"/&gt;
            &lt;mapping class="test.Flight"/&gt;
            &lt;mapping class="test.Sky"/&gt;
            &lt;mapping class="test.Person"/&gt;
            &lt;mapping class="test.animals.Dog"/&gt;</b></span>
<span class="bold"><b>            &lt;mapping resource="test/animals/orm.xml"/&gt;</b></span>
          &lt;/session-factory&gt;
        &lt;/hibernate-configuration&gt;
        </pre><p>&#27880;&#24847;&#29616;&#22312;&#20320;&#21487;&#20197;&#28151;&#21512;&#20351;&#29992;hbm.xml&#21644;&#27880;&#35299;&#12290;&#36164;&#28304;&#20803;&#32032;(resource element)&#21487;&#20197;&#26159;hbm&#25991;&#20214;&#20063;&#21487;&#20197;&#26159;EJB3 XML&#21457;&#24067;&#25551;&#36848;&#31526;&#65292;&#27492;&#24046;&#21035;&#23545;&#20110;&#37197;&#32622;&#36807;&#31243;&#26159;&#36879;&#26126;&#30340;&#12290;</p><p>&#38500;&#20102;&#19978;&#38754;&#30340;&#26041;&#24335;,&#20320;&#36824;&#21487;&#20197;&#36890;&#36807;&#32534;&#31243;&#30340;&#26041;&#24335;&#23450;&#20041;&#21253;&#25324;&#27880;&#35299;&#30340;&#31867;&#21644;&#21253;</p><pre class="programlisting">            sessionFactory = new <span class="bold"><b>AnnotationConfiguration()
                    .addPackage("test.animals") //the fully qualified package name
                    .addAnnotatedClass(Flight.class)
                    .addAnnotatedClass(Sky.class)
                    .addAnnotatedClass(Person.class)
                    .addAnnotatedClass(Dog.class)</b></span>
                    .buildSessionFactory();</pre><p>&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;Hibernate Entity Manager&#26469;&#23436;&#25104;&#20197;&#19978;&#21151;&#33021;&#12290;Hibernate Entity Manager&#26377;&#33258;&#24049;&#30340;&#19968;&#22871;&#37197;&#32622;&#26426;&#21046;&#65292;&#35814;&#24773;&#35831;&#21442;&#32771;&#30456;&#20851;&#25991;&#26723;&#12290;</p><p>&#38500;&#20102;&#21551;&#21160;&#26041;&#24335;&#21644;&#37197;&#32622;&#25991;&#20214;&#26377;&#25152;&#25913;&#21464;&#20043;&#22806;&#65292;&#32467;&#21512;&#27880;&#35299;&#26469;&#20351;&#29992;Hibernate API&#21644;&#20197;&#21069;&#27809;&#26377;&#20160;&#20040;&#21306;&#21035;&#65292;
    &#22312;&#20854;&#20182;&#26041;&#38754;&#20320;&#36824;&#26159;&#21487;&#20197;&#32487;&#32493;&#20445;&#25345;&#20197;&#21069;&#30340;&#20064;&#24815;&#21644;&#21916;&#22909;(<tt class="filename">hibernate.properties</tt>&#65292;
    <tt class="filename">hibernate.cfg.xml</tt>&#65292; programmatic APIs&#31561;&#31561;)&#12290;
    &#29978;&#33267;&#23545;&#20110;&#21516;&#19968;&#20010;<tt class="classname">SessionFactory</tt>&#65292;&#20320;&#37117;&#21487;&#20197;&#28151;&#21512;&#24102;&#27880;&#35299;&#30340;&#25345;&#20037;&#31867;&#20197;&#21450;&#20256;&#32479;&#30340;bm.cfg.xml&#22768;&#26126;&#26041;&#24335;&#12290;
    &#28982;&#32780;&#20320;&#19981;&#33021;&#22810;&#27425;&#22768;&#26126;&#21516;&#19968;&#20010;&#31867;(&#35201;&#20040;&#36890;&#36807;&#27880;&#35299;&#35201;&#20040;&#36890;&#36807;hbm.xml&#37197;&#32622;&#25991;&#20214;)&#65292;
    &#32780;&#19988;&#22312;&#19968;&#20010;&#26144;&#23556;&#23454;&#20307;&#30340;&#31867;&#32487;&#25215;&#23618;&#27425;&#20013;&#65292;&#36825;&#20004;&#20010;&#37197;&#32622;&#31574;&#30053;&#19981;&#33021;&#21516;&#26102;&#20351;&#29992;.
    </p><p>&#20026;&#20102;&#31616;&#21270;&#20174;hbm&#25991;&#20214;&#21040;&#27880;&#35299;&#30340;&#36801;&#31227;&#36807;&#31243;&#65292;
    &#37197;&#32622;&#26426;&#21046;&#23558;&#33258;&#21160;&#26816;&#27979;&#22312;&#27880;&#35299;&#21644;hbm&#25991;&#20214;&#20013;&#37325;&#22797;&#30340;&#26144;&#23556;&#12290;
    &#40664;&#35748;&#24773;&#20917;&#19979;hbm&#25991;&#20214;&#20013;&#30340;&#22768;&#26126;&#27604;&#31867;&#20013;&#30340;&#27880;&#35299;&#20803;&#25968;&#25454;&#20855;&#26377;&#26356;&#39640;&#30340;&#20248;&#20808;&#32423;&#12290;
    &#36825;&#31181;&#20248;&#20808;&#32423;&#30340;&#35774;&#23450;&#26159;&#20197;&#31867;&#20026;&#21333;&#20301;&#30340;&#12290;
    &#20320;&#20063;&#21487;&#20197;&#36890;&#36807;<tt class="literal">hibernate.mapping.precedence</tt>&#20462;&#25913;&#36825;&#31181;&#20248;&#20808;&#32423;&#12290;
    &#40664;&#35748;&#30340;&#20540;&#26159;<tt class="literal">hbm, class</tt>&#65292;
    &#22914;&#26524;&#25913;&#20026;<tt class="literal">class,hbm</tt>&#65292;&#24403;&#21457;&#29983;&#20914;&#31361;&#30340;&#26102;&#20505;&#65292;&#31867;&#20013;&#30340;&#27880;&#35299;&#23558;&#27604;hbm&#25991;&#20214;&#20855;&#26377;&#26356;&#39640;&#30340;&#20248;&#20808;&#32423;&#12290;
    </p></div></div><div class="chapter" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="entity"></a>&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#23454;&#20307;Bean</h2></div></div><div></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="entity-overview"></a>2.1.&nbsp;&#31616;&#20171;</h2></div></div><div></div></div><p>&#26412;&#31456;&#20869;&#23481;&#35206;&#30422;&#20102;EJB3.0&#23454;&#20307;bean&#30340;&#27880;&#35299;&#35268;&#33539;&#20197;&#21450;Hibernate&#29305;&#26377;&#30340;&#25193;&#23637;.</p></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mapping"></a>2.2.&nbsp;&#29992;EJB3&#27880;&#35299;&#36827;&#34892;&#26144;&#23556;</h2></div></div><div></div></div><p>&#29616;&#22312;EJB3&#23454;&#20307;Bean&#26159;&#32431;&#31929;&#30340;POJO.&#23454;&#38469;&#19978;&#36825;&#34920;&#36798;&#20102;&#21644;Hibernate&#25345;&#20037;&#21270;&#23454;&#20307;&#23545;&#35937;&#21516;&#26679;&#30340;&#27010;&#24565;.
	&#23427;&#20204;&#30340;&#26144;&#23556;&#37117;&#36890;&#36807;JDK5.0&#27880;&#35299;&#26469;&#23450;&#20041;(EJB3&#35268;&#33539;&#20013;&#30340;XML&#25551;&#36848;&#35821;&#27861;&#33267;&#20170;&#36824;&#27809;&#26377;&#26368;&#32456;&#23450;&#19979;&#26469;).
	&#27880;&#35299;&#20998;&#20026;&#20004;&#20010;&#37096;&#20998;,&#20998;&#21035;&#26159;&#36923;&#36753;&#26144;&#23556;&#27880;&#35299;&#21644;&#29289;&#29702;&#26144;&#23556;&#27880;&#35299;,
	&#36890;&#36807;&#36923;&#36753;&#26144;&#23556;&#27880;&#35299;&#21487;&#20197;&#25551;&#36848;&#23545;&#35937;&#27169;&#22411;,&#31867;&#20043;&#38388;&#30340;&#20851;&#31995;&#31561;&#31561;,
	&#32780;&#29289;&#29702;&#26144;&#23556;&#27880;&#35299;&#21017;&#25551;&#36848;&#20102;&#29289;&#29702;&#30340;schema,&#34920;,&#21015;,&#32034;&#24341;&#31561;&#31561;.
	&#19979;&#38754;&#25105;&#20204;&#22312;&#20195;&#30721;&#20013;&#23558;&#28151;&#21512;&#20351;&#29992;&#36825;&#20004;&#31181;&#31867;&#22411;&#30340;&#27880;&#35299;.</p><p>EJB3&#27880;&#35299;&#30340;API&#23450;&#20041;&#22312;<tt class="literal">javax.persistence.*</tt>&#21253;&#37324;&#38754;.
	&#22823;&#37096;&#20998;&#21644;JDK5&#20860;&#23481;&#30340;IDE(&#35937;Eclipse, IntelliJ IDEA &#21644;Netbeans&#31561;&#31561;)&#37117;&#25552;&#20379;&#20102;&#27880;&#35299;&#25509;&#21475;&#21644;&#23646;&#24615;&#30340;&#33258;&#21160;&#23436;&#25104;&#21151;&#33021;.
	(&#36825;&#20123;&#19981;&#38656;&#35201;IDE&#25552;&#20379;&#29305;&#21035;&#30340;EJB3&#25903;&#25345;&#27169;&#22359;,&#22240;&#20026;EJB3&#27880;&#35299;&#26159;&#26631;&#20934;&#30340;JDK5&#27880;&#35299;)</p><p>&#35831;&#38405;&#35835;JBoss EJB 3.0&#25351;&#21335;&#25110;&#32773;&#30452;&#25509;&#38405;&#35835;Hibernate Annotations&#27979;&#35797;&#20195;&#30721;&#20197;&#33719;&#21462;&#26356;&#22810;&#30340;&#21487;&#36816;&#34892;&#23454;&#20363;.Hibernate Annotations&#25552;&#20379;&#30340;&#22823;&#37096;&#20998;&#21333;&#20803;&#27979;&#35797;&#20195;&#30721;&#37117;&#28436;&#31034;&#20102;&#23454;&#38469;&#30340;&#20363;&#23376;,&#26159;&#19968;&#20010;&#33719;&#21462;&#28789;&#24863;&#30340;&#22909;&#22320;&#26041;.</p><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e346"></a>2.2.1.&nbsp;&#22768;&#26126;&#23454;&#20307;bean</h3></div></div><div></div></div><p>&#27599;&#19968;&#20010;&#25345;&#20037;&#21270;POJO&#31867;&#37117;&#26159;&#19968;&#20010;&#23454;&#20307;bean,&#36825;&#21487;&#20197;&#36890;&#36807;&#22312;&#31867;&#30340;&#23450;&#20041;&#20013;&#20351;&#29992;<tt class="literal">@Entity</tt>&#27880;&#35299;&#26469;&#36827;&#34892;&#22768;&#26126;:</p><pre class="programlisting">
@Entity
public class Flight implements Serializable {
    Long id;

    @Id
    public Long getId() { return id; }

    public void setId(Long id) { this.id = id; }
}
         </pre><p>&#36890;&#36807;<tt class="literal">@Entity</tt>&#27880;&#35299;&#23558;&#19968;&#20010;&#31867;&#22768;&#26126;&#20026;&#19968;&#20010;&#23454;&#20307;bean(&#21363;&#19968;&#20010;&#25345;&#20037;&#21270;POJO&#31867;),
	  <tt class="literal">@Id</tt>&#27880;&#35299;&#21017;&#22768;&#26126;&#20102;&#35813;&#23454;&#20307;bean&#30340;&#26631;&#35782;&#23646;&#24615;.
	  &#20854;&#20182;&#30340;&#26144;&#23556;&#23450;&#20041;&#26159;&#38544;&#24335;&#30340;.&#36825;&#31181;&#20197;&#38544;&#24335;&#26144;&#23556;&#20026;&#20027;&#20307;,&#20197;&#26174;&#24335;&#26144;&#23556;&#20026;&#20363;&#22806;&#30340;&#37197;&#32622;&#26041;&#24335;&#22312;&#26032;&#30340;EJ3&#35268;&#33539;&#20013;&#22788;&#20110;&#38750;&#24120;&#37325;&#35201;&#30340;&#20301;&#32622;,
	  &#21644;&#20197;&#21069;&#30340;&#29256;&#26412;&#30456;&#27604;&#26377;&#20102;&#36136;&#30340;&#39134;&#36291;.
	  &#22312;&#19978;&#38754;&#36825;&#27573;&#20195;&#30721;&#20013;&#65306;Flight&#31867;&#26144;&#23556;&#21040;Flight&#34920;,&#24182;&#20351;&#29992;id&#21015;&#20316;&#20026;&#20027;&#38190;&#21015;.
	  </p><p>&#22312;&#23545;&#19968;&#20010;&#31867;&#36827;&#34892;&#27880;&#35299;&#26102;,&#20320;&#21487;&#20197;&#36873;&#25321;&#23545;&#23427;&#30340;&#30340;&#23646;&#24615;&#25110;&#32773;&#26041;&#27861;&#36827;&#34892;&#27880;&#35299;,&#26681;&#25454;&#20320;&#30340;&#36873;&#25321;,Hibernate&#30340;&#35775;&#38382;&#31867;&#22411;&#20998;&#21035;&#20026;
	  <tt class="literal">field</tt>&#25110;<tt class="literal">property</tt>.
	  EJ3&#35268;&#33539;&#35201;&#27714;&#22312;&#38656;&#35201;&#35775;&#38382;&#30340;&#20803;&#32032;&#19978;&#36827;&#34892;&#27880;&#35299;&#22768;&#26126;,&#20363;&#22914;,&#22914;&#26524;&#35775;&#38382;&#31867;&#22411;&#20026;
	  <tt class="literal">property</tt>&#23601;&#35201;&#22312;getter&#26041;&#27861;&#19978;&#36827;&#34892;&#27880;&#35299;&#22768;&#26126;,
	  &#22914;&#26524;&#35775;&#38382;&#31867;&#22411;&#20026; <tt class="literal">field</tt>&#23601;&#35201;&#22312;&#23383;&#27573;&#19978;&#36827;&#34892;&#27880;&#35299;&#22768;&#26126;.&#24212;&#35813;&#23613;&#37327;&#36991;&#20813;&#28151;&#21512;&#20351;&#29992;&#36825;&#20004;&#31181;&#35775;&#38382;&#31867;&#22411;.
	  Hibernate&#26681;&#25454;<tt class="literal">@Id</tt> &#25110; <tt class="literal">@EmbeddedId</tt>&#30340;&#20301;&#32622;&#26469;&#21028;&#26029;&#35775;&#38382;&#31867;&#22411;.</p><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e384"></a>2.2.1.1.&nbsp;&#23450;&#20041;&#34920;(Table)</h4></div></div><div></div></div><p><tt class="literal">@Table</tt>&#26159;&#31867;&#19968;&#32423;&#30340;&#27880;&#35299;,
		&#36890;&#36807;<tt class="literal">@Table</tt>&#27880;&#35299;&#21487;&#20197;&#20026;&#23454;&#20307;bean&#26144;&#23556;&#25351;&#23450;&#34920;(table),&#30446;&#24405;(catalog)&#21644;schema&#30340;&#21517;&#23383;.
		&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;<tt class="literal">@Table</tt>,&#37027;&#20040;&#31995;&#32479;&#33258;&#21160;&#20351;&#29992;&#40664;&#35748;&#20540;&#65306;&#23454;&#20307;&#30340;&#30701;&#31867;&#21517;(&#19981;&#38468;&#24102;&#21253;&#21517;).</p><pre class="programlisting">
@Entity
@Table(name="tbl_sky")
public class Sky implements Serializable {
...
            </pre><p><tt class="literal">@Table</tt>&#20803;&#32032;&#21253;&#25324;&#20102;&#19968;&#20010;<tt class="literal">schema</tt>
		&#21644;&#19968;&#20010; <tt class="literal">catalog</tt>&#23646;&#24615;,&#22914;&#26524;&#38656;&#35201;&#21487;&#20197;&#25351;&#23450;&#30456;&#24212;&#30340;&#20540;.
		&#32467;&#21512;&#20351;&#29992;<tt class="literal">@UniqueConstraint</tt>&#27880;&#35299;&#21487;&#20197;&#23450;&#20041;&#34920;&#30340;&#21807;&#19968;&#32422;&#26463;(unique constraint)
		(&#23545;&#20110;&#32465;&#23450;&#21040;&#21333;&#21015;&#30340;&#21807;&#19968;&#32422;&#26463;,&#35831;&#21442;&#32771;<tt class="literal">@Column</tt>&#27880;&#35299;)
		</p><pre class="programlisting">@Table(name="tbl_sky",
		    <span class="bold"><b>uniqueConstraints = {@UniqueConstraint(columnNames={"month", "day"})}</b></span>
		)</pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,&#22312;month&#21644;day&#36825;&#20004;&#20010;&#23383;&#27573;&#19978;&#23450;&#20041;&#21807;&#19968;&#32422;&#26463;.
		&#27880;&#24847;<tt class="literal">columnNames</tt>&#25968;&#32452;&#20013;&#30340;&#20540;&#25351;&#30340;&#26159;&#36923;&#36753;&#21015;&#21517;.</p><i><span class="remark">Hibernate&#22312;NamingStrategy&#30340;&#23454;&#29616;&#20013;&#23450;&#20041;&#20102;&#36923;&#36753;&#21015;&#21517;.
		&#40664;&#35748;&#30340;EJB3&#21629;&#21517;&#31574;&#30053;&#23558;&#29289;&#29702;&#23383;&#27573;&#21517;&#24403;&#20316;&#36923;&#36753;&#23383;&#27573;&#21517;&#26469;&#20351;&#29992;.
		&#27880;&#24847;&#35813;&#23383;&#27573;&#21517;&#21644;&#23427;&#23545;&#24212;&#30340;&#23646;&#24615;&#21517;&#21487;&#33021;&#19981;&#21516;(&#22914;&#26524;&#23383;&#27573;&#21517;&#26159;&#26174;&#24335;&#25351;&#23450;&#30340;&#35805;).
		&#38500;&#38750;&#20320;&#37325;&#20889;&#20102;NamingStrategy,&#21542;&#21017;&#19981;&#29992;&#25285;&#24515;&#36825;&#20123;&#21306;&#21035;..</span></i></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e427"></a>2.2.1.2.&nbsp;&#20048;&#35266;&#38145;&#23450;&#29256;&#26412;&#25511;&#21046;</h4></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#22312;&#23454;&#20307;bean&#20013;&#20351;&#29992;<tt class="literal">@Version</tt>&#27880;&#35299;,&#36890;&#36807;&#36825;&#31181;&#26041;&#24335;&#21487;&#28155;&#21152;&#23545;&#20048;&#35266;&#38145;&#23450;&#30340;&#25903;&#25345;:</p><pre class="programlisting">
@Entity
public class Flight implements Serializable {
...
    @Version
    @Column(name="OPTLOCK")
    public Integer getVersion() { ... }
}           </pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,version&#23646;&#24615;&#23558;&#26144;&#23556;&#21040; <tt class="literal">OPTLOCK</tt>&#21015;,
		entity manager&#20351;&#29992;&#35813;&#23383;&#27573;&#26469;&#26816;&#27979;&#26356;&#26032;&#20914;&#31361;(&#38450;&#27490;&#26356;&#26032;&#20002;&#22833;,&#35831;&#21442;&#32771;last-commit-wins&#31574;&#30053;).</p><p>&#26681;&#25454;EJB3&#35268;&#33539;,version&#21015;&#21487;&#20197;&#26159;numeric&#31867;&#22411;(&#25512;&#33616;&#26041;&#24335;)&#20063;&#21487;&#20197;&#26159;timestamp&#31867;&#22411;.
		Hibernate&#25903;&#25345;&#20219;&#20309;&#33258;&#23450;&#20041;&#31867;&#22411;,&#21482;&#35201;&#35813;&#31867;&#22411;&#23454;&#29616;&#20102;<tt class="classname">UserVersionType</tt>.</p></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e447"></a>2.2.2.&nbsp;&#26144;&#23556;&#31616;&#21333;&#23646;&#24615;</h3></div></div><div></div></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e450"></a>2.2.2.1.&nbsp;&#22768;&#26126;&#22522;&#26412;&#30340;&#23646;&#24615;&#26144;&#23556;</h4></div></div><div></div></div><p>Every non static non transient property (field or method) of an
        entity bean is considered persistent, unless you annotate it as
        <tt class="literal">@Transient</tt>. Not having an annotation for your
        property is equivalent to the appropriate <tt class="literal">@Basic</tt>
        annotation. The <tt class="literal">@Basic</tt> annotation allows you to
        declare the fetching strategy for a property:</p><p>&#23454;&#20307;bean&#20013;&#25152;&#26377;&#30340;&#38750;static&#38750;transient&#30340;&#23646;&#24615;&#37117;&#21487;&#20197;&#34987;&#25345;&#20037;&#21270;,
		&#38500;&#38750;&#20320;&#23558;&#20854;&#27880;&#35299;&#20026;<tt class="literal">@Transient</tt>.&#25152;&#26377;&#27809;&#26377;&#23450;&#20041;&#27880;&#35299;&#30340;&#23646;&#24615;&#31561;&#20215;&#20110;&#22312;&#20854;&#19978;&#38754;&#28155;&#21152;&#20102;@Basic&#27880;&#35299;.
		&#36890;&#36807; <tt class="literal">@Basic</tt>&#27880;&#35299;&#21487;&#20197;&#22768;&#26126;&#23646;&#24615;&#30340;&#33719;&#21462;&#31574;&#30053;(fetch strategy)&#65306;</p><pre class="programlisting">public transient int counter; //transient property

private String firstname; //persistent property

@Transient
String getLengthInMeter() { ... } //transient property

String getName() {... } // persistent property

@Basic
int getLength() { ... } // persistent property

@Basic(fetch = FetchType.LAZY)
String getDetailedComment() { ... } // persistent property

@Temporal(TemporalType.TIME)
java.util.Date getDepartureTime() { ... } // persistent property           

@Enumerated(EnumType.STRING)
Starred getNote() { ... } //enum persisted as String in database</pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">counter</tt>&#26159;&#19968;&#20010;transient&#30340;&#23383;&#27573;,
		<tt class="literal">lengthInMeter</tt>&#30340;getter&#26041;&#27861;&#34987;&#27880;&#35299;&#20026;<tt class="literal">@Transient</tt>, 
		entity manager&#23558;&#24573;&#30053;&#36825;&#20123;&#23383;&#27573;&#21644;&#23646;&#24615;.
		&#32780;<tt class="literal">name</tt>,<tt class="literal">length</tt>,<tt class="literal">firstname</tt>
		&#36825;&#20960;&#20010;&#23646;&#24615;&#21017;&#26159;&#34987;&#23450;&#20041;&#20026;&#21487;&#25345;&#20037;&#21270;&#21644;&#21487;&#33719;&#21462;&#30340;.&#23545;&#20110;&#31616;&#21333;&#23646;&#24615;&#26469;&#35828;,&#40664;&#35748;&#30340;&#33719;&#21462;&#26041;&#24335;&#26159;&#21363;&#26102;&#33719;&#21462;(early fetch).
		&#24403;&#19968;&#20010;&#23454;&#20307;Bean&#30340;&#23454;&#20363;&#34987;&#21019;&#24314;&#26102;,Hibernate&#20250;&#23558;&#36825;&#20123;&#23646;&#24615;&#30340;&#20540;&#20174;&#25968;&#25454;&#24211;&#20013;&#25552;&#21462;&#20986;&#26469;,&#20445;&#23384;&#21040;Bean&#30340;&#23646;&#24615;&#37324;.
		&#19982;&#21363;&#26102;&#33719;&#21462;&#30456;&#23545;&#24212;&#30340;&#26159;&#24310;&#36831;&#33719;&#21462;(lazy fetch).&#22914;&#26524;&#19968;&#20010;&#23646;&#24615;&#30340;&#33719;&#21462;&#26041;&#24335;&#26159;&#24310;&#36831;&#33719;&#21462;
		(&#27604;&#22914;&#19978;&#38754;&#20363;&#23376;&#20013;&#30340;<tt class="literal">detailedComment</tt>&#23646;&#24615;),
		Hibernate&#22312;&#21019;&#24314;&#19968;&#20010;&#23454;&#20307;Bean&#30340;&#23454;&#20363;&#26102;,&#19981;&#20250;&#21363;&#26102;&#23558;&#36825;&#20010;&#23646;&#24615;&#30340;&#20540;&#20174;&#25968;&#25454;&#24211;&#20013;&#35835;&#20986;.
		&#21482;&#26377;&#22312;&#35813;&#23454;&#20307;Bean&#30340;&#36825;&#20010;&#23646;&#24615;&#31532;&#19968;&#27425;&#34987;&#35843;&#29992;&#26102;,Hibernate&#25165;&#20250;&#21435;&#33719;&#21462;&#23545;&#24212;&#30340;&#20540;.
		&#36890;&#24120;&#20320;&#19981;&#38656;&#35201;&#23545;&#31616;&#21333;&#23646;&#24615;&#35774;&#32622;&#24310;&#36831;&#33719;&#21462;(lazy simple property),&#21315;&#19975;&#19981;&#35201;&#21644;&#24310;&#36831;&#20851;&#32852;&#33719;&#21462;(lazy association fetch)&#28151;&#28102;&#20102;
		(&#35793;&#27880;:&#36825;&#37324;&#25351;&#19981;&#35201;&#25226;lazy simple property&#21644;lazy association fetch&#28151;&#28102;&#20102;).
		</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#20026;&#20102;&#21551;&#29992;&#23646;&#24615;&#32423;&#30340;&#24310;&#36831;&#33719;&#21462;,&#20320;&#30340;&#31867;&#24517;&#39035;&#32463;&#36807;&#29305;&#27530;&#22788;&#29702;(instrumented)&#65306;
		  &#23383;&#33410;&#30721;&#23558;&#34987;&#32455;&#20837;&#21407;&#22987;&#31867;&#20013;&#26469;&#23454;&#29616;&#24310;&#36831;&#33719;&#21462;&#21151;&#33021;,
		  &#35814;&#24773;&#21442;&#32771;Hibernate&#21442;&#32771;&#25991;&#26723;.&#22914;&#26524;&#19981;&#23545;&#31867;&#25991;&#20214;&#36827;&#34892;&#23383;&#33410;&#30721;&#29305;&#27530;&#22788;&#29702;,
		  &#37027;&#20040;&#23646;&#24615;&#32423;&#30340;&#24310;&#36831;&#33719;&#21462;&#23558;&#34987;&#24573;&#30053;.</p></div><p>&#25512;&#33616;&#30340;&#26367;&#20195;&#26041;&#26696;&#26159;&#20351;&#29992;EJB-QL&#25110;&#32773;Criteria&#26597;&#35810;&#30340;&#25237;&#24433;(projection)&#21151;&#33021;.</p><p>Hibernate&#21644;EJB3&#37117;&#25903;&#25345;&#25152;&#26377;&#22522;&#26412;&#31867;&#22411;&#30340;&#23646;&#24615;&#26144;&#23556;.
		&#36825;&#20123;&#22522;&#26412;&#31867;&#22411;&#21253;&#25324;&#25152;&#26377;&#30340;Java&#22522;&#26412;&#31867;&#22411;,&#21450;&#20854;&#21508;&#33258;&#30340;wrapper&#31867;&#21644;serializable&#31867;.
		Hibernate Annotations&#36824;&#25903;&#25345;&#23558;&#20869;&#32622;&#30340;&#26522;&#20030;&#31867;&#22411;&#26144;&#23556;&#21040;&#19968;&#20010;&#39034;&#24207;&#21015;(&#20445;&#23384;&#20102;&#30456;&#24212;&#30340;&#24207;&#21015;&#20540;)
		&#25110;&#19968;&#20010;&#23383;&#31526;&#20018;&#31867;&#22411;&#30340;&#21015;(&#20445;&#23384;&#30456;&#24212;&#30340;&#23383;&#31526;&#20018;).&#40664;&#35748;&#26159;&#20445;&#23384;&#26522;&#20030;&#30340;&#24207;&#21015;&#20540;,
		&#20294;&#26159;&#20320;&#21487;&#20197;&#36890;&#36807;<tt class="literal">@Enumerated</tt>&#27880;&#35299;&#26469;&#36827;&#34892;&#35843;&#25972;(&#35265;&#19978;&#38754;&#20363;&#23376;&#20013;&#30340;note&#23646;&#24615;).</p><p>&#22312;&#26680;&#24515;&#30340;Java API&#20013;&#24182;&#27809;&#26377;&#23450;&#20041;&#26102;&#38388;&#31934;&#24230;(temporal precision).
		&#22240;&#27492;&#22788;&#29702;&#26102;&#38388;&#31867;&#22411;&#25968;&#25454;&#26102;,&#20320;&#36824;&#38656;&#35201;&#23450;&#20041;&#23558;&#20854;&#23384;&#20648;&#22312;&#25968;&#25454;&#24211;&#20013;&#25152;&#39044;&#26399;&#30340;&#31934;&#24230;.
		&#22312;&#25968;&#25454;&#24211;&#20013;,&#34920;&#31034;&#26102;&#38388;&#31867;&#22411;&#30340;&#25968;&#25454;&#26377;<tt class="literal">DATE</tt>, <tt class="literal">TIME</tt>, 
		&#21644; <tt class="literal">TIMESTAMP</tt>&#19977;&#31181;&#31934;&#24230;(&#21363;&#21333;&#32431;&#30340;&#26085;&#26399;,&#26102;&#38388;,&#25110;&#32773;&#20004;&#32773;&#20860;&#22791;).
		&#21487;&#20351;&#29992;<tt class="literal">@Temporal</tt>&#27880;&#35299;&#26469;&#35843;&#25972;&#31934;&#24230;.</p><p><tt class="literal">@Lob</tt>&#27880;&#35299;&#34920;&#31034;&#23646;&#24615;&#23558;&#34987;&#25345;&#20037;&#21270;&#20026;Blob&#25110;&#32773;Clob&#31867;&#22411;,
		&#20855;&#20307;&#21462;&#20915;&#20110;&#23646;&#24615;&#30340;&#31867;&#22411;,
		<tt class="classname">java.sql.Clob</tt>, 
		<tt class="classname">Character[]</tt>,
		<tt class="classname">char[]</tt> &#21644; 
		<tt class="classname">java.lang.String</tt>&#36825;&#20123;&#31867;&#22411;&#30340;&#23646;&#24615;&#37117;&#34987;&#25345;&#20037;&#21270;&#20026;Clob&#31867;&#22411;,
		&#32780;<tt class="classname">java.sql.Blob</tt>, 
		<tt class="classname">Byte[]</tt>, 
		<tt class="classname">byte[]</tt> &#21644;
		serializable&#31867;&#22411;&#21017;&#34987;&#25345;&#20037;&#21270;&#20026;Blob&#31867;&#22411;.</p><pre class="programlisting">
@Lob
public String getFullText() {
    return fullText;
}

@Lob 
public byte[] getFullCode() {
    return fullCode;
}
 </pre><p>&#22914;&#26524;&#26576;&#20010;&#23646;&#24615;&#23454;&#29616;&#20102;<tt class="classname">java.io.Serializable</tt>&#21516;&#26102;&#20063;&#19981;&#26159;&#22522;&#26412;&#31867;&#22411;,
		&#24182;&#19988;&#27809;&#26377;&#22312;&#35813;&#23646;&#24615;&#19978;&#20351;&#29992;<tt class="literal">@Lob</tt>&#27880;&#35299;,
		&#37027;&#20040;Hibernate&#23558;&#20351;&#29992;&#33258;&#24102;&#30340;<tt class="literal">serializable</tt>&#31867;&#22411;.
		</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e559"></a>2.2.2.2.&nbsp;&#22768;&#26126;&#21015;&#23646;&#24615;</h4></div></div><div></div></div><p>&#20351;&#29992; <tt class="literal">@Column </tt>&#27880;&#35299;&#21487;&#23558;&#23646;&#24615;&#26144;&#23556;&#21040;&#21015;.
		&#20351;&#29992;&#35813;&#27880;&#35299;&#26469;&#35206;&#30422;&#40664;&#35748;&#20540;(&#20851;&#20110;&#40664;&#35748;&#20540;&#35831;&#21442;&#32771;EJB3&#35268;&#33539;).
		&#22312;&#23646;&#24615;&#32423;&#20351;&#29992;&#35813;&#27880;&#35299;&#30340;&#26041;&#24335;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#19981;&#36827;&#34892;&#27880;&#35299;</p></li><li><p>&#21644; <tt class="literal">@Basic</tt>&#19968;&#36215;&#20351;&#29992;</p></li><li><p>&#21644; <tt class="literal">@Version</tt>&#19968;&#36215;&#20351;&#29992;</p></li><li><p>&#21644; <tt class="literal">@Lob</tt>&#19968;&#36215;&#20351;&#29992;</p></li><li><p>&#21644; <tt class="literal">@Temporal</tt>&#19968;&#36215;&#20351;&#29992;</p></li><li><p>&#21644;
            <tt class="literal">@org.hibernate.annotations.CollectionOfElements</tt>&#19968;&#36215;&#20351;&#29992;
            (&#21482;&#38024;&#23545;Hibernate )</p></li></ul></div><pre class="programlisting">
@Entity
public class Flight implements Serializable {
...
@Column(updatable = false, name = "flight_name", nullable = false, length=50)
public String getName() { ... }
            </pre><p>&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">name</tt>&#23646;&#24615;&#26144;&#23556;&#21040;<tt class="literal">flight_name</tt>&#21015;.
		&#35813;&#23383;&#27573;&#19981;&#20801;&#35768;&#20026;&#31354;,&#38271;&#24230;&#20026;50,&#24182;&#19988;&#26159;&#19981;&#21487;&#26356;&#26032;&#30340;(&#20063;&#23601;&#26159;&#23646;&#24615;&#20540;&#26159;&#19981;&#21464;&#30340;).</p><p>&#19978;&#38754;&#36825;&#20123;&#27880;&#35299;&#21487;&#20197;&#34987;&#24212;&#29992;&#21040;&#27491;&#35268;&#23646;&#24615;&#19978;&#20363;&#22914;<tt class="literal">@Id</tt> &#25110;<tt class="literal">@Version</tt>&#23646;&#24615;.</p><div class="programlistingco"><pre class="programlisting">@Column(
    name="columnName";                                <span class="co">(1)</span>
    boolean unique() default false;                   <span class="co">(2)</span>
    boolean nullable() default true;                  <span class="co">(3)</span>
    boolean insertable() default true;                <span class="co">(4)</span>
    boolean updatable() default true;                 <span class="co">(5)</span>
    String columnDefinition() default "";             <span class="co">(6)</span>
    String table() default "";                        <span class="co">(7)</span>
    int length() default 255;                         <span class="co">(8)</span>
    int precision() default 0; // decimal precision   <span class="co">(9)</span>
    int scale() default 0; // decimal scale</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p><tt class="literal">name</tt> &#21487;&#36873;,&#21015;&#21517;(&#40664;&#35748;&#20540;&#26159;&#23646;&#24615;&#21517;)</p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p><tt class="literal">unique</tt> &#21487;&#36873;,&#26159;&#21542;&#22312;&#35813;&#21015;&#19978;&#35774;&#32622;&#21807;&#19968;&#32422;&#26463;(&#40664;&#35748;&#20540;false)</p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p><tt class="literal">nullable</tt> &#21487;&#36873;,&#26159;&#21542;&#35774;&#32622;&#35813;&#21015;&#30340;&#20540;&#21487;&#20197;&#20026;&#31354;(&#40664;&#35748;&#20540;false)</p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p><tt class="literal">insertable</tt> &#21487;&#36873;,&#35813;&#21015;&#26159;&#21542;&#20316;&#20026;&#29983;&#25104;&#30340;insert&#35821;&#21477;&#20013;&#30340;&#19968;&#20010;&#21015;(&#40664;&#35748;&#20540;true)</p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p><tt class="literal">updatable</tt> &#21487;&#36873;,&#35813;&#21015;&#26159;&#21542;&#20316;&#20026;&#29983;&#25104;&#30340;update&#35821;&#21477;&#20013;&#30340;&#19968;&#20010;&#21015;(&#40664;&#35748;&#20540;true)</p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p><tt class="literal">columnDefinition</tt> &#21487;&#36873;: &#20026;&#36825;&#20010;&#29305;&#23450;&#21015;&#35206;&#30422;SQL DDL&#29255;&#27573; (&#36825;&#21487;&#33021;&#23548;&#33268;&#26080;&#27861;&#22312;&#19981;&#21516;&#25968;&#25454;&#24211;&#38388;&#31227;&#26893;)</p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p><tt class="literal">table</tt> &#21487;&#36873;,&#23450;&#20041;&#23545;&#24212;&#30340;&#34920;(&#40664;&#35748;&#20026;&#20027;&#34920;)</p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p><tt class="literal"><tt class="literal">length</tt></tt> &#21487;&#36873;,&#21015;&#38271;&#24230;(&#40664;&#35748;&#20540;255)</p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p><tt class="literal"><tt class="literal">precision</tt></tt>
              &#21487;&#36873;,&#21015;&#21313;&#36827;&#21046;&#31934;&#24230;(decimal precision)(&#40664;&#35748;&#20540;0)</p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p><tt class="literal"><tt class="literal">scale</tt></tt> 
              &#21487;&#36873;,&#22914;&#26524;&#21015;&#21313;&#36827;&#21046;&#25968;&#20540;&#33539;&#22260;(decimal scale)&#21487;&#29992;,&#22312;&#27492;&#35774;&#32622;(&#40664;&#35748;&#20540;0)</p></td></tr></table></div></div></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e687"></a>2.2.2.3.&nbsp;&#23884;&#20837;&#24335;&#23545;&#35937;(&#21448;&#21517;&#32452;&#20214;)</h4></div></div><div></div></div><p>&#22312;&#23454;&#20307;&#20013;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#23884;&#20837;&#24335;&#32452;&#20214;(embedded component),
		&#29978;&#33267;&#35206;&#30422;&#35813;&#23454;&#20307;&#20013;&#21407;&#26377;&#30340;&#21015;&#26144;&#23556;.
		&#32452;&#20214;&#31867;&#24517;&#39035;&#22312;&#31867;&#19968;&#32423;&#23450;&#20041;<tt class="literal">@Embeddable</tt>&#27880;&#35299;.
		&#22312;&#29305;&#23450;&#30340;&#23454;&#20307;&#30340;&#20851;&#32852;&#23646;&#24615;&#19978;&#20351;&#29992;<tt class="literal">@Embedded</tt>&#21644;
		<tt class="literal">@AttributeOverride</tt>&#27880;&#35299;&#21487;&#20197;&#35206;&#30422;&#35813;&#23646;&#24615;&#23545;&#24212;&#30340;&#23884;&#20837;&#24335;&#23545;&#35937;&#30340;&#21015;&#26144;&#23556;&#65306;</p><pre class="programlisting">
@Entity
public class Person implements Serializable {

    // Persistent component using defaults
    Address homeAddress;

    @Embedded
    @AttributeOverrides( {
            @AttributeOverride(name="iso2", column = @Column(name="bornIso2") ),
            @AttributeOverride(name="name", column = @Column(name="bornCountryName") )
    } )
    Country bornIn;
    ...
}
            </pre><pre class="programlisting">
@Embeddable
public class Address implements Serializable {
    String city;
    Country nationality; //no overriding here
}
            </pre><pre class="programlisting">
@Embeddable
public class Country implements Serializable {
    private String iso2;
    @Column(name="countryName") private String name;

    public String getIso2() { return iso2; }
    public void setIso2(String iso2) { this.iso2 = iso2; }

    
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    ...
}
            </pre><p>&#23884;&#20837;&#24335;&#23545;&#35937;&#32487;&#25215;&#20854;&#25152;&#23646;&#23454;&#20307;&#20013;&#23450;&#20041;&#30340;&#35775;&#38382;&#31867;&#22411;
		(&#27880;&#24847;:&#36825;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992;Hibernate&#25552;&#20379;&#30340;<tt class="literal">@AccessType</tt>&#27880;&#35299;&#26469;&#35206;&#30422;&#21407;&#26377;&#20540;)(&#35831;&#21442;&#32771; <a href="#entity-hibspec">Hibernate Annotation Extensions</a>).</p><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;,&#23454;&#20307;bean <tt class="literal">Person</tt> &#26377;&#20004;&#20010;&#32452;&#20214;&#23646;&#24615;,
		&#20998;&#21035;&#26159;<tt class="literal">homeAddress</tt>&#21644;<tt class="literal">bornIn</tt>. 
		&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;<tt class="literal">homeAddress</tt> &#23646;&#24615;&#24182;&#27809;&#26377;&#27880;&#35299;.
		&#20294;&#26159;Hibernate&#33258;&#21160;&#26816;&#27979;&#20854;&#23545;&#24212;&#30340;Address&#31867;&#20013;&#30340;<tt class="literal">@Embeddable</tt>&#27880;&#35299;,
		&#24182;&#23558;&#20854;&#30475;&#20316;&#19968;&#20010;&#25345;&#20037;&#21270;&#32452;&#20214;.&#23545;&#20110;Country&#20013;&#24050;&#26144;&#23556;&#30340;&#23646;&#24615;,
		&#21017;&#20351;&#29992;<tt class="literal">@Embedded</tt>&#21644;<tt class="literal">@AttributeOverride
        </tt>&#27880;&#35299;&#26469;&#35206;&#30422;&#21407;&#26469;&#26144;&#23556;&#30340;&#21015;&#21517;.
		&#27491;&#22914;&#20320;&#25152;&#30475;&#21040;&#30340;, <tt class="literal">Address</tt>&#23545;&#35937;&#20013;&#36824;&#20869;&#23884;&#20102;<tt class="literal">Country</tt>&#23545;&#35937;,
		&#36825;&#37324;&#21644;<tt class="literal">homeAddress</tt>&#19968;&#26679;&#20351;&#29992;&#20102;Hibernate&#21644;EJB3&#33258;&#21160;&#26816;&#27979;&#26426;&#21046;.
		&#30446;&#21069;EJB3&#35268;&#33539;&#36824;&#19981;&#25903;&#25345;&#35206;&#30422;&#22810;&#23618;&#23884;&#22871;(&#21363;&#23884;&#20837;&#24335;&#23545;&#35937;&#20013;&#36824;&#21253;&#25324;&#20854;&#20182;&#23884;&#20837;&#24335;&#23545;&#35937;)&#30340;&#21015;&#26144;&#23556;.
		&#19981;&#36807;Hibernate&#36890;&#36807;&#22312;&#34920;&#36798;&#24335;&#20013;&#20351;&#29992;"."&#31526;&#21495;&#34920;&#36798;&#24335;&#25552;&#20379;&#20102;&#23545;&#27492;&#29305;&#24449;&#30340;&#25903;&#25345;.</p><pre class="programlisting">    @Embedded
    @AttributeOverrides( {
            @AttributeOverride(name="city", column = @Column(name="fld_city") ),
            @AttributeOverride(name="<span class="bold"><b>nationality.iso2</b></span>", column = @Column(name="nat_Iso2") ),
            @AttributeOverride(name="<span class="bold"><b>nationality.name</b></span>", column = @Column(name="nat_CountryName") )
            //nationality columns in homeAddress are overridden
    } )
    Address homeAddress;</pre><p>
	Hibernate&#27880;&#35299;&#25903;&#25345;&#24456;&#22810;EJB3&#35268;&#33539;&#20013;&#27809;&#26377;&#26126;&#30830;&#23450;&#20041;&#30340;&#29305;&#24615;.
	&#20363;&#22914;,&#21487;&#20197;&#22312;&#23884;&#20837;&#24335;&#23545;&#35937;&#19978;&#28155;&#21152; <tt class="literal">@MappedSuperclass</tt>&#27880;&#35299;,
	&#36825;&#26679;&#21487;&#20197;&#23558;&#20854;&#29238;&#31867;&#30340;&#23646;&#24615;&#25345;&#20037;(&#35814;&#24773;&#35831;&#26597;&#38405;<tt class="literal">@MappedSuperclass</tt>).</p><p>Hibernate&#29616;&#22312;&#25903;&#25345;&#22312;&#23884;&#20837;&#24335;&#23545;&#35937;&#20013;&#20351;&#29992;&#20851;&#32852;&#27880;&#35299;(&#22914;<tt class="literal">@*ToOne</tt>&#21644;<tt class="literal">@*ToMany</tt>).
		&#32780;EJB3&#35268;&#33539;&#23578;&#19981;&#25903;&#25345;&#36825;&#26679;&#30340;&#29992;&#27861;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992; <tt class="literal">@AssociationOverride</tt>&#27880;&#35299;&#26469;&#35206;&#20889;&#20851;&#32852;&#21015;.</p><p>&#22312;&#21516;&#19968;&#20010;&#23454;&#20307;&#20013;&#20351;&#29992;&#20004;&#20010;&#21516;&#31867;&#22411;&#30340;&#23884;&#20837;&#23545;&#35937;,
		&#20854;&#40664;&#35748;&#21015;&#21517;&#26159;&#26080;&#25928;&#30340;:&#33267;&#23569;&#35201;&#23545;&#20854;&#20013;&#19968;&#20010;&#36827;&#34892;&#26126;&#30830;&#22768;&#26126;.
		Hibernate&#22312;&#36825;&#26041;&#38754;&#36208;&#22312;&#20102;EJB3&#35268;&#33539;&#30340;&#21069;&#38754;,
		Hibernate&#25552;&#20379;&#20102;<tt class="classname">NamingStrategy</tt>, &#22312;&#20351;&#29992;Hibernate&#26102;, 
		&#36890;&#36807;<tt class="classname">NamingStrategy</tt>&#20320;&#21487;&#20197;&#23545;&#40664;&#35748;&#30340;&#26426;&#21046;&#36827;&#34892;&#25193;&#23637;. 
		<tt class="classname">DefaultComponentSafeNamingStrategy</tt>
		&#22312;&#40664;&#35748;&#30340;EJB3NamingStrategy&#19978;&#36827;&#34892;&#20102;&#23567;&#23567;&#30340;&#25552;&#21319;,
		&#20801;&#35768;&#22312;&#21516;&#19968;&#23454;&#20307;&#20013;&#20351;&#29992;&#20004;&#20010;&#21516;&#31867;&#22411;&#30340;&#23884;&#20837;&#23545;&#35937;&#32780;&#26080;&#39035;&#39069;&#22806;&#30340;&#22768;&#26126;.</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e784"></a>2.2.2.4.&nbsp;&#26080;&#27880;&#35299;&#20043;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;</h4></div></div><div></div></div><p>&#22914;&#26524;&#26576;&#23646;&#24615;&#27809;&#26377;&#27880;&#35299;,&#35813;&#23646;&#24615;&#23558;&#36981;&#23432;&#19979;&#38754;&#30340;&#35268;&#21017;:</p><div class="itemizedlist"><ul type="disc"><li>
             &#22914;&#26524;&#23646;&#24615;&#20026;&#21333;&#19968;&#31867;&#22411;,&#21017;&#26144;&#23556;&#20026;@Basic 
          </li><li>
             &#21542;&#21017;,&#22914;&#26524;&#23646;&#24615;&#23545;&#24212;&#30340;&#31867;&#22411;&#23450;&#20041;&#20102;@Embeddable&#27880;&#35299;,&#21017;&#26144;&#23556;&#20026;@Embedded 
          </li><li>
             &#21542;&#21017;,&#22914;&#26524;&#23646;&#24615;&#23545;&#24212;&#30340;&#31867;&#22411;&#23454;&#29616;&#20102;Serializable,
			 &#21017;&#23646;&#24615;&#34987;&#26144;&#23556;&#20026;@Basic&#24182;&#22312;&#19968;&#20010;&#21015;&#20013;&#20445;&#23384;&#35813;&#23545;&#35937;&#30340;serialized&#29256;&#26412;
          </li><li>
            &#21542;&#21017;,&#22914;&#26524;&#35813;&#23646;&#24615;&#30340;&#31867;&#22411;&#20026;java.sql.Clob &#25110; java.sql.Blob,&#21017;&#20316;&#20026;@Lob&#24182;&#26144;&#23556;&#21040;&#36866;&#24403;&#30340;LobType.
          </li></ul></div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="mapping-identifier"></a>2.2..&nbsp;&#26144;&#23556;&#20027;&#38190;&#23646;&#24615;</h3></div></div><div></div></div><p>&#20351;&#29992;<tt class="literal">@Id</tt>&#27880;&#35299;&#21487;&#20197;&#23558;&#23454;&#20307;bean&#20013;&#30340;&#26576;&#20010;&#23646;&#24615;&#23450;&#20041;&#20026;&#26631;&#35782;&#31526;(identifier).
	  &#35813;&#23646;&#24615;&#30340;&#20540;&#21487;&#20197;&#36890;&#36807;&#24212;&#29992;&#33258;&#36523;&#36827;&#34892;&#35774;&#32622;,
	  &#20063;&#21487;&#20197;&#36890;&#36807;Hiberante&#29983;&#25104;(&#25512;&#33616;).
	  &#20351;&#29992; <tt class="literal">@GeneratedValue</tt>&#27880;&#35299;&#21487;&#20197;&#23450;&#20041;&#35813;&#26631;&#35782;&#31526;&#30340;&#29983;&#25104;&#31574;&#30053;:
	  </p><div class="itemizedlist"><ul type="disc"><li>
           AUTO - &#21487;&#20197;&#26159;identity column&#31867;&#22411;,&#25110;&#32773;sequence&#31867;&#22411;&#25110;&#32773;table&#31867;&#22411;,&#21462;&#20915;&#20110;&#19981;&#21516;&#30340;&#24213;&#23618;&#25968;&#25454;&#24211;. 
        </li><li>
           TABLE - &#20351;&#29992;&#34920;&#20445;&#23384;id&#20540;
        </li><li>
           IDENTITY - identity column
        </li><li>
           SEQUENCE - sequence 
        </li></ul></div><p>&#21644;EJB3&#35268;&#33539;&#30456;&#27604;,Hibernate&#25552;&#20379;&#20102;&#26356;&#22810;&#30340;id&#29983;&#25104;&#22120;.&#35814;&#24773;&#35831;&#26597;&#38405; <a href="#entity-hibspec">Hibernate Annotation Extensions</a> .</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#23637;&#31034;&#20102;&#20351;&#29992;SEQ_STORE&#37197;&#32622;&#30340;sequence&#29983;&#25104;&#22120;</p><pre class="programlisting">
@Id @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="SEQ_STORE")
public Integer getId() { ... }
         </pre><p>&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20351;&#29992;&#30340;&#26159;identity&#29983;&#25104;&#22120;</p><pre class="programlisting">
@Id @GeneratedValue(strategy=GenerationType.IDENTITY)
public Long getId() { ... }
         </pre><p><tt class="literal">AUTO</tt>&#29983;&#25104;&#22120;&#36866;&#29992;&#20110;&#21487;&#31227;&#26893;&#30340;&#24212;&#29992;(&#22312;&#22810;&#20010;DB&#38388;&#20999;&#25442;).
	  &#22810;&#20010;<tt class="literal">@Id</tt>&#21487;&#20197;&#20849;&#20139;&#21516;&#19968;&#20010;identifier&#29983;&#25104;&#22120;,&#21482;&#35201;&#25226;generator&#23646;&#24615;&#35774;&#25104;&#30456;&#21516;&#30340;&#20540;&#23601;&#21487;&#20197;&#20102;.
	  &#36890;&#36807;<tt class="literal">@SequenceGenerator</tt> &#21644;<tt class="literal">@TableGenerator</tt>,&#20320;&#21487;&#20197;&#37197;&#32622;&#19981;&#21516;&#30340;identifier&#29983;&#25104;&#22120;. 
	  &#27599;&#19968;&#20010;identifier&#29983;&#25104;&#22120;&#37117;&#26377;&#33258;&#24049;&#30340;&#36866;&#29992;&#33539;&#22260;,&#21487;&#20197;&#26159;&#24212;&#29992;&#32423;(application level)&#21644;&#31867;&#19968;&#32423;(class level). 
	  &#31867;&#19968;&#32423;&#30340;&#29983;&#25104;&#22120;&#22312;&#22806;&#37096;&#26159;&#19981;&#21487;&#35265;&#30340;,
	  &#32780;&#19988;&#31867;&#19968;&#32423;&#30340;&#29983;&#25104;&#22120;&#21487;&#20197;&#35206;&#30422;&#24212;&#29992;&#32423;&#30340;&#29983;&#25104;&#22120;.
	  &#24212;&#29992;&#32423;&#30340;&#29983;&#25104;&#22120;&#21017;&#23450;&#20041;&#22312;&#21253;&#19968;&#32423;(package level)(&#22914;<tt class="classname">package-info.java</tt>):</p><pre class="programlisting">
@javax.persistence.TableGenerator(
    name="EMP_GEN",
    table="GENERATOR_TABLE",
    pkColumnName = "key",
    valueColumnName = "hi"
    pkColumnValue="EMP",
    allocationSize=20
)
@javax.persistence.SequenceGenerator(
    name="SEQ_GEN",
    sequenceName="my_sequence"
)
package org.hibernate.test.metadata;
         </pre><p>
	  &#22914;&#26524;&#22312;<tt class="classname">org.hibernate.test.metadata</tt>&#21253;&#19979;&#38754;&#30340;
	  <tt class="classname">package-info.java</tt>&#25991;&#20214;&#29992;&#20110;&#21021;&#22987;&#21270;EJB&#37197;&#32622;,
	  &#37027;&#20040;&#35813;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340; <tt class="literal">EMP_GEN</tt>
	  &#21644;<tt class="literal">SEQ_GEN</tt>&#37117;&#26159;&#24212;&#29992;&#32423;&#30340;&#29983;&#25104;&#22120;. 
      <tt class="literal">EMP_GEN</tt>&#23450;&#20041;&#20102;&#19968;&#20010;&#20351;&#29992;hilo&#31639;&#27861;
	  (max_lo&#20026;20)&#30340;id&#29983;&#25104;&#22120;(&#35813;&#29983;&#25104;&#22120;&#23558;id&#30340;&#20449;&#24687;&#23384;&#22312;&#25968;&#25454;&#24211;&#30340;&#26576;&#20010;&#34920;&#20013;.).
	  id&#30340;hi&#20540;&#20445;&#23384;&#22312;<tt class="literal">GENERATOR_TABLE</tt>&#20013;.
      &#22312;&#35813;&#34920;&#20013; <tt class="literal">pkColumnName</tt>"key"&#31561;&#20215;&#20110;
	  <tt class="literal">pkColumnValue</tt> "<tt class="literal">EMP</tt>",
      &#32780;<tt class="literal">valueColumnName</tt> "<tt class="literal">hi</tt>"&#20013;&#23384;&#20648;&#30340;&#26159;&#19979;&#19968;&#20010;&#35201;&#20351;&#29992;&#30340;&#26368;&#22823;&#20540;.
	  </p><p><tt class="literal">SEQ_GEN</tt>&#21017;&#23450;&#20041;&#20102;&#19968;&#20010;sequence &#29983;&#25104;&#22120;,
	  &#20854;&#23545;&#24212;&#30340;sequence&#21517;&#20026; <tt class="literal">my_sequence</tt>.
	  &#27880;&#24847;&#30446;&#21069;Hibernate Annotations&#36824;&#19981;&#25903;&#25345;sequence &#29983;&#25104;&#22120;&#20013;&#30340;
	  <tt class="literal">initialValue</tt>&#21644; <tt class="literal">allocationSize</tt>&#21442;&#25968;.</p><p>&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#23450;&#20041;&#22312;&#31867;&#33539;&#22260;(class scope)&#30340;sequence&#29983;&#25104;&#22120;:</p><pre class="programlisting">
@Entity
@javax.persistence.SequenceGenerator(
    name="SEQ_STORE",
    sequenceName="my_sequence"
)
public class Store implements Serializable {
    private Long id;

    @Id @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="SEQ_STORE")
    public Long getId() { return id; }
}
         </pre><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;,Store&#31867;&#20351;&#29992;&#21517;&#20026;my_sequence&#30340;sequence,&#24182;&#19988;SEQ_STORE &#29983;&#25104;&#22120;&#23545;&#20110;&#20854;&#20182;&#31867;&#26159;&#19981;&#21487;&#35265;&#30340;.
      &#27880;&#24847;&#22312;org.hibernate.test.metadata.id&#21253;&#19979;&#30340;&#27979;&#35797;&#20195;&#30721;&#26377;&#26356;&#22810;&#28436;&#31034;Hibernate Annotations&#29992;&#27861;&#30340;&#20363;&#23376;..</p><p>&#19979;&#38754;&#26159;&#23450;&#20041;&#32452;&#21512;&#20027;&#38190;&#30340;&#20960;&#31181;&#35821;&#27861;:</p><div class="itemizedlist"><ul type="disc"><li>
           &#23558;&#32452;&#20214;&#31867;&#27880;&#35299;&#20026;@Embeddable,&#24182;&#23558;&#32452;&#20214;&#30340;&#23646;&#24615;&#27880;&#35299;&#20026;@Id
        </li><li>
           &#23558;&#32452;&#20214;&#30340;&#23646;&#24615;&#27880;&#35299;&#20026;@EmbeddedId
        </li><li>
           &#23558;&#31867;&#27880;&#35299;&#20026;@IdClass,&#24182;&#23558;&#35813;&#23454;&#20307;&#20013;&#25152;&#26377;&#23646;&#20110;&#20027;&#38190;&#30340;&#23646;&#24615;&#37117;&#27880;&#35299;&#20026;@Id 
        </li></ul></div><p>&#23545;&#20110;EJB2&#30340;&#24320;&#21457;&#20154;&#21592;&#26469;&#35828; <tt class="literal">@IdClass</tt>&#26159;&#24456;&#24120;&#35265;&#30340;,
	  &#20294;&#26159;&#23545;&#20110;Hibernate&#30340;&#29992;&#25143;&#26469;&#35828;&#23601;&#26159;&#19968;&#20010;&#23853;&#26032;&#30340;&#29992;&#27861;.
	  &#32452;&#21512;&#20027;&#38190;&#31867;&#23545;&#24212;&#20102;&#19968;&#20010;&#23454;&#20307;&#31867;&#20013;&#30340;&#22810;&#20010;&#23383;&#27573;&#25110;&#23646;&#24615;,
	  &#32780;&#19988;&#20027;&#38190;&#31867;&#20013;&#29992;&#20110;&#23450;&#20041;&#20027;&#38190;&#30340;&#23383;&#27573;&#25110;&#23646;&#24615;&#21644;
	  &#23454;&#20307;&#31867;&#20013;&#23545;&#24212;&#30340;&#23383;&#27573;&#25110;&#23646;&#24615;&#22312;&#31867;&#22411;&#19978;&#24517;&#39035;&#19968;&#33268;.&#19979;&#38754;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;:</p><pre class="programlisting">@Entity
<span class="bold"><b>@IdClass(FootballerPk.class)</b></span>
public class Footballer {
    //part of the id key
    <span class="bold"><b>@Id</b></span> public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    //part of the id key
    <span class="bold"><b>@Id</b></span> public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    public String getClub() {
        return club;
    }

    public void setClub(String club) {
        this.club = club;
    }

    //appropriate equals() and hashCode() implementation
}

@Embeddable
public class FootballerPk implements Serializable {
    //same name and type as in Footballer
    public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    //same name and type as in Footballer
    public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

    //appropriate equals() and hashCode() implementation
}
</pre><p>&#22914;&#19978;, <tt class="literal">@IdClass</tt>&#25351;&#21521;&#23545;&#24212;&#30340;&#20027;&#38190;&#31867;.</p><p>Hibernate&#25903;&#25345;&#22312;&#32452;&#21512;&#26631;&#35782;&#31526;&#20013;&#23450;&#20041;&#20851;&#32852;(&#23601;&#20687;&#20351;&#29992;&#26222;&#36890;&#30340;&#27880;&#35299;&#19968;&#26679;),&#32780;EJB3&#35268;&#33539;&#24182;&#19981;&#25903;&#25345;&#27492;&#31867;&#29992;&#27861;.
	  </p><pre class="programlisting">@Entity
@AssociationOverride( name="id.channel", joinColumns = @JoinColumn(name="chan_id") )
public class TvMagazin {
    @EmbeddedId public TvMagazinPk id;
    @Temporal(TemporalType.TIME) Date time;
}

@Embeddable
public class TvMagazinPk implements Serializable {
    @ManyToOne
    public Channel channel;
    public String name;
    @ManyToOne
    public Presenter presenter;
}
</pre></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e936"></a>2.2.4.&nbsp;&#26144;&#23556;&#32487;&#25215;&#20851;&#31995;</h3></div></div><div></div></div><p>EJB3&#25903;&#25345;&#19977;&#31181;&#31867;&#22411;&#30340;&#32487;&#25215;&#26144;&#23556;:</p><div class="itemizedlist"><ul type="disc"><li>
            &#27599;&#20010;&#31867;&#19968;&#24352;&#34920;(Table per class)&#31574;&#30053;: &#22312;Hibernate&#20013;&#23545;&#24212;&lt;union-class&gt;&#20803;&#32032;:
        </li><li>
		   &#27599;&#20010;&#31867;&#23618;&#27425;&#32467;&#26500;&#19968;&#24352;&#34920;(Single table per class hierarchy)&#31574;&#30053;:&#22312;Hibernate&#20013;&#23545;&#24212;&lt;subclass&gt;&#20803;&#32032;
        </li><li>
		   &#36830;&#25509;&#30340;&#23376;&#31867;(Joined subclasses)&#31574;&#30053;:&#22312;Hibernate&#20013;&#23545;&#24212; &lt;joined-subclass&gt;&#20803;&#32032;
        </li></ul></div><p>
      &#20320;&#21487;&#20197;&#29992; <tt class="literal">@Inheritance</tt>&#27880;&#35299;&#26469;&#23450;&#20041;&#25152;&#36873;&#25321;&#30340;&#31574;&#30053;.
      &#36825;&#20010;&#27880;&#35299;&#38656;&#35201;&#22312;&#27599;&#20010;&#31867;&#23618;&#27425;&#32467;&#26500;(class hierarchy) &#26368;&#39030;&#31471;&#30340;&#23454;&#20307;&#31867;&#19978;&#20351;&#29992;.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#30446;&#21069;&#36824;&#19981;&#25903;&#25345;&#22312;&#25509;&#21475;&#19978;&#36827;&#34892;&#27880;&#35299;.</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e956"></a>2.2.4.1.&nbsp;&#27599;&#20010;&#31867;&#19968;&#24352;&#34920;</h4></div></div><div></div></div><p>
		&#36825;&#31181;&#31574;&#30053;&#26377;&#24456;&#22810;&#32570;&#28857;(&#20363;&#22914;:&#22810;&#24577;&#26597;&#35810;&#21644;&#20851;&#32852;),EJB3&#35268;&#33539;, Hibernate&#21442;&#32771;&#25163;&#20876;, 
		Hibernate in Action,&#20197;&#21450;&#20854;&#20182;&#35768;&#22810;&#22320;&#26041;&#37117;&#23545;&#27492;&#36827;&#34892;&#20102;&#25551;&#36848;&#21644;&#35299;&#37322;.
		Hibernate&#20351;&#29992;<tt class="literal">SQL UNION</tt>&#26597;&#35810;&#26469;&#23454;&#29616;&#36825;&#31181;&#31574;&#30053;.
		&#36890;&#24120;&#20351;&#29992;&#22330;&#21512;&#26159;&#22312;&#19968;&#20010;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#30340;&#39030;&#31471;:</p><pre class="programlisting">
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public class Flight implements Serializable {
            </pre><p>
		&#36825;&#31181;&#31574;&#30053;&#25903;&#25345;&#21452;&#21521;&#30340;&#19968;&#23545;&#22810;&#20851;&#32852;.
		&#36825;&#37324;&#19981;&#25903;&#25345;<tt class="literal">IDENTITY</tt>&#29983;&#25104;&#22120;&#31574;&#30053;,&#22240;&#20026;id&#24517;&#39035;&#22312;&#22810;&#20010;&#34920;&#38388;&#20849;&#20139;.
		&#24403;&#28982;,&#19968;&#26086;&#20351;&#29992;&#36825;&#31181;&#31574;&#30053;&#23601;&#24847;&#21619;&#30528;&#20320;&#19981;&#33021;&#20351;&#29992;
		<tt class="literal">AUTO </tt>&#29983;&#25104;&#22120;&#21644;<tt class="literal">IDENTITY</tt>&#29983;&#25104;&#22120;.
		</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e977"></a>2.2.4.2.&nbsp;&#27599;&#20010;&#31867;&#23618;&#27425;&#32467;&#26500;&#19968;&#24352;&#34920;</h4></div></div><div></div></div><p>&#25972;&#20010;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#20013;&#30340;&#29238;&#31867;&#21644;&#23376;&#31867;&#30340;&#25152;&#26377;&#23646;&#24615;&#37117;&#26144;&#23556;&#21040;&#21516;&#19968;&#20010;&#34920;&#20013;,
		&#20182;&#20204;&#30340;&#23454;&#20363;&#36890;&#36807;&#19968;&#20010;&#36776;&#21035;&#31526;(discriminator)&#21015;&#26469;&#21306;&#20998;.:</p><pre class="programlisting">
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(
    name="planetype",
    discriminatorType=DiscriminatorType.STRING
)
@DiscriminatorValue("Plane")
public class Plane { ... }

@Entity
@DiscriminatorValue("A320")
public class A320 extends Plane { ... }
            </pre><p>&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="classname">Plane</tt>&#26159;&#29238;&#31867;,&#22312;&#36825;&#20010;&#31867;&#37324;&#38754;&#23558;&#32487;&#25215;&#31574;&#30053;&#23450;&#20041;&#20026;
		<tt class="literal">InheritanceType.SINGLE_TABLE</tt>,&#24182;&#36890;&#36807;
		<tt class="literal">@DiscriminatorColumn</tt>&#27880;&#35299;&#23450;&#20041;&#20102;&#36776;&#21035;&#31526;&#21015;(&#36824;&#21487;&#20197;&#23450;&#20041;&#36776;&#21035;&#31526;&#30340;&#31867;&#22411;).
		&#26368;&#21518;,&#23545;&#20110;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#20013;&#30340;&#27599;&#20010;&#31867;,<tt class="literal">@DiscriminatorValue</tt>&#27880;&#35299;&#25351;&#23450;&#20102;&#29992;&#26469;&#36776;&#21035;&#35813;&#31867;&#30340;&#20540;.
		&#36776;&#21035;&#31526;&#21015;&#30340;&#21517;&#23383;&#40664;&#35748;&#20026; <tt class="literal">DTYPE</tt>,&#20854;&#40664;&#35748;&#20540;&#20026;&#23454;&#20307;&#21517;(&#22312;<tt class="literal">@Entity.name</tt>&#20013;&#23450;&#20041;)&#65292;&#20854;&#31867;&#22411;
		&#20026;DiscriminatorType.STRING.
		 <tt class="classname">A320</tt>&#26159;&#23376;&#31867;,&#22914;&#26524;&#19981;&#24819;&#20351;&#29992;&#40664;&#35748;&#30340;&#36776;&#21035;&#31526;,&#21482;&#38656;&#35201;&#25351;&#23450;&#30456;&#24212;&#30340;&#20540;&#21363;&#21487;.
		&#20854;&#20182;&#30340;&#22914;&#32487;&#25215;&#31574;&#30053;,&#36776;&#21035;&#26631;&#24535;&#23383;&#27573;&#30340;&#31867;&#22411;&#37117;&#26159;&#33258;&#21160;&#35774;&#23450;&#30340;.</p><p><tt class="literal">@Inheritance</tt> &#21644;
        <tt class="literal">@DiscriminatorColumn</tt> &#27880;&#35299;&#21482;&#33021;&#29992;&#20110;&#23454;&#20307;&#23618;&#27425;&#32467;&#26500;&#30340;&#39030;&#31471;.</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1014"></a>2.2.4.3.&nbsp;&#36830;&#25509;&#30340;&#23376;&#31867;</h4></div></div><div></div></div><p>&#24403;&#27599;&#20010;&#23376;&#31867;&#26144;&#23556;&#21040;&#19968;&#20010;&#34920;&#26102;, <tt class="literal"> @PrimaryKeyJoinColumn</tt>
		&#21644;<tt class="literal">@PrimaryKeyJoinColumns</tt>
		&#27880;&#35299;&#23450;&#20041;&#20102;&#27599;&#20010;&#23376;&#31867;&#34920;&#20851;&#32852;&#21040;&#29238;&#31867;&#34920;&#30340;&#20027;&#38190;:</p><pre class="programlisting">
@Entity
@Inheritance(strategy=InheritanceType.JOINED)
public class Boat implements Serializable { ... }

@Entity
public class Ferry extends Boat { ... }

@Entity
@PrimaryKeyJoinColumn(name="BOAT_ID")
public class AmericaCupClass  extends Boat { ... }
            </pre><p>&#20197;&#19978;&#25152;&#26377;&#23454;&#20307;&#37117;&#20351;&#29992;&#20102;<tt class="literal">JOINED</tt>&#31574;&#30053;, 
		<tt class="literal">Ferry</tt>&#34920;&#21644;<tt class="literal">Boat</tt>&#34920;&#20351;&#29992;&#21516;&#21517;&#30340;&#20027;&#38190;.
		&#32780;<tt class="literal">AmericaCupClass</tt>&#34920;&#21644;<tt class="literal">Boat</tt>&#34920;&#20351;&#29992;&#20102;&#26465;&#20214;
		<tt class="code">Boat.id = AmericaCupClass.BOAT_ID</tt>&#36827;&#34892;&#20851;&#32852;.
		</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1047"></a>2.2.4.4.&nbsp;&#20174;&#29238;&#31867;&#32487;&#25215;&#30340;&#23646;&#24615;</h4></div></div><div></div></div><p>&#26377;&#26102;&#20505;&#36890;&#36807;&#19968;&#20010;(&#25216;&#26415;&#19978;&#25110;&#19994;&#21153;&#19978;)&#29238;&#31867;&#20849;&#20139;&#19968;&#20123;&#20844;&#20849;&#23646;&#24615;&#26159;&#24456;&#26377;&#29992;&#30340;,
		&#21516;&#26102;&#36824;&#19981;&#29992;&#23558;&#35813;&#29238;&#31867;&#20316;&#20026;&#26144;&#23556;&#30340;&#23454;&#20307;(&#20063;&#23601;&#26159;&#35813;&#23454;&#20307;&#27809;&#26377;&#23545;&#24212;&#30340;&#34920;).
		&#36825;&#20010;&#26102;&#20505;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="literal">@MappedSuperclass</tt>&#27880;&#35299;&#26469;&#36827;&#34892;&#26144;&#23556;.</p><pre class="programlisting">@MappedSuperclass
public class BaseEntity {
    @Basic
    @Temporal(TemporalType.TIMESTAMP)
    public Date getLastUpdate() { ... }
    public String getLastUpdater() { ... }
    ...
}

@Entity class Order extends BaseEntity {
    @Id public Integer getId() { ... }
    ...
}</pre><p>&#22312;&#25968;&#25454;&#24211;&#20013;,&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;&#30340;&#32487;&#25215;&#30340;&#23618;&#27425;&#32467;&#26500;&#26368;&#32456;&#20197;<tt class="literal">Order</tt>&#34920;&#30340;&#24418;&#24335;&#20986;&#29616;,
		&#35813;&#34920;&#25317;&#26377;<tt class="literal">id</tt>, <tt class="literal">lastUpdate</tt> &#21644;
		<tt class="literal">lastUpdater</tt>&#19977;&#20010;&#21015;.&#29238;&#31867;&#20013;&#30340;&#23646;&#24615;&#26144;&#23556;&#23558;&#22797;&#21046;&#21040;&#20854;&#23376;&#31867;&#23454;&#20307;.
		&#27880;&#24847;&#36825;&#31181;&#24773;&#20917;&#19979;&#30340;&#29238;&#31867;&#19981;&#20877;&#22788;&#22312;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#30340;&#39030;&#31471;.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#27880;&#24847;,&#27809;&#26377;&#27880;&#35299;&#20026;<tt class="literal">@MappedSuperclass</tt>&#30340;&#29238;&#31867;&#20013;&#30340;&#23646;&#24615;&#23558;&#34987;&#24573;&#30053;.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#38500;&#38750;&#26174;&#24335;&#20351;&#29992;Hibernate annotation&#20013;&#30340;<tt class="literal">@AccessType</tt>&#27880;&#35299;,
		  &#21542;&#21017;&#23558;&#20174;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#30340;&#26681;&#23454;&#20307;&#20013;&#32487;&#25215;&#35775;&#38382;&#31867;&#22411;(&#21253;&#25324;&#23383;&#27573;&#25110;&#26041;&#27861;)</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#36825;&#23545;&#20110;<tt class="literal">@Embeddable</tt>&#23545;&#35937;&#30340;&#29238;&#31867;&#20013;&#30340;&#23646;&#24615;&#25345;&#20037;&#21270;&#21516;&#26679;&#26377;&#25928;.
		  &#21482;&#38656;&#35201;&#20351;&#29992;<tt class="literal">@MappedSuperclass</tt>&#27880;&#35299;&#21363;&#21487;
		  (&#34429;&#28982;&#36825;&#31181;&#26041;&#24335;&#19981;&#20250;&#32435;&#20837;EJB3&#26631;&#20934;)</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#21487;&#20197;&#23558;&#22788;&#22312;&#22312;&#26144;&#23556;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#30340;&#20013;&#38388;&#20301;&#32622;&#30340;&#31867;&#27880;&#35299;&#20026;<tt class="literal">@MappedSuperclass</tt>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#22312;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#20013;&#20219;&#20309;&#27809;&#26377;&#34987;&#27880;&#35299;&#20026;<tt class="literal">@MappedSuperclass</tt>
		  &#25110;<tt class="literal">@Entity</tt>&#30340;&#31867;&#37117;&#23558;&#34987;&#24573;&#30053;.</p></div><p>
		&#20320;&#21487;&#20197;&#36890;&#36807; <tt class="literal">@AttributeOverride</tt>&#27880;&#35299;&#35206;&#30422;&#23454;&#20307;&#29238;&#31867;&#20013;&#30340;&#23450;&#20041;&#30340;&#21015;.
		&#36825;&#20010;&#27880;&#35299;&#21482;&#33021;&#22312;&#32487;&#25215;&#23618;&#27425;&#32467;&#26500;&#30340;&#39030;&#31471;&#20351;&#29992;.</p><pre class="programlisting">@MappedSuperclass
public class FlyingObject implements Serializable {

    public int getAltitude() {
        return altitude;
    }

    @Transient
    public int getMetricAltitude() {
        return metricAltitude;
    }

    @ManyToOne
    public PropulsionType getPropulsion() {
        return metricAltitude;
    }
    ...
}

@Entity
@AttributeOverride( name="altitude", column = @Column(name="fld_altitude") )
@AssociationOverride( name="propulsion", joinColumns = @JoinColumn(name="fld_propulsion_fk") )
public class Plane extends FlyingObject {
    ...
}</pre><p>&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">altitude</tt>&#23646;&#24615;&#30340;&#20540;&#26368;&#32456;&#23558;&#25345;&#20037;&#21270;&#21040;<tt class="literal">Plane</tt>
		&#34920;&#30340;<tt class="literal">fld_altitude</tt>&#21015;.&#32780;&#21517;&#20026;propulsion&#30340;&#20851;&#32852;&#21017;&#20445;&#23384;&#22312;<tt class="literal">fld_propulsion_fk</tt>&#22806;&#38388;&#21015;.</p><p>&#20320;&#21487;&#20197;&#20026;<tt class="literal">@Entity</tt>&#21644;<tt class="literal">@MappedSuperclass</tt>&#27880;&#35299;&#30340;&#31867;
		&#20197;&#21450;&#37027;&#20123;&#23545;&#35937;&#20026;<tt class="literal">@Embeddable</tt>&#30340;&#23646;&#24615;&#23450;&#20041;
		<tt class="literal">@AttributeOverride</tt>&#21644;<tt class="literal">@AssociationOverride</tt>.</p></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="entity-mapping-association"></a>2.2.5.&nbsp;&#26144;&#23556;&#23454;&#20307;Bean&#30340;&#20851;&#32852;&#20851;&#31995;</h3></div></div><div></div></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1148"></a>2.2.5.1.&nbsp;&#19968;&#23545;&#19968;(One-to-one)</h4></div></div><div></div></div><p>&#20351;&#29992;<tt class="literal">@OneToOne</tt>&#27880;&#35299;&#21487;&#20197;&#24314;&#31435;&#23454;&#20307;bean&#20043;&#38388;&#30340;&#19968;&#23545;&#19968;&#30340;&#20851;&#32852;.
		&#19968;&#23545;&#19968;&#20851;&#32852;&#26377;&#19977;&#31181;&#24773;&#20917;&#65306;
		&#19968;&#26159;&#20851;&#32852;&#30340;&#23454;&#20307;&#37117;&#20849;&#20139;&#21516;&#26679;&#30340;&#20027;&#38190;,
		&#20108;&#26159;&#20854;&#20013;&#19968;&#20010;&#23454;&#20307;&#36890;&#36807;&#22806;&#38190;&#20851;&#32852;&#21040;&#21478;&#19968;&#20010;&#23454;&#20307;&#30340;&#20027;&#38190;
		(&#27880;&#24847;&#35201;&#27169;&#25311;&#19968;&#23545;&#19968;&#20851;&#32852;&#24517;&#39035;&#22312;&#22806;&#38190;&#21015;&#19978;&#28155;&#21152;&#21807;&#19968;&#32422;&#26463;).
		&#19977;&#26159;&#36890;&#36807;&#20851;&#32852;&#34920;&#26469;&#20445;&#23384;&#20004;&#20010;&#23454;&#20307;&#20043;&#38388;&#30340;&#36830;&#25509;&#20851;&#31995;
		(&#27880;&#24847;&#35201;&#27169;&#25311;&#19968;&#23545;&#19968;&#20851;&#32852;&#24517;&#39035;&#22312;&#27599;&#19968;&#20010;&#22806;&#38190;&#19978;&#28155;&#21152;&#21807;&#19968;&#32422;&#26463;).</p><p>&#39318;&#20808;,&#25105;&#20204;&#36890;&#36807;&#20849;&#20139;&#20027;&#38190;&#26469;&#36827;&#34892;&#19968;&#23545;&#19968;&#20851;&#32852;&#26144;&#23556;:</p><pre class="programlisting">
@Entity
public class Body {
    @Id
    public Long getId() { return id; }

    @OneToOne(cascade = CascadeType.ALL)
    @PrimaryKeyJoinColumn
    public Heart getHeart() {
        return heart;
    }
    ...
}
            </pre><pre class="programlisting">
@Entity
public class Heart {
    @Id
    public Long getId() { ...}
}
            </pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#36890;&#36807;&#20351;&#29992;&#27880;&#35299;<tt class="literal">@PrimaryKeyJoinColumn</tt>&#23450;&#20041;&#20102;&#19968;&#23545;&#19968;&#20851;&#32852;.</p><p>&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#20351;&#29992;&#22806;&#38190;&#21015;&#36827;&#34892;&#23454;&#20307;&#30340;&#20851;&#32852;.</p><pre class="programlisting">
@Entity
public class Customer implements Serializable {
    @OneToOne(cascade = CascadeType.ALL)
    <span class="bold"><b>@JoinColumn(name="passport_fk")</b></span>
    public Passport getPassport() {
        ...
    }

@Entity
public class Passport implements Serializable {
    @OneToOne(<span class="bold"><b>mappedBy = "passport"</b></span>)
    public Customer getOwner() {
    ...
}
            </pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="classname">Customer</tt> &#36890;&#36807;<tt class="literal">Customer</tt>
		&#34920;&#20013;&#21517;&#20026;&#30340;<tt class="literal">passport_fk</tt> &#22806;&#38190;&#21015;&#21644; <tt class="classname">Passport</tt>&#20851;&#32852;.
		<tt class="literal">@JoinColumn</tt>&#27880;&#35299;&#23450;&#20041;&#20102;&#32852;&#25509;&#21015;(join column).
		&#35813;&#27880;&#35299;&#21644;<tt class="literal">@Column</tt>&#27880;&#35299;&#26377;&#28857;&#31867;&#20284;,
		&#20294;&#26159;&#22810;&#20102;&#19968;&#20010;&#21517;&#20026;<tt class="literal">referencedColumnName</tt>&#30340;&#21442;&#25968;.
		&#35813;&#21442;&#25968;&#23450;&#20041;&#20102;&#25152;&#20851;&#32852;&#30446;&#26631;&#23454;&#20307;&#20013;&#30340;&#32852;&#25509;&#21015;.
		&#27880;&#24847;,&#24403;<tt class="literal"><tt class="literal">referencedColumnName</tt></tt>&#20851;&#32852;&#21040;&#38750;&#20027;&#38190;&#21015;&#30340;&#26102;&#20505;,
		&#20851;&#32852;&#30340;&#30446;&#26631;&#31867;&#24517;&#39035;&#23454;&#29616;<tt class="classname">Serializable</tt>,
		&#36824;&#35201;&#27880;&#24847;&#30340;&#26159;&#25152;&#26144;&#23556;&#30340;&#23646;&#24615;&#23545;&#24212;&#21333;&#20010;&#21015;(&#21542;&#21017;&#26144;&#23556;&#26080;&#25928;).
		</p><p>&#19968;&#23545;&#19968;&#20851;&#32852;&#21487;&#33021;&#26159;&#21452;&#21521;&#30340;.&#22312;&#21452;&#21521;&#20851;&#32852;&#20013;,
		&#26377;&#19988;&#20165;&#26377;&#19968;&#31471;&#26159;&#20316;&#20026;&#20027;&#20307;(owner)&#31471;&#23384;&#22312;&#30340;&#65306;&#20027;&#20307;&#31471;&#36127;&#36131;&#32500;&#25252;&#32852;&#25509;&#21015;(&#21363;&#26356;&#26032;).
		&#23545;&#20110;&#19981;&#38656;&#35201;&#32500;&#25252;&#36825;&#31181;&#20851;&#31995;&#30340;&#20174;&#34920;&#21017;&#36890;&#36807;mappedBy&#23646;&#24615;&#36827;&#34892;&#22768;&#26126;.
		<tt class="literal">mappedBy</tt>&#30340;&#20540;&#25351;&#21521;&#20027;&#20307;&#30340;&#20851;&#32852;&#23646;&#24615;.
		&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">mappedBy</tt>&#30340;&#20540;&#20026; <tt class="literal">passport</tt>.
		&#26368;&#21518;,&#19981;&#24517;&#20063;&#19981;&#33021;&#20877;&#22312;&#34987;&#20851;&#32852;&#31471;(owned side)&#23450;&#20041;&#32852;&#25509;&#21015;&#20102;,&#22240;&#20026;&#24050;&#32463;&#22312;&#20027;&#20307;&#31471;&#36827;&#34892;&#20102;&#22768;&#26126;.</p><p>&#22914;&#26524;&#22312;&#20027;&#20307;&#27809;&#26377;&#22768;&#26126;<tt class="literal">@JoinColumn</tt>,&#31995;&#32479;&#33258;&#21160;&#36827;&#34892;&#22788;&#29702;&#65306;
		&#22312;&#20027;&#34920;(owner table)&#20013;&#23558;&#21019;&#24314;&#32852;&#25509;&#21015;,
		&#21015;&#21517;&#20026;&#65306;&#20027;&#20307;&#30340;&#20851;&#32852;&#23646;&#24615;&#21517;&#65291;&#19979;&#21010;&#32447;&#65291;&#34987;&#20851;&#32852;&#31471;&#30340;&#20027;&#38190;&#21015;&#21517;.
		&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;&#26159;<tt class="literal">passport_id</tt>,
		&#22240;&#20026;<tt class="literal">Customer</tt>&#20013;&#20851;&#32852;&#23646;&#24615;&#21517;&#20026;<tt class="literal">passport</tt>,
		<tt class="literal">Passport</tt>&#30340;&#20027;&#38190;&#26159;<tt class="literal">id</tt>.</p><p>The third possibility (using an association table) is very
        exotic.</p><p>&#31532;&#19977;&#31181;&#26041;&#24335;&#20063;&#35768;&#26159;&#26368;&#21478;&#31867;&#30340;(&#36890;&#36807;&#20851;&#32852;&#34920;).</p><pre class="programlisting">
@Entity
public class Customer implements Serializable {
    @OneToOne(cascade = CascadeType.ALL)
    <span class="bold"><b>@JoinTable(name = "CustomerPassports",
        joinColumns = @JoinColumn(name="customer_fk"),
        inverseJoinColumns = @JoinColumn(name="passport_fk")</b></span>
    )
    public Passport getPassport() {
        ...
    }

@Entity
public class Passport implements Serializable {
    @OneToOne(<span class="bold"><b>mappedBy = "passport"</b></span>)
    public Customer getOwner() {
    ...
}
            </pre><p><tt class="classname">Customer</tt>&#36890;&#36807;&#21517;&#20026; <tt class="literal">CustomerPassports</tt>&#30340;&#20851;&#32852;&#34920;&#21644;
        <tt class="classname">Passport</tt>&#20851;&#32852;; &#35813;&#20851;&#32852;&#34920;&#25317;&#26377;&#21517;&#20026;<tt class="literal">passport_fk</tt>&#30340;&#22806;&#38190;&#21015;,&#35813;
		&#22806;&#38190;&#25351;&#21521;<tt class="literal">Passport</tt>&#34920;,&#35813;&#20449;&#24687;&#23450;&#20041;&#20026;<tt class="literal">inverseJoinColumn</tt>&#30340;&#23646;&#24615;&#20540;,
		&#32780;<tt class="literal">customer_fk</tt>&#22806;&#38190;&#21015;&#25351;&#21521;<tt class="literal">Customer</tt>&#34920;,
		&#35813;&#20449;&#24687;&#23450;&#20041;&#20026; <tt class="literal">joinColumns</tt>&#30340;&#23646;&#24615;&#20540;.</p><p>&#36825;&#31181;&#20851;&#32852;&#21487;&#33021;&#26159;&#21452;&#21521;&#30340;.&#22312;&#21452;&#21521;&#20851;&#32852;&#20013;,
		&#26377;&#19988;&#20165;&#26377;&#19968;&#31471;&#26159;&#20316;&#20026;&#20027;&#20307;&#31471;&#23384;&#22312;&#30340;&#65306;&#20027;&#20307;&#31471;&#36127;&#36131;&#32500;&#25252;&#32852;&#25509;&#21015;(&#21363;&#26356;&#26032;).
		&#23545;&#20110;&#19981;&#38656;&#35201;&#32500;&#25252;&#36825;&#31181;&#20851;&#31995;&#30340;&#20174;&#34920;&#21017;&#36890;&#36807;mappedBy&#23646;&#24615;&#36827;&#34892;&#22768;&#26126;.
		<tt class="literal">mappedBy</tt>&#30340;&#20540;&#25351;&#21521;&#20027;&#20307;&#30340;&#20851;&#32852;&#23646;&#24615;.
		&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">mappedBy</tt>&#30340;&#20540;&#20026; <tt class="literal">passport</tt>.
		&#26368;&#21518;,&#19981;&#24517;&#20063;&#19981;&#33021;&#20877;&#22312;&#34987;&#20851;&#32852;&#31471;(owned side)&#23450;&#20041;&#32852;&#25509;&#21015;&#20102;,&#22240;&#20026;&#24050;&#32463;&#22312;&#20027;&#20307;&#31471;&#36827;&#34892;&#20102;&#22768;&#26126;.</p><p>&#20320;&#24517;&#39035;&#26126;&#30830;&#23450;&#20041;&#20851;&#32852;&#34920;&#21517;&#21644;&#20851;&#32852;&#21015;&#21517;.</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1291"></a>2.2.5.2.&nbsp;&#22810;&#23545;&#19968;(Many-to-one)</h4></div></div><div></div></div><p>&#22312;&#23454;&#20307;&#23646;&#24615;&#19968;&#32423;&#20351;&#29992;<tt class="literal">@ManyToOne</tt>&#27880;&#35299;&#26469;&#23450;&#20041;&#22810;&#23545;&#19968;&#20851;&#32852;:</p><pre class="programlisting">
@Entity()
public class Flight implements Serializable {
    <span class="bold"><b>@ManyToOne</b></span>( cascade = {CascadeType.PERSIST, CascadeType.MERGE} )
    @JoinColumn(name="COMP_ID")
    public Company getCompany() {
        return company;
    }
    ...
}
            </pre><p>&#20854;&#20013;<tt class="literal">@JoinColumn</tt>&#26159;&#21487;&#36873;&#30340;,&#20851;&#32852;&#23383;&#27573;&#40664;&#35748;&#20540;&#21644;&#19968;&#23545;&#19968;
		(one to one)&#20851;&#32852;&#30340;&#24773;&#20917;&#30456;&#20284;,
		&#21015;&#21517;&#20026;&#65306;&#20027;&#20307;&#30340;&#20851;&#32852;&#23646;&#24615;&#21517;&#65291;&#19979;&#21010;&#32447;&#65291;&#34987;&#20851;&#32852;&#31471;&#30340;&#20027;&#38190;&#21015;&#21517;.
		&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#26159;<tt class="literal">company_id</tt>,
		&#22240;&#20026;&#20851;&#32852;&#30340;&#23646;&#24615;&#26159;<tt class="literal">company</tt>,
		<tt class="literal">Company</tt>&#30340;&#20027;&#38190;&#26159;<tt class="literal">id</tt>.</p><p><tt class="literal">@ManyToOne</tt>&#27880;&#35299;&#26377;&#19968;&#20010;&#21517;&#20026;<tt class="literal">targetEntity</tt>&#30340;&#21442;&#25968;,
		&#35813;&#21442;&#25968;&#23450;&#20041;&#20102;&#30446;&#26631;&#23454;&#20307;&#21517;.&#36890;&#24120;&#19981;&#38656;&#35201;&#23450;&#20041;&#35813;&#21442;&#25968;,
		&#22240;&#20026;&#22312;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#40664;&#35748;&#20540;(&#34920;&#31034;&#20851;&#32852;&#20851;&#31995;&#30340;&#23646;&#24615;&#31867;&#22411;)&#23601;&#21487;&#20197;&#24456;&#22909;&#30340;&#28385;&#36275;&#35201;&#27714;&#20102;.
		&#19981;&#36807;&#19979;&#38754;&#36825;&#31181;&#24773;&#20917;&#19979;&#36825;&#20010;&#21442;&#25968;&#23601;&#26174;&#24471;&#26377;&#24847;&#20041;&#20102;&#65306;&#20351;&#29992;&#25509;&#21475;&#20316;&#20026;&#36820;&#22238;&#20540;&#32780;&#19981;&#26159;&#24120;&#35265;&#30340;&#23454;&#20307;.</p><pre class="programlisting">
@Entity()
public class Flight implements Serializable {
    @ManyToOne( cascade = {CascadeType.PERSIST, CascadeType.MERGE}, <span class="bold"><b>targetEntity=CompanyImpl.class</b></span> )
    @JoinColumn(name="COMP_ID")
    public Company getCompany() {
        return company;
    }
    ...
}

public interface Company {
    ...
            </pre><p>&#23545;&#20110;&#22810;&#23545;&#19968;&#20063;&#21487;&#20197;&#36890;&#36807;&#20851;&#32852;&#34920;&#30340;&#26041;&#24335;&#26469;&#26144;&#23556;&#12290;
		&#36890;&#36807;<tt class="literal">@JoinTable</tt>&#27880;&#35299;&#21487;&#23450;&#20041;&#20851;&#32852;&#34920;&#65292;
		&#35813;&#20851;&#32852;&#34920;&#21253;&#21547;&#20102;&#25351;&#22238;&#23454;&#20307;&#34920;&#30340;&#22806;&#38190;(&#36890;&#36807;<tt class="literal">@JoinTable.joinColumns</tt>)
		&#20197;&#21450;&#25351;&#21521;&#30446;&#26631;&#23454;&#20307;&#34920;&#30340;&#22806;&#38190;(&#36890;&#36807;<tt class="literal">@JoinTable.inverseJoinColumns</tt>).</p><pre class="programlisting">
@Entity()
public class Flight implements Serializable {
    @ManyToOne( cascade = {CascadeType.PERSIST, CascadeType.MERGE} )
    <span class="bold"><b>@JoinTable(name="Flight_Company",
        joinColumns = @JoinColumn(name="FLIGHT_ID"),
        inverseJoinColumns = @JoinColumn(name="COMP_ID")
    )</b></span>
    public Company getCompany() {
        return company;
    }
    ...
}
            </pre></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="entity-mapping-association-collections"></a>2.2.5.3.&nbsp;&#38598;&#21512;&#31867;&#22411;</h4></div></div><div></div></div><div class="sect4" lang="zh_cn"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1352"></a>2.2.5.3.1.&nbsp;&#27010;&#20917;</h5></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#23545; <tt class="classname">Collection </tt>,<tt class="literal">List</tt>
		  (&#25351;&#26377;&#24207;&#21015;&#34920;, &#32780;&#19981;&#26159;&#32034;&#24341;&#21015;&#34920;),
		  <tt class="literal">Map</tt>&#21644;<tt class="classname">Set</tt>&#36825;&#20960;&#31181;&#31867;&#22411;&#36827;&#34892;&#26144;&#23556;.
		  EJB3&#35268;&#33539;&#23450;&#20041;&#20102;&#24590;&#20040;&#26679;&#20351;&#29992;<tt class="literal">@javax.persistence.OrderBy</tt>
		  &#27880;&#35299;&#26469;&#23545;&#26377;&#24207;&#21015;&#34920;&#36827;&#34892;&#26144;&#23556;&#65306;
		  &#35813;&#27880;&#35299;&#25509;&#21463;&#30340;&#21442;&#25968;&#26684;&#24335;&#65306;&#29992;&#36887;&#21495;&#38548;&#24320;&#30340;(&#30446;&#26631;&#23454;&#20307;)&#23646;&#24615;&#21517;&#21450;&#25490;&#24207;&#25351;&#20196;,
		  &#22914;<tt class="code">firstname asc, age desc</tt>,&#22914;&#26524;&#35813;&#21442;&#25968;&#20026;&#31354;,&#21017;&#40664;&#35748;&#20197;id&#23545;&#35813;&#38598;&#21512;&#36827;&#34892;&#25490;&#24207;.
           &#22914;&#26524;&#26576;&#20010;&#38598;&#21512;&#22312;&#25968;&#25454;&#24211;&#20013;&#23545;&#24212;&#19968;&#20010;&#20851;&#32852;&#34920;(association table)&#30340;&#35805;,&#20320;&#19981;&#33021;&#22312;&#36825;&#20010;&#38598;&#21512;&#23646;&#24615;&#19978;&#38754;&#20351;&#29992;@OrderBy&#27880;&#35299;.
		  &#23545;&#20110;&#36825;&#31181;&#24773;&#20917;&#30340;&#22788;&#29702;&#26041;&#27861;,&#35831;&#21442;&#32771;<a href="#entity-hibspec">Hibernate Annotation Extensions</a>.
		  EJB3 &#20801;&#35768;&#20320;&#21033;&#29992;&#30446;&#26631;&#23454;&#20307;&#30340;&#19968;&#20010;&#23646;&#24615;&#20316;&#20026;Map&#30340;key,
		  &#36825;&#20010;&#23646;&#24615;&#21487;&#20197;&#29992;<tt class="literal">@MapKey(name="myProperty")</tt>&#26469;&#22768;&#26126;.
		  &#22914;&#26524;&#20351;&#29992;<tt class="literal">@MapKey</tt>&#27880;&#35299;&#30340;&#26102;&#20505;&#19981;&#25552;&#20379;&#23646;&#24615;&#21517;,
		  &#31995;&#32479;&#40664;&#35748;&#20351;&#29992;&#30446;&#26631;&#23454;&#20307;&#30340;&#20027;&#38190;.
		  map&#30340;key&#20351;&#29992;&#21644;&#23646;&#24615;&#30456;&#21516;&#30340;&#21015;&#65306;&#19981;&#38656;&#35201;&#20026;map key&#23450;&#20041;&#19987;&#29992;&#30340;&#21015;&#65292;&#22240;&#20026;map key&#23454;&#38469;&#19978;&#23601;&#34920;&#36798;&#20102;&#19968;&#20010;&#30446;&#26631;&#23646;&#24615;&#12290;
		  &#27880;&#24847;&#19968;&#26086;&#21152;&#36733;,key&#19981;&#20877;&#21644;&#23646;&#24615;&#20445;&#25345;&#21516;&#27493;,
		  &#20063;&#23601;&#26159;&#35828;,&#22914;&#26524;&#20320;&#25913;&#21464;&#20102;&#35813;&#23646;&#24615;&#30340;&#20540;,&#22312;&#20320;&#30340;Java&#27169;&#22411;&#20013;&#30340;key&#19981;&#20250;&#33258;&#21160;&#26356;&#26032;
		  (&#35831;&#21442;&#32771;<a href="#entity-hibspec">Hibernate Annotation Extensions</a>).
		  &#24456;&#22810;&#20154;&#34987;<tt class="literal">&lt;map&gt;</tt>&#21644;<tt class="literal">@MapKey</tt>&#24324;&#31946;&#28034;&#20102;&#12290;
		  &#20854;&#20182;&#23427;&#20204;&#26377;&#20004;&#28857;&#21306;&#21035;.<tt class="literal">@MapKey</tt>&#30446;&#21069;&#36824;&#26377;&#19968;&#20123;&#38480;&#21046;,&#35814;&#24773;&#35831;&#26597;&#30475;&#35770;&#22363;&#25110;&#32773;
		  &#25105;&#20204;&#30340;JIRA&#32570;&#38519;&#31995;&#32479;&#12290;


		  &#27880;&#24847;&#19968;&#26086;&#21152;&#36733;,key&#19981;&#20877;&#21644;&#23646;&#24615;&#20445;&#25345;&#21516;&#27493;,
		  &#20063;&#23601;&#26159;&#35828;,&#22914;&#26524;&#20320;&#25913;&#21464;&#20102;&#35813;&#23646;&#24615;&#30340;&#20540;,&#22312;&#20320;&#30340;Java&#27169;&#22411;&#20013;&#30340;key&#19981;&#20250;&#33258;&#21160;&#26356;&#26032;.
		  (Hibernate 3&#20013;Map&#25903;&#25345;&#30340;&#26041;&#24335;&#22312;&#24403;&#21069;&#30340;&#21457;&#24067;&#29256;&#20013;&#36824;&#26410;&#24471;&#21040;&#25903;&#25345;).</p><p>Hibernate&#23558;&#38598;&#21512;&#20998;&#20197;&#19979;&#20960;&#31867;.</p><p></p><div class="table"><a name="d0e1397"></a><p class="title"><b>&#34920;&nbsp;2.1.&nbsp;&#38598;&#21512;&#35821;&#20041;</b></p><table summary="&#38598;&#21512;&#35821;&#20041;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#35821;&#20041;</th><th>Java&#23454;&#29616;&#31867;</th><th> &#27880;&#35299;</th></tr></thead><tbody><tr><td>Bag &#35821;&#20041;</td><td>java.util.List, java.util.Collection</td><td>@org.hibernate.annotations.CollectionOfElements &#25110;
                  @OneToMany &#25110; @ManyToMany</td></tr><tr><td>List &#35821;&#20041;</td><td>java.util.List</td><td>(@org.hibernate.annotations.CollectionOfElements &#25110;
                  @OneToMany &#25110; @ManyToMany) 
				  &#20197;&#21450;
                  @org.hibernate.annotations.IndexColumn</td></tr><tr><td>Set &#35821;&#20041;</td><td>java.util.Set</td><td>@org.hibernate.annotations.CollectionOfElements &#25110;
                  @OneToMany &#25110; @ManyToMany</td></tr><tr><td>Map &#35821;&#20041;</td><td>java.util.Map</td><td>(@org.hibernate.annotations.CollectionOfElements &#25110;
                  @OneToMany &#25110; @ManyToMany)
				  &#20197;&#21450;
				  (&#31354; 
				  &#25110;
                  @org.hibernate.annotations.MapKey/MapKeyManyToMany(&#25903;&#25345;&#30495;&#27491;&#30340;map), 
				  &#25110;
                  @javax.persistence.MapKey</td></tr></tbody></table></div><i><span class="remark">
		  &#20174;&#19978;&#38754;&#21487;&#20197;&#26126;&#30830;&#22320;&#30475;&#21040;,&#27809;&#26377;@org.hibernate.annotations.IndexColumn 
		  &#27880;&#35299;&#30340;java.util.List&#38598;&#21512;&#23558;&#34987;&#30475;&#20316;bag&#31867;.
		  </span></i><p>EJB3&#35268;&#33539;&#19981;&#25903;&#25345;&#21407;&#22987;&#31867;&#22411;,&#26680;&#24515;&#31867;&#22411;,&#23884;&#20837;&#24335;&#23545;&#35937;&#30340;&#38598;&#21512;.&#20294;&#26159;Hibernate&#23545;&#27492;&#25552;&#20379;&#20102;&#25903;&#25345;
		  (&#35814;&#24773;&#21442;&#32771; <a href="#entity-hibspec">Hibernate Annotation Extensions</a>).</p><pre class="programlisting">@Entity public class City {
    @OneToMany(mappedBy="city")
    <span class="bold"><b>@OrderBy("streetName")</b></span>
    public List&lt;Street&gt; getStreets() {
        return streets;
    }
...
}

@Entity public class Street {
    <span class="bold"><b>public String getStreetName()</b></span> {
        return streetName;
    }

    @ManyToOne
    public City getCity() {
        return city;
    }
    ...
}


@Entity
public class Software {
    @OneToMany(mappedBy="software")
    <span class="bold"><b>@MapKey(name="codeName")</b></span>
    public Map&lt;String, Version&gt; getVersions() {
        return versions;
    }
...
}

@Entity
@Table(name="tbl_version")
public class Version {
    <span class="bold"><b>public String getCodeName()</b></span> {...}

    @ManyToOne
    public Software getSoftware() { ... }
...
}</pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">City</tt>
		  &#20013;&#21253;&#25324;&#20102;&#20197;<tt class="literal">streetName</tt>&#25490;&#24207;&#30340;<tt class="literal">Street</tt>&#30340;&#38598;&#21512;.
		  &#32780;<tt class="literal">Software</tt>&#20013;&#21253;&#25324;&#20102;&#20197;<tt class="literal">codeName</tt>&#20316;&#20026;
		  key&#21644;&#20197;<tt class="literal">Version</tt>&#20316;&#20026;&#20540;&#30340;Map.</p><p>&#38500;&#38750;&#38598;&#21512;&#20026;generic&#31867;&#22411;,&#21542;&#21017;&#20320;&#38656;&#35201;&#25351;&#23450;<tt class="literal">targetEntity</tt>.
		  &#36825;&#20010;&#27880;&#35299;&#23646;&#24615;&#25509;&#21463;&#30340;&#21442;&#25968;&#20026;&#30446;&#26631;&#23454;&#20307;&#30340;class.</p></div><div class="sect4" lang="zh_cn"><div class="titlepage"><div><div><h5 class="title"><a name="entity-mapping-association-collection-onetomany"></a>2.2.5.3.2.&nbsp;&#19968;&#23545;&#22810;(One-to-many)</h5></div></div><div></div></div><p>&#22312;&#23646;&#24615;&#32423;&#20351;&#29992; <tt class="literal">@OneToMany</tt>&#27880;&#35299;&#21487;&#23450;&#20041;&#19968;&#23545;&#22810;&#20851;&#32852;.&#19968;&#23545;&#22810;&#20851;&#32852;&#21487;&#20197;&#26159;&#21452;&#21521;&#20851;&#32852;.</p><div class="sect5" lang="zh_cn"><div class="titlepage"><div><div><h6 class="title"><a name="d0e1494"></a>2.2.5.3.2.1.&nbsp;&#21452;&#21521;(Bidirectional)</h6></div></div><div></div></div><p>&#22312;EJB3&#35268;&#33539;&#20013;&#22810;&#23545;&#19968;&#36825;&#31471;&#20960;&#20046;&#24635;&#26159;&#21452;&#21521;&#20851;&#32852;&#20013;&#30340;&#20027;&#20307;(owner)&#31471;,
			&#32780;&#19968;&#23545;&#22810;&#36825;&#31471;&#30340;&#20851;&#32852;&#27880;&#35299;&#20026;<tt class="literal">@OneToMany( mappedBy=...
            )</tt></p><pre class="programlisting">@Entity
public class Troop {
    @OneToMany(mappedBy="troop")
    public Set&lt;Soldier&gt; getSoldiers() {
    ...
}

@Entity
public class Soldier {
    @ManyToOne
    @JoinColumn(name="troop_fk")
    public Troop getTroop() {
    ...
}              </pre><p><tt class="classname">Troop</tt> &#36890;&#36807;<tt class="literal">troop</tt> 
			&#23646;&#24615;&#21644;<tt class="literal">Soldier</tt>&#24314;&#31435;&#20102;&#19968;&#23545;&#22810;&#30340;&#21452;&#21521;&#20851;&#32852;.
			&#22312;<tt class="literal">mappedBy</tt>&#31471;&#19981;&#24517;&#20063;&#19981;&#33021;&#20877;&#23450;&#20041;&#20219;&#20309;&#29289;&#29702;&#26144;&#23556;</p><p>&#23545;&#20110;&#19968;&#23545;&#22810;&#30340;&#21452;&#21521;&#26144;&#23556;,&#22914;&#26524;&#35201;&#19968;&#23545;&#22810;&#36825;&#19968;&#31471;&#32500;&#25252;&#20851;&#32852;&#20851;&#31995;,
			&#20320;&#38656;&#35201;&#21024;&#38500;<tt class="literal">mappedBy</tt>&#20803;&#32032;&#24182;&#23558;&#22810;&#23545;&#19968;&#36825;&#31471;&#30340;
			 <tt class="literal">@JoinColumn</tt>&#30340;insertable&#21644;updatable&#35774;&#32622;&#20026;false.
			&#24456;&#26126;&#26174;,&#36825;&#31181;&#26041;&#26696;&#19981;&#20250;&#24471;&#21040;&#20160;&#20040;&#26126;&#26174;&#30340;&#20248;&#21270;,&#32780;&#19988;&#36824;&#20250;&#22686;&#21152;&#19968;&#20123;&#38468;&#21152;&#30340;UPDATE&#35821;&#21477;.</p><pre class="programlisting">@Entity
public class Troop {
    @OneToMany
    @JoinColumn(name="troop_fk") //we need to duplicate the physical information
    public Set&lt;Soldier&gt; getSoldiers() {
    ...
}

@Entity
public class Soldier {
    @ManyToOne
    @JoinColumn(name="troop_fk", insertable=false, updatable=false)
    public Troop getTroop() {
    ...
}</pre></div><div class="sect5" lang="zh_cn"><div class="titlepage"><div><div><h6 class="title"><a name="d0e1526"></a>2.2.5.3.2.2.&nbsp;&#21333;&#21521;(Unidirectional)</h6></div></div><div></div></div><p>&#36890;&#36807;&#22312;&#34987;&#25317;&#26377;&#30340;&#23454;&#20307;&#31471;(owned entity)&#22686;&#21152;&#19968;&#20010;&#22806;&#38190;&#21015;&#26469;&#23454;&#29616;&#19968;&#23545;&#22810;&#21333;&#21521;&#20851;&#32852;&#26159;&#24456;&#23569;&#35265;&#30340;,&#20063;&#26159;&#19981;&#25512;&#33616;&#30340;.
			&#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#36890;&#36807;&#19968;&#20010;&#32852;&#25509;&#34920;(join table)&#26469;&#23454;&#29616;&#36825;&#31181;&#20851;&#32852;(&#19979;&#19968;&#33410;&#20250;&#23545;&#27492;&#36827;&#34892;&#35299;&#37322;).
			&#21487;&#20197;&#36890;&#36807;<tt class="literal">@JoinColumn</tt>&#27880;&#35299;&#26469;&#25551;&#36848;&#36825;&#31181;&#21333;&#21521;&#20851;&#32852;&#20851;&#31995;.</p><pre class="programlisting">
@Entity
public class Customer implements Serializable {
    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinColumn(name="CUST_ID")
    public Set&lt;Ticket&gt; getTickets() {
    ...
}

@Entity
public class Ticket implements Serializable {
    ... //no bidir
}
               </pre><p><tt class="literal">Customer</tt> &#36890;&#36807;
			<tt class="literal">CUST_ID</tt>&#21015;&#21644;<tt class="literal">Ticket</tt> &#24314;&#31435;&#20102;&#21333;&#21521;&#20851;&#32852;&#20851;&#31995;.</p></div><div class="sect5" lang="zh_cn"><div class="titlepage"><div><div><h6 class="title"><a name="d0e1546"></a>2.2.5.3.2.3.&nbsp;&#36890;&#36807;&#20851;&#32852;&#34920;&#22788;&#29702;&#21333;&#21521;&#20851;&#32852;</h6></div></div><div></div></div><p>&#36890;&#36807;&#32852;&#25509;&#34920;&#22788;&#29702;&#21333;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;&#26159;&#39318;&#36873;&#26041;&#24335;.&#36825;&#31181;&#20851;&#32852;&#36890;&#36807;<tt class="literal">@JoinTable</tt>&#27880;&#35299;&#26469;&#36827;&#34892;&#25551;&#36848;.</p><pre class="programlisting">
@Entity
public class Trainer {
    @OneToMany
    @JoinTable(
            name="TrainedMonkeys",
            joinColumns = @JoinColumn( name="trainer_id"),
            inverseJoinColumns = @JoinColumn( name="monkey_id")
    )
    public Set&lt;Monkey&gt; getTrainedMonkeys() {
    ...
}

@Entity
public class Monkey {
    ... //no bidir
}
               </pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">Trainer</tt>&#36890;&#36807;
			<tt class="classname">TrainedMonkeys</tt>&#34920;&#21644;
			<tt class="classname">Monkey</tt> &#24314;&#31435;&#20102;&#21333;&#21521;&#20851;&#32852;. 
			&#20854;&#20013;&#22806;&#38190;<tt class="literal">trainer_id</tt>&#20851;&#32852;&#21040;<tt class="literal">Trainer</tt>
			(<tt class="literal">joinColumns</tt>),
			&#32780;&#22806;&#38190;<tt class="literal">monkey_id</tt>&#20851;&#32852;&#21040; <tt class="literal">Monkey</tt>
			(<tt class="literal">inversejoinColumns</tt>).</p></div><div class="sect5" lang="zh_cn"><div class="titlepage"><div><div><h6 class="title"><a name="d0e1585"></a>2.2.5.3.2.4.&nbsp;&#40664;&#35748;&#22788;&#29702;&#26426;&#21046;</h6></div></div><div></div></div><p>&#36890;&#36807;&#32852;&#25509;&#34920;&#26469;&#24314;&#31435;&#21333;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;&#19981;&#38656;&#35201;&#25551;&#36848;&#20219;&#20309;&#29289;&#29702;&#26144;&#23556;.
            &#34920;&#21517;&#30001;&#20197;&#19979;&#19977;&#20010;&#37096;&#20998;&#32452;&#25104;:&#20027;&#34920;(owner table)&#34920;&#21517;+&#19979;&#21010;&#32447;+&#20174;&#34920;(the other side table)&#34920;&#21517;.
            &#25351;&#21521;&#20027;&#34920;&#30340;&#22806;&#38190;&#21517;&#65306;&#20027;&#34920;&#34920;&#21517;+&#19979;&#21010;&#32447;+&#20027;&#34920;&#20027;&#38190;&#21015;&#21517;
            &#25351;&#21521;&#20174;&#34920;&#30340;&#22806;&#38190;&#21517;&#65306;&#20027;&#34920;&#25152;&#23545;&#24212;&#23454;&#20307;&#30340;&#23646;&#24615;&#21517;+&#19979;&#21010;&#32447;+&#20174;&#34920;&#20027;&#38190;&#21015;&#21517;
            &#25351;&#21521;&#20174;&#34920;&#30340;&#22806;&#38190;&#23450;&#20041;&#20026;&#21807;&#19968;&#32422;&#26463;,&#29992;&#26469;&#34920;&#31034;&#19968;&#23545;&#22810;&#30340;&#20851;&#32852;&#20851;&#31995;.</p><pre class="programlisting">
@Entity
public class Trainer {
    @OneToMany
    public Set&lt;Tiger&gt; getTrainedTigers() {
    ...
}

@Entity
public class Tiger {
    ... //no bidir
}
               </pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="classname">Trainer</tt>&#21644;<tt class="classname">Tiger</tt>
			&#36890;&#36807;&#32852;&#25509;&#34920; <tt class="literal">Trainer_Tiger</tt>&#24314;&#31435;&#21333;&#21521;&#20851;&#32852;&#20851;&#31995;,
			&#20854;&#20013;&#22806;&#38190;<tt class="literal">trainer_id</tt>&#20851;&#32852;&#21040;<tt class="literal">Trainer</tt>
			(&#20027;&#34920;&#34920;&#21517;, <span><b class="keycap">_</b></span>(&#19979;&#21010;&#32447;), trainer id),
			&#32780;&#22806;&#38190;<tt class="literal">trainedTigers_id</tt>&#20851;&#32852;&#21040;<tt class="literal">Tiger</tt>
			(&#23646;&#24615;&#21517;&#31216;,  <span><b class="keycap">_</b></span>(&#19979;&#21010;&#32447;), Tiger&#34920;&#30340;&#20027;&#38190;&#21015;&#21517;).</p></div></div><div class="sect4" lang="zh_cn"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1621"></a>2.2.5.3.3.&nbsp;&#22810;&#23545;&#22810;(Many-to-many)</h5></div></div><div></div></div><div class="sect5" lang="zh_cn"><div class="titlepage"><div><div><h6 class="title"><a name="d0e1624"></a>2.2.5.3.3.1.&nbsp;&#23450;&#20041;</h6></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#36890;&#36807;<tt class="literal">@ManyToMany</tt>&#27880;&#35299;&#21487;&#23450;&#20041;&#30340;&#22810;&#23545;&#22810;&#20851;&#32852;.
			&#21516;&#26102;,&#20320;&#20063;&#38656;&#35201;&#36890;&#36807;&#27880;&#35299;<tt class="literal">@JoinTable</tt>&#25551;&#36848;&#20851;&#32852;&#34920;&#21644;&#20851;&#32852;&#26465;&#20214;.
			&#22914;&#26524;&#26159;&#21452;&#21521;&#20851;&#32852;,&#20854;&#20013;&#19968;&#27573;&#24517;&#39035;&#23450;&#20041;&#20026;owner,&#21478;&#19968;&#31471;&#24517;&#39035;&#23450;&#20041;&#20026;inverse(&#22312;&#23545;&#20851;&#32852;&#34920;&#36827;&#34892;&#26356;&#26032;&#25805;&#20316;&#26102;&#36825;&#19968;&#31471;&#23558;&#34987;&#24573;&#30053;):</p><pre class="programlisting">
@Entity
public class Employer implements Serializable {
    @ManyToMany(
        targetEntity=org.hibernate.test.metadata.manytomany.Employee.class,
        cascade={CascadeType.PERSIST, CascadeType.MERGE}
    )
    @JoinTable(
        name="EMPLOYER_EMPLOYEE",
        joinColumns=@JoinColumn(name="EMPER_ID"),
        inverseJoinColumns=@JoinColumn(name="EMPEE_ID")
    )
    public Collection getEmployees() {
        return employees;
    }
    ...
}
               </pre><pre class="programlisting">
@Entity
public class Employee implements Serializable {
    @ManyToMany(
        cascade = {CascadeType.PERSIST, CascadeType.MERGE},
        mappedBy = "employees",
        targetEntity = Employer.class
    )
    public Collection getEmployers() {
        return employers;
    }
}
               </pre><p>&#33267;&#27492;,&#25105;&#20204;&#24050;&#32463;&#23637;&#31034;&#20102;&#24456;&#22810;&#36319;&#20851;&#32852;&#26377;&#20851;&#30340;&#22768;&#26126;&#23450;&#20041;&#20197;&#21450;&#23646;&#24615;&#32454;&#33410;.
			&#19979;&#38754;&#25105;&#20204;&#23558;&#28145;&#20837;&#20171;&#32461;<tt class="literal">@JoinTable</tt>&#27880;&#35299;,&#35813;&#27880;&#35299;&#23450;&#20041;&#20102;&#32852;&#25509;&#34920;&#30340;&#34920;&#21517;,
			&#32852;&#25509;&#21015;&#25968;&#32452;(&#27880;&#35299;&#20013;&#23450;&#20041;&#25968;&#32452;&#30340;&#26684;&#24335;&#20026;{ A, B, C }),
			&#20197;&#21450;inverse&#32852;&#25509;&#21015;&#25968;&#32452;.
			&#21518;&#32773;&#26159;&#20851;&#32852;&#34920;&#20013;&#20851;&#32852;&#21040;<tt class="classname">Employee</tt>&#20027;&#38190;&#30340;&#21015;(the "other side").</p><p>&#27491;&#22914;&#21069;&#38754;&#25152;&#31034;,&#34987;&#20851;&#32852;&#31471;&#19981;&#24517;&#20063;&#19981;&#33021;&#25551;&#36848;&#29289;&#29702;&#26144;&#23556;: 
			&#21482;&#38656;&#35201;&#19968;&#20010;&#31616;&#21333;&#30340;<tt class="literal">mappedBy</tt>&#21442;&#25968;,&#35813;&#21442;&#25968;&#21253;&#21547;&#20102;&#20027;&#20307;&#31471;&#30340;&#23646;&#24615;&#21517;,&#36825;&#26679;&#23601;&#32465;&#23450;&#21452;&#26041;&#30340;&#20851;&#31995;.</p></div><div class="sect5" lang="zh_cn"><div class="titlepage"><div><div><h6 class="title"><a name="d0e1652"></a>2.2.5.3.3.2.&nbsp;&#40664;&#35748;&#20540;</h6></div></div><div></div></div><p>&#21644;&#20854;&#20182;&#35768;&#22810;&#27880;&#35299;&#19968;&#26679;,&#22312;&#22810;&#23545;&#22810;&#20851;&#32852;&#20013;&#24456;&#22810;&#20540;&#26159;&#33258;&#21160;&#29983;&#25104;.
			&#24403;&#21452;&#21521;&#22810;&#23545;&#22810;&#20851;&#32852;&#20013;&#27809;&#26377;&#23450;&#20041;&#20219;&#20309;&#29289;&#29702;&#26144;&#23556;&#26102;,Hibernate&#26681;&#25454;&#20197;&#19979;&#35268;&#21017;&#29983;&#25104;&#30456;&#24212;&#30340;&#20540;.
			&#20851;&#32852;&#34920;&#21517;:&#20027;&#34920;&#34920;&#21517;+<span><b class="keycap">_</b></span>&#19979;&#21010;&#32447;+&#20174;&#34920;&#34920;&#21517;,
			&#20851;&#32852;&#21040;&#20027;&#34920;&#30340;&#22806;&#38190;&#21517;:&#20027;&#34920;&#21517;+<span><b class="keycap">_</b></span>&#19979;&#21010;&#32447;+&#20027;&#34920;&#20013;&#30340;&#20027;&#38190;&#21015;&#21517;.
			&#20851;&#32852;&#21040;&#20174;&#34920;&#30340;&#22806;&#38190;&#21517;:&#20027;&#34920;&#20013;&#29992;&#20110;&#20851;&#32852;&#30340;&#23646;&#24615;&#21517;+<span><b class="keycap">_</b></span>&#19979;&#21010;&#32447;+&#20174;&#34920;&#30340;&#20027;&#38190;&#21015;&#21517;.
			&#20197;&#19978;&#35268;&#21017;&#23545;&#20110;&#21452;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;&#21516;&#26679;&#26377;&#25928;.</p><pre class="programlisting">
@Entity
public class Store {
    @ManyToMany(cascade = CascadeType.PERSIST)
    public Set&lt;City&gt; getImplantedIn() {
        ...
    }
}

@Entity
public class City {
    ... //no bidirectional relationship
}
               </pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">Store_Table</tt>&#20316;&#20026;&#32852;&#25509;&#34920;. 
			<tt class="literal">Store_id</tt>&#21015;&#26159;&#32852;&#25509;&#21040;<tt class="literal">Store</tt>&#34920;&#30340;&#22806;&#38190;.
			&#32780;<tt class="literal">implantedIn_id</tt>&#21015;&#21017;&#32852;&#25509;&#21040;<tt class="literal">City</tt>&#34920;.</p><p>&#24403;&#21452;&#21521;&#22810;&#23545;&#22810;&#20851;&#32852;&#20013;&#27809;&#26377;&#23450;&#20041;&#20219;&#20309;&#29289;&#29702;&#26144;&#23556;&#26102;, Hibernate&#26681;&#25454;&#20197;&#19979;&#35268;&#21017;&#29983;&#25104;&#30456;&#24212;&#30340;&#20540;
            &#20851;&#32852;&#34920;&#21517;: :&#20027;&#34920;&#34920;&#21517;+<span><b class="keycap">_</b></span>&#19979;&#21010;&#32447;+&#20174;&#34920;&#34920;&#21517;,
            &#20851;&#32852;&#21040;&#20027;&#34920;&#30340;&#22806;&#38190;&#21517;:&#20174;&#34920;&#29992;&#20110;&#20851;&#32852;&#30340;&#23646;&#24615;&#21517;+<span><b class="keycap">_</b></span>&#19979;&#21010;&#32447;+&#20027;&#34920;&#20013;&#30340;&#20027;&#38190;&#21015;&#21517;.
            &#20851;&#32852;&#21040;&#20174;&#34920;&#30340;&#22806;&#38190;&#21517;:&#20027;&#34920;&#29992;&#20110;&#20851;&#32852;&#30340;&#23646;&#24615;&#21517;+<span><b class="keycap">_</b></span>&#19979;&#21010;&#32447;+&#20174;&#34920;&#30340;&#20027;&#38190;&#21015;&#21517;.
            &#20197;&#19978;&#35268;&#21017;&#23545;&#20110;&#21452;&#21521;&#19968;&#23545;&#22810;&#20851;&#32852;&#21516;&#26679;&#26377;&#25928;.</p><pre class="programlisting">
@Entity
public class Store {
    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    public Set&lt;Customer&gt; getCustomers() {
        ...
    }
}

@Entity
public class Customer {
    @ManyToMany(mappedBy="customers")
    public Set&lt;Store&gt; getStores() {
        ...
    }
}
               </pre><p>&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">Store_Customer</tt>&#20316;&#20026;&#32852;&#25509;&#34920;. 
			<tt class="literal">stores_id</tt>&#21015;&#26159;&#32852;&#25509;&#21040;<tt class="literal">Store</tt>&#34920;&#30340;&#22806;&#38190;,
			&#32780;<tt class="literal">customers_id</tt>&#21015;&#32852;&#25509;&#21040;<tt class="literal">City</tt>&#34920;.</p></div></div></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1715"></a>2.2.5.4.&nbsp;&#29992;cascading&#23454;&#29616;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;(Transitive persistence)</h4></div></div><div></div></div><p>&#20063;&#35768;&#20320;&#24050;&#32463;&#27880;&#24847;&#21040;&#20102;<tt class="literal">cascade</tt>&#23646;&#24615;&#25509;&#21463;&#30340;&#20540;&#20026;<tt class="classname">CascadeType</tt>&#25968;&#32452;.
		&#22312;EJB3&#20013;&#30340;cascade&#30340;&#27010;&#24565;&#21644;Hibernate&#20013;&#30340;&#20256;&#25773;&#24615;&#25345;&#20037;&#21270;&#20197;&#21450;cascade&#25805;&#20316;&#38750;&#24120;&#31867;&#20284;,
		&#20294;&#26159;&#22312;&#35821;&#20041;&#19978;&#26377;&#32454;&#24494;&#30340;&#21306;&#21035;,&#25903;&#25345;&#30340;cascade&#31867;&#22411;&#20063;&#26377;&#28857;&#21306;&#21035;:</p><div class="itemizedlist"><ul type="disc"><li>
             CascadeType.PERSIST: &#22914;&#26524;&#19968;&#20010;&#23454;&#20307;&#26159;&#21463;&#31649;&#29366;&#24577;, &#25110;&#32773;&#24403;persist()&#20989;&#25968;&#34987;&#35843;&#29992;&#26102;, &#35302;&#21457;&#32423;&#32852;&#21019;&#24314;(create)&#25805;&#20316;
          </li><li>
             CascadeType.MERGE: &#22914;&#26524;&#19968;&#20010;&#23454;&#20307;&#26159;&#21463;&#31649;&#29366;&#24577;, &#25110;&#32773;&#24403;merge()&#20989;&#25968;&#34987;&#35843;&#29992;&#26102;, &#35302;&#21457;&#32423;&#32852;&#21512;&#24182;(merge)&#25805;&#20316;
          </li><li>
             CascadeType.REMOVE: &#24403;delete()&#20989;&#25968;&#34987;&#35843;&#29992;&#26102;, &#35302;&#21457;&#32423;&#32852;&#21024;&#38500;(remove)&#25805;&#20316;
          </li><li>
             CascadeType.REFRESH: &#24403;refresh()&#20989;&#25968;&#34987;&#35843;&#29992;&#26102;, &#35302;&#21457;&#32423;&#32852;&#26356;&#26032;(refresh)&#25805;&#20316;
          </li><li>
             CascadeType.ALL: &#20197;&#19978;&#20840;&#37096;
          </li></ul></div><p>&#20851;&#20110;cascading, create/merge&#30340;&#35821;&#20041;&#35831;&#21442;&#32771;EJB3&#35268;&#33539;&#30340;6.3&#31456;&#33410;.</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1739"></a>2.2.5.5.&nbsp;&#20851;&#32852;&#20851;&#31995;&#33719;&#21462;</h4></div></div><div></div></div><p>&#36890;&#36807;Hibernate&#20320;&#21487;&#20197;&#33719;&#24471;&#30452;&#25509;&#25110;&#32773;&#24310;&#36831;&#33719;&#21462;&#20851;&#32852;&#23454;&#20307;&#30340;&#21151;&#33021;.
		<tt class="literal">fetch</tt>&#21442;&#25968;&#21487;&#20197;&#35774;&#32622;&#20026;<tt class="literal">FetchType.LAZY</tt> 
		&#25110;&#32773; <tt class="literal">FetchType.EAGER</tt>.
		<tt class="literal">EAGER</tt>&#36890;&#36807;<tt class="literal">outer join select</tt>&#30452;&#25509;&#33719;&#21462;&#20851;&#32852;&#30340;&#23545;&#35937;,
		&#32780;<tt class="literal">LAZY</tt>(&#40664;&#35748;&#20540;)&#22312;&#31532;&#19968;&#27425;&#35775;&#38382;&#20851;&#32852;&#23545;&#35937;&#30340;&#26102;&#20505;&#25165;&#20250;&#35302;&#21457;&#30456;&#24212;&#30340;select&#25805;&#20316;.
		EJBQL&#25552;&#20379;&#20102;<tt class="literal">fetch</tt>&#20851;&#38190;&#23383;,&#35813;&#20851;&#38190;&#23383;&#21487;&#20197;&#22312;&#36827;&#34892;&#29305;&#27530;&#26597;&#35810;&#30340;&#26102;&#20505;&#35206;&#30422;&#40664;&#35748;&#20540;.
		&#36825;&#23545;&#20110;&#25552;&#39640;&#24615;&#33021;&#26469;&#35828;&#38750;&#24120;&#26377;&#25928;,&#24212;&#35813;&#26681;&#25454;&#23454;&#38469;&#30340;&#29992;&#20363;&#26469;&#21028;&#26029;&#26159;&#21542;&#36873;&#25321;fetch&#20851;&#38190;&#23383;.</p></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1765"></a>2.2.6.&nbsp;&#26144;&#23556;&#22797;&#21512;&#20027;&#38190;&#19982;&#22806;&#38190;</h3></div></div><div></div></div><p>&#32452;&#21512;&#20027;&#38190;&#20351;&#29992;&#19968;&#20010;&#21487;&#23884;&#20837;&#30340;&#31867;&#20316;&#20026;&#20027;&#38190;&#34920;&#31034;,&#22240;&#27492;&#20320;&#38656;&#35201;&#20351;&#29992;<tt class="literal">@Id</tt>
	  &#21644;<tt class="literal">@Embeddable</tt>&#20004;&#20010;&#27880;&#35299;.
	  &#36824;&#26377;&#19968;&#31181;&#26041;&#24335;&#26159;&#20351;&#29992;<tt class="literal">@EmbeddedId</tt>&#27880;&#35299;.&#27880;&#24847;&#25152;&#20381;&#36182;&#30340;&#31867;&#24517;&#39035;&#23454;&#29616;
	  serializable&#20197;&#21450;&#23454;&#29616;<tt class="methodname">equals()</tt>/<tt class="methodname">hashCode()</tt>&#26041;&#27861;.
	  &#20320;&#20063;&#21487;&#20197;&#22914;<a href="#mapping-identifier">Mapping identifier properties</a>&#19968;&#31456;&#20013;&#25551;&#36848;&#30340;&#21150;&#27861;&#20351;&#29992;<tt class="literal">@IdClass</tt>&#27880;&#35299;.</p><pre class="programlisting">
@Entity
public class RegionalArticle implements Serializable {

    @Id
    public RegionalArticlePk getPk() { ... }
}

@Embeddable
public class RegionalArticlePk implements Serializable { ... }
         </pre><p>&#25110;&#32773;</p><pre class="programlisting">
@Entity
public class RegionalArticle implements Serializable {

    @EmbeddedId
    public RegionalArticlePk getPk() { ... }
}

public class RegionalArticlePk implements Serializable { ... }
         </pre><p><tt class="literal">@Embeddable</tt> &#27880;&#35299;&#40664;&#35748;&#32487;&#25215;&#20102;&#20854;&#25152;&#23646;&#23454;&#20307;&#30340;&#35775;&#38382;&#31867;&#22411;,
	  &#38500;&#38750;&#26174;&#24335;&#20351;&#29992;&#20102;Hibernate&#30340;<tt class="literal">@AccessType</tt>&#27880;&#35299;(&#36825;&#20010;&#27880;&#35299;&#19981;&#26159;EJB3&#26631;&#20934;&#30340;&#19968;&#37096;&#20998;).
	  &#32780;<tt class="literal">@JoinColumns</tt>,&#21363;<tt class="literal">@JoinColumn</tt>&#25968;&#32452;,
	  &#23450;&#20041;&#20102;&#20851;&#32852;&#30340;&#32452;&#21512;&#22806;&#38190;(&#22914;&#26524;&#19981;&#20351;&#29992;&#32570;&#30465;&#20540;&#30340;&#35805;).
	  &#26174;&#24335;&#25351;&#26126;<tt class="literal">referencedColumnNames</tt>&#26159;&#19968;&#20010;&#22909;&#30340;&#23454;&#36341;&#26041;&#24335;,
	  &#21542;&#21017;,Hibernate&#35748;&#20026;&#20320;&#20351;&#29992;&#30340;&#21015;&#39034;&#24207;&#21644;&#20027;&#38190;&#22768;&#26126;&#30340;&#39034;&#24207;&#19968;&#33268;.</p><pre class="programlisting">
@Entity
public class Parent implements Serializable {
    @Id
    public ParentPk id;
    public int age;

    @OneToMany(cascade=CascadeType.ALL)
    @JoinColumns ({
        @JoinColumn(name="parentCivility", referencedColumnName = "isMale"),
        @JoinColumn(name="parentLastName", referencedColumnName = "lastName"),
        @JoinColumn(name="parentFirstName", referencedColumnName = "firstName")
    })
    public Set&lt;Child&gt; children; //unidirectional
    ...
}
         </pre><pre class="programlisting">
@Entity
public class Child implements Serializable {
    @Id @GeneratedValue
    public Integer id;

    @ManyToOne
    @JoinColumns ({
        @JoinColumn(name="parentCivility", referencedColumnName = "isMale"),
        @JoinColumn(name="parentLastName", referencedColumnName = "lastName"),
        @JoinColumn(name="parentFirstName", referencedColumnName = "firstName")
    })
    public Parent parent; //unidirectional
}
         </pre><pre class="programlisting">
@Embeddable
public class ParentPk implements Serializable {
    String firstName;
    String lastName;
    ...
}
         </pre><p>&#27880;&#24847;&#19978;&#38754;&#30340; <tt class="literal">referencedColumnName</tt>&#26174;&#24335;&#20351;&#29992;&#26041;&#24335;.</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1823"></a>2.2.7.&nbsp;&#26144;&#23556;&#20108;&#32423;&#34920;(secondary tables)</h3></div></div><div></div></div><p>&#20351;&#29992;&#31867;&#19968;&#32423;&#30340; <tt class="literal">@SecondaryTable </tt> &#25110; 
	   <tt class="literal">@SecondaryTables </tt>&#27880;&#35299;&#21487;&#20197;&#23454;&#29616;&#21333;&#20010;&#23454;&#20307;&#21040;&#22810;&#20010;&#34920;&#30340;&#26144;&#23556;.
	  &#20351;&#29992; <tt class="literal">@Column  </tt>&#25110;&#32773;  <tt class="literal">@JoinColumn  </tt>
	  &#27880;&#35299;&#20013;&#30340; <tt class="literal">table </tt>&#21442;&#25968;&#21487;&#25351;&#23450;&#26576;&#20010;&#21015;&#25152;&#23646;&#30340;&#29305;&#23450;&#34920;.</p><pre class="programlisting">
@Entity
@Table(name="MainCat")
<span class="bold"><b>@SecondaryTables({
    @SecondaryTable(name="Cat1", pkJoinColumns={
        @PrimaryKeyJoinColumn(name="cat_id", referencedColumnName="id")
    ),
    @SecondaryTable(name="Cat2", uniqueConstraints={@UniqueConstraint(columnNames={"storyPart2"})})
})</b></span>
public class Cat implements Serializable {

    private Integer id;
    private String name;
    private String storyPart1;
    private String storyPart2;

    @Id @GeneratedValue
    public Integer getId() {
        return id;
    }

    public String getName() {
        return name;
    }
    
    <span class="bold"><b>@Column(table="Cat1")</b></span>
    public String getStoryPart1() {
        return storyPart1;
    }

    <span class="bold"><b>@Column(table="Cat2")</b></span>
    public String getStoryPart2() {
        return storyPart2;
    }
</pre><p>&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">name</tt>&#20445;&#23384;&#22312;<tt class="literal">MainCat</tt>&#34920;&#20013;,
	  <tt class="literal">storyPart1</tt>&#20445;&#23384;&#22312;<tt class="literal">Cat1</tt>&#34920;&#20013;,
	  <tt class="literal">storyPart2</tt>&#20445;&#23384;&#22312;<tt class="literal">Cat2</tt>&#34920;&#20013;.
	  <tt class="literal">Cat1</tt>&#34920;&#36890;&#36807;&#22806;&#38190;<tt class="literal">cat_id</tt>&#21644;<tt class="literal">MainCat</tt>&#34920;&#20851;&#32852;,
	  <tt class="literal">Cat2</tt>&#34920;&#36890;&#36807;<tt class="literal">id</tt>&#21015;&#21644;<tt class="literal">MainCat</tt>&#34920;&#20851;&#32852;
	  (&#21644;<tt class="literal">MainCat</tt>&#30340;<tt class="literal">id</tt>&#21015;&#21516;&#21517;).
	  &#23545;<tt class="literal">storyPart2</tt>&#21015;&#36824;&#23450;&#20041;&#20102;&#21807;&#19968;&#32422;&#26463;.</p><p>&#22312;JBoss EJB 3&#25351;&#21335;&#21644;Hibernate Annotations&#21333;&#20803;&#27979;&#35797;&#20195;&#30721;&#20013;&#36824;&#26377;&#26356;&#22810;&#30340;&#20363;&#23376;.</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="entity-mapping-query"></a>2.3.&nbsp;&#26144;&#23556;&#26597;&#35810;</h2></div></div><div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1906"></a>2.3.1.&nbsp;&#26144;&#23556;EJBQL/HQL&#26597;&#35810;</h3></div></div><div></div></div><p>&#20351;&#29992;&#27880;&#35299;&#36824;&#21487;&#20197;&#26144;&#23556;EJBQL/HQL&#26597;&#35810;.
	  <tt class="literal">@NamedQuery</tt> &#21644;<tt class="literal">@NamedQueries</tt>&#26159;&#21487;&#20351;&#29992;&#22312;&#31867;&#21644;&#21253;&#19978;&#30340;&#27880;&#35299;.
	  &#20294;&#26159;&#23427;&#20204;&#30340;&#23450;&#20041;&#22312;session factory/entity manager factory&#33539;&#22260;&#20013;&#26159;&#37117;&#21487;&#35265;&#30340;.
	  &#21629;&#21517;&#24335;&#26597;&#35810;&#36890;&#36807;&#23427;&#30340;&#21517;&#23383;&#21644;&#23454;&#38469;&#30340;&#26597;&#35810;&#23383;&#31526;&#20018;&#26469;&#23450;&#20041;.</p><pre class="programlisting">
javax.persistence.NamedQueries(
    @javax.persistence.NamedQuery(name="plane.getAll", query="select p from Plane p")
)
package org.hibernate.test.annotations.query;

...

@Entity
@NamedQuery(name="night.moreRecentThan", query="select n from Night n where n.date &gt;= :date")
public class Night {
    ...
}

public class MyDao {
    doStuff() {
        Query q = s.getNamedQuery("night.moreRecentThan");
        q.setDate( "date", aMonthAgo );
        List results = q.list();
        ...
    }
    ...
}
        </pre><p>&#36824;&#21487;&#20197;&#36890;&#36807;&#23450;&#20041; <tt class="literal">QueryHint</tt> &#25968;&#32452;&#30340;<tt class="literal">hints</tt>
	  &#23646;&#24615;&#20026;&#26597;&#35810;&#25552;&#20379;&#19968;&#20123;hint&#20449;&#24687;.</p><p>&#19979;&#38754;&#26159;&#30446;&#21069;&#21487;&#20197;&#20351;&#29992;&#30340;&#19968;&#20123;Hibernate hint&#65306;</p><p></p><div class="table"><a name="d0e1930"></a><p class="title"><b>&#34920;&nbsp;2.2.&nbsp;Query hints</b></p><table summary="Query hints" border="1"><colgroup><col><col></colgroup><thead><tr><th>hint</th><th>description</th></tr></thead><tbody><tr><td>org.hibernate.cacheable</td><td>&#26597;&#35810;&#26159;&#21542;&#19982;&#20108;&#32423;&#32531;&#23384;&#20132;&#20114;(&#40664;&#35748;&#20540;&#20026;false)
	      </td></tr><tr><td>org.hibernate.cacheRegion</td><td>&#35774;&#32622;&#32531;&#23384;&#21306;&#21517;&#31216; (&#40664;&#35748;&#20026;otherwise)</td></tr><tr><td>org.hibernate.timeout</td><td>&#26597;&#35810;&#36229;&#26102;&#35774;&#23450;</td></tr><tr><td>org.hibernate.fetchSize</td><td>&#25152;&#33719;&#21462;&#30340;&#32467;&#26524;&#38598;(resultset)&#22823;&#23567;</td></tr><tr><td>org.hibernate.flushMode</td><td>&#26412;&#27425;&#26597;&#35810;&#25152;&#29992;&#30340;&#21047;&#26032;&#27169;&#24335;</td></tr><tr><td>org.hibernate.cacheMode</td><td>&#26412;&#27425;&#26597;&#35810;&#25152;&#29992;&#30340;&#32531;&#23384;&#27169;&#24335;</td></tr><tr><td>org.hibernate.readOnly</td><td>&#26159;&#21542;&#23558;&#26412;&#27425;&#26597;&#35810;&#25152;&#21152;&#36733;&#30340;&#23454;&#20307;&#35774;&#20026;&#21482;&#35835;(&#40664;&#35748;&#20026;false)
	      </td></tr><tr><td>org.hibernate.comment</td><td>&#23558;&#26597;&#35810;&#27880;&#37322;&#28155;&#21152;&#20837;&#25152;&#29983;&#25104;&#30340;SQL</td></tr></tbody></table></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="entity-mapping-query-native"></a>2.3.2.&nbsp;&#26144;&#23556;&#26412;&#22320;&#21270;&#26597;&#35810;</h3></div></div><div></div></div><p>&#20320;&#36824;&#21487;&#20197;&#26144;&#23556;&#26412;&#22320;&#21270;&#26597;&#35810;(&#20063;&#23601;&#26159;&#26222;&#36890;SQL&#26597;&#35810;).
	  &#19981;&#36807;&#36825;&#38656;&#35201;&#20320;&#20351;&#29992;<tt class="literal">@SqlResultSetMapping</tt>&#27880;&#35299;&#26469;&#25551;&#36848;SQL&#30340;resultset&#30340;&#32467;&#26500;
	  (&#22914;&#26524;&#20320;&#25171;&#31639;&#23450;&#20041;&#22810;&#20010;&#32467;&#26524;&#38598;&#26144;&#23556;&#65292;&#21487;&#26159;&#20351;&#29992;<tt class="literal">@SqlResultSetMappings</tt>).
	  <tt class="literal">@SqlResultSetMapping</tt>&#21644;<tt class="literal">@NamedQuery</tt>,
	  <tt class="literal">@SqlResultSetMapping</tt>&#19968;&#26679;,&#21487;&#20197;&#23450;&#20041;&#22312;&#31867;&#21644;&#21253;&#19968;&#32423;.
	  &#20294;&#26159;<tt class="literal">@SqlResultSetMapping</tt>&#30340;&#20316;&#29992;&#22495;&#20026;&#24212;&#29992;&#32423;.
	  &#19979;&#38754;&#25105;&#20204;&#20250;&#30475;&#21040;,<tt class="literal">@NamedNativeQuery</tt> &#27880;&#35299;&#20013;
	  <tt class="literal">resultSetMapping</tt>&#21442;&#25968;&#20540;&#20026;<tt class="literal">@SqlResultSetMapping</tt>&#30340;&#21517;&#23383;.
	  &#32467;&#26524;&#38598;&#26144;&#23556;&#23450;&#20041;&#20102;&#36890;&#36807;&#26412;&#22320;&#21270;&#26597;&#35810;&#36820;&#22238;&#20540;&#21644;&#23454;&#20307;&#30340;&#26144;&#23556;.
	  &#35813;&#23454;&#20307;&#20013;&#30340;&#27599;&#19968;&#20010;&#23383;&#27573;&#37117;&#32465;&#23450;&#21040;SQL&#32467;&#26524;&#38598;&#20013;&#30340;&#26576;&#20010;&#21015;&#19978;.
	  &#35813;&#23454;&#20307;&#30340;&#25152;&#26377;&#23383;&#27573;&#21253;&#25324;&#23376;&#31867;&#30340;&#25152;&#26377;&#23383;&#27573;&#20197;&#21450;
	  &#20851;&#32852;&#23454;&#20307;&#30340;&#22806;&#38190;&#21015;&#37117;&#24517;&#39035;&#22312;SQL&#26597;&#35810;&#20013;&#26377;&#23545;&#24212;&#30340;&#23450;&#20041;.
	  &#22914;&#26524;&#23454;&#20307;&#20013;&#30340;&#23646;&#24615;&#21644;SQL&#26597;&#35810;&#20013;&#30340;&#21015;&#21517;&#30456;&#21516;,&#36825;&#31181;&#24773;&#20917;&#19979;&#21487;&#20197;&#19981;&#36827;&#34892;&#23450;&#20041;&#23383;&#27573;&#26144;&#23556;.</p><pre class="programlisting">@NamedNativeQuery(name="night&amp;area", query="select night.id nid, night.night_duration, "
    + " night.night_date, area.id aid, night.area_id, area.name "
    + "from Night night, Area area where night.area_id = area.id", <span class="bold"><b>resultSetMapping="joinMapping"</b></span>)
@SqlResultSetMapping(name="joinMapping", entities={
    @EntityResult(entityClass=org.hibernate.test.annotations.query.Night.class, fields = {
        @FieldResult(name="id", column="nid"),
        @FieldResult(name="duration", column="night_duration"),
        @FieldResult(name="date", column="night_date"),
        @FieldResult(name="area", column="area_id"),
        discriminatorColumn="disc"
    }),
    @EntityResult(entityClass=org.hibernate.test.annotations.query.Area.class, fields = {
        @FieldResult(name="id", column="aid"),
        @FieldResult(name="name", column="name")
    })
    }
)</pre><p>&#22312;&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,&#21517;&#20026;<tt class="literal">night&amp;area</tt>&#30340;&#26597;&#35810;
	  &#21644;<tt class="literal">joinMapping</tt>&#32467;&#26524;&#38598;&#26144;&#23556;&#23545;&#24212;.
	  &#35813;&#26144;&#23556;&#36820;&#22238;&#20004;&#20010;&#23454;&#20307;,&#20998;&#21035;&#20026;<tt class="literal">Night</tt> 
	  &#21644;<tt class="literal">Area</tt>,&#20854;&#20013;&#27599;&#20010;&#23646;&#24615;&#37117;&#21644;&#19968;&#20010;&#21015;&#20851;&#32852;,
	  &#21015;&#21517;&#36890;&#36807;&#26597;&#35810;&#33719;&#21462;.&#19979;&#38754;&#25105;&#20204;&#30475;&#19968;&#20010;&#38544;&#24335;&#22768;&#26126;&#23646;&#24615;&#21644;&#21015;&#26144;&#23556;&#20851;&#31995;&#30340;&#20363;&#23376;.</p><pre class="programlisting">@Entity
<span class="bold"><b>@SqlResultSetMapping(name="implicit", entities=@EntityResult(entityClass=org.hibernate.test.annotations.query.SpaceShip.class))
@NamedNativeQuery(name="implicitSample", query="select * from SpaceShip", resultSetMapping="implicit")</b></span>
public class SpaceShip {
    private String name;
    private String model;
    private double speed;

    @Id
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Column(name="model_txt")
    public String getModel() {
        return model;
    }

    public void setModel(String model) {
        this.model = model;
    }

    public double getSpeed() {
        return speed;
    }

    public void setSpeed(double speed) {
        this.speed = speed;
    }
}</pre><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;,&#25105;&#20204;&#21482;&#38656;&#35201;&#23450;&#20041;&#32467;&#26524;&#38598;&#26144;&#23556;&#20013;&#30340;&#23454;&#20307;&#25104;&#21592;.
	  &#23646;&#24615;&#21644;&#21015;&#21517;&#20043;&#38388;&#30340;&#26144;&#23556;&#20511;&#21161;&#23454;&#20307;&#20013;&#21253;&#21547;&#26144;&#23556;&#20449;&#24687;&#26469;&#23436;&#25104;.
	  &#22312;&#36825;&#20010;&#20363;&#23376;&#20013;,<tt class="literal">model</tt>&#23646;&#24615;&#32465;&#23450;&#21040;<tt class="literal">model_txt</tt>&#21015;.
	  &#22914;&#26524;&#21644;&#30456;&#20851;&#23454;&#20307;&#30340;&#20851;&#32852;&#35774;&#35745;&#21040;&#32452;&#21512;&#20027;&#38190;,
	  &#37027;&#20040;&#24212;&#35813;&#20351;&#29992;<tt class="literal">@FieldResult</tt>&#27880;&#35299;&#26469;&#23450;&#20041;&#27599;&#20010;&#22806;&#38190;&#21015;.
	  <tt class="literal">@FieldResult</tt>&#30340;&#21517;&#23383;&#30001;&#20197;&#19979;&#20960;&#37096;&#20998;&#32452;&#25104;&#65306;
	  &#23450;&#20041;&#36825;&#31181;&#20851;&#31995;&#30340;&#23646;&#24615;&#21517;&#23383;+"."&#65291;&#20027;&#38190;&#21517;&#25110;&#20027;&#38190;&#21015;&#25110;&#20027;&#38190;&#23646;&#24615;.</p><pre class="programlisting">@Entity
@SqlResultSetMapping(name="compositekey",
        entities=@EntityResult(entityClass=org.hibernate.test.annotations.query.SpaceShip.class,
            fields = {
                    @FieldResult(name="name", column = "name"),
                    @FieldResult(name="model", column = "model"),
                    @FieldResult(name="speed", column = "speed"),
<span class="bold"><b>                    @FieldResult(name="captain.firstname", column = "firstn"),
                    @FieldResult(name="captain.lastname", column = "lastn"),</b></span>
                    @FieldResult(name="dimensions.length", column = "length"),
                    @FieldResult(name="dimensions.width", column = "width")
                    }),
        columns = { @ColumnResult(name = "surface"),
                    @ColumnResult(name = "volume") } )

@NamedNativeQuery(name="compositekey",
    query="select name, model, speed, lname as lastn, fname as firstn, length, width, length * width as surface from SpaceShip", 
    resultSetMapping="compositekey")
} )
public class SpaceShip {
    private String name;
    private String model;
    private double speed;
    private Captain captain;
    private Dimensions dimensions;

    @Id
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @ManyToOne(fetch= FetchType.LAZY)
    @JoinColumns( {
            @JoinColumn(name="fname", referencedColumnName = "firstname"),
            @JoinColumn(name="lname", referencedColumnName = "lastname")
            } )
    public Captain getCaptain() {
        return captain;
    }

    public void setCaptain(Captain captain) {
        this.captain = captain;
    }

    public String getModel() {
        return model;
    }

    public void setModel(String model) {
        this.model = model;
    }

    public double getSpeed() {
        return speed;
    }

    public void setSpeed(double speed) {
        this.speed = speed;
    }

    public Dimensions getDimensions() {
        return dimensions;
    }

    public void setDimensions(Dimensions dimensions) {
        this.dimensions = dimensions;
    }
}

@Entity
@IdClass(Identity.class)
public class Captain implements Serializable {
    private String firstname;
    private String lastname;

    @Id
    public String getFirstname() {
        return firstname;
    }

    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }

    @Id
    public String getLastname() {
        return lastname;
    }

    public void setLastname(String lastname) {
        this.lastname = lastname;
    }
}
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#35266;&#23519;dimension&#23646;&#24615;&#20320;&#20250;&#21457;&#29616;Hibernate&#25903;&#25345;&#29992;"."&#31526;&#21495;&#26469;&#34920;&#31034;&#23884;&#20837;&#24335;&#23545;&#35937;.
		EJB3&#23454;&#29616;&#19981;&#24517;&#25903;&#25345;&#36825;&#20010;&#29305;&#24449;,&#20294;&#26159;&#25105;&#20204;&#20570;&#21040;&#20102;:-)</p></div><p>&#22914;&#26524;&#26597;&#35810;&#36820;&#22238;&#30340;&#26159;&#21333;&#20010;&#23454;&#20307;,&#25110;&#32773;&#20320;&#25171;&#31639;&#20351;&#29992;&#31995;&#32479;&#40664;&#35748;&#30340;&#26144;&#23556;,
	  &#36825;&#31181;&#24773;&#20917;&#19979;&#21487;&#20197;&#19981;&#20351;&#29992;<tt class="literal">resultSetMapping</tt>
	  &#32780;&#26159;&#20351;&#29992;<tt class="literal">resultClass</tt>&#23646;&#24615;:</p><pre class="programlisting"><span class="bold"><b>@NamedNativeQuery(name="implicitSample", query="select * from SpaceShip", 
    resultClass=SpaceShip.class)</b></span>
public class SpaceShip {</pre><p>&#26576;&#20123;&#26412;&#22320;&#26597;&#35810;&#36820;&#22238;&#30340;&#26159;scalar&#20540;,&#20363;&#22914;&#25253;&#34920;&#26597;&#35810;.
	  &#20320;&#21487;&#20197;&#36890;&#36807;<tt class="literal">@ColumnResult</tt>&#23558;&#20854;&#26144;&#23556;&#21040;
	  <tt class="literal">@SqlResultsetMapping</tt>&#19978;.
	  &#29978;&#33267;&#36824;&#21487;&#20197;&#22312;&#21516;&#19968;&#20010;&#26412;&#22320;&#26597;&#35810;&#30340;&#32467;&#26524;&#20013;&#28151;&#21512;&#23454;&#20307;&#21644;scalar&#31867;&#22411;(&#19981;&#36807;&#36825;&#31181;&#24773;&#20917;&#27604;&#36739;&#23569;&#35265;).</p><pre class="programlisting"><span class="bold"><b>@SqlResultSetMapping(name="scalar", columns=@ColumnResult(name="dimension"))
@NamedNativeQuery(name="scalar", query="select length*width as dimension from SpaceShip", resultSetMapping="scalar")</b></span></pre><p>&#26412;&#22320;&#26597;&#35810;&#20013;&#36824;&#26377;&#21478;&#22806;&#19968;&#20010;hint&#23646;&#24615;&#65306;
	  <tt class="literal">org.hibernate.callable</tt>.
	  &#36825;&#20010;&#23646;&#24615;&#30340;&#24067;&#23572;&#21464;&#37327;&#20540;&#34920;&#26126;&#36825;&#20010;&#26597;&#35810;&#26159;&#21542;&#26159;&#19968;&#20010;&#23384;&#20648;&#36807;&#31243;.</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="entity-hibspec"></a>2.4.&nbsp;Hibernate&#29420;&#26377;&#30340;&#27880;&#35299;&#25193;&#23637;</h2></div></div><div></div></div><p>Hibernate 3.1 &#25552;&#20379;&#20102;&#22810;&#31181;&#38468;&#21152;&#30340;&#27880;&#35299;,&#36825;&#20123;&#27880;&#35299;&#21487;&#20197;&#19982;EJB3&#30340;&#23454;&#20307;&#28151;&#21512;/&#21305;&#37197;&#20351;&#29992;.
    &#20182;&#20204;&#34987;&#35774;&#35745;&#25104;EJB3&#27880;&#35299;&#30340;&#33258;&#28982;&#25193;&#23637;.</p><p>&#20026;&#20102;&#24378;&#21270;EJB3&#30340;&#33021;&#21147;,Hibernate&#25552;&#20379;&#20102;&#19982;&#20854;&#33258;&#36523;&#29305;&#24615;&#30456;&#21563;&#21512;&#30340;&#29305;&#27530;&#27880;&#35299;.
    <tt class="classname">org.hibernate.annotations</tt>&#21253;&#24050;&#21253;&#21547;&#20102;&#25152;&#26377;&#30340;&#36825;&#20123;&#27880;&#35299;&#25193;&#23637;.</p><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="entity-hibspec-entity"></a>2.4.1.&nbsp;&#23454;&#20307;</h3></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#22312;EJB3&#35268;&#33539;&#25152;&#33021;&#25552;&#20379;&#30340;&#33021;&#21147;&#20043;&#22806;,&#23601;Hibernate&#23545;&#23454;&#20307;&#25152;&#20570;&#30340;&#19968;&#20123;&#25805;&#20316;&#36827;&#34892;&#20248;&#21270;.</p><p><tt class="classname">@org.hibernate.annotations.Entity</tt>
      &#36861;&#21152;&#20102;&#21487;&#33021;&#38656;&#35201;&#30340;&#39069;&#22806;&#30340;&#20803;&#25968;&#25454;,
      &#32780;&#36825;&#20123;&#20803;&#25968;&#25454;&#36229;&#20986;&#20102;&#26631;&#20934;<tt class="literal">@Entity</tt> &#20013;&#25152;&#23450;&#20041;&#30340;&#20803;&#25968;&#25454;. 
		</p><div class="itemizedlist"><ul type="disc"><li>
             mutable: &#27492;&#23454;&#20307;&#26159;&#21542;&#20026;&#21487;&#21464;&#30340;
          </li><li>
             dynamicInsert: &#29992;&#21160;&#24577;SQL&#26032;&#22686;
          </li><li>
             dynamicUpdate: &#29992;&#21160;&#24577;SQL&#26356;&#26032;
          </li><li>
             selectBeforeUpdate: &#25351;&#26126;Hibernate&#20174;&#19981;&#36816;&#34892;SQL UPDATE&#38500;&#38750;&#33021;&#30830;&#23450;&#23545;&#35937;&#30340;&#30830;&#24050;&#34987;&#20462;&#25913;
          </li><li>
             polymorphism: (&#25351;&#20986;)&#23454;&#20307;&#22810;&#24577;&#26159;PolymorphismType.IMPLICIT(&#40664;&#35748;)&#36824;&#26159;PolymorphismType.EXPLICIT 
		  </li><li>
             persister:&#20801;&#35768;&#23545;&#40664;&#35748;&#25345;&#20037;&#23454;&#29616;(persister implementation)&#30340;&#35206;&#30422;
		  </li><li>
             optimisticLock: &#20048;&#35266;&#38145;&#31574;&#30053;(OptimisticLockType.VERSION, OptimisticLockType.NONE, OptimisticLockType.DIRTY&#25110;OptimisticLockType.ALL)
          </li></ul></div><p>
	  </p><p>
		</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>
				@javax.persistence.Entity&#20173;&#26159;&#24517;&#36873;&#30340;(mandatory),
				@org.hibernate.annotations.Entity&#19981;&#26159;&#21462;&#20195;&#21697;.
			</p></div><p>
	  </p><p>&#20197;&#19979;&#26159;&#19968;&#20123;&#38468;&#21152;&#30340;Hibernate&#27880;&#35299;&#25193;&#23637;&#65306;</p><p><tt class="literal">@org.hibernate.annotations.BatchSize</tt> 
		&#20801;&#35768;&#20320;&#23450;&#20041;&#25209;&#37327;&#33719;&#21462;&#35813;&#23454;&#20307;&#30340;&#23454;&#20363;&#25968;&#37327;(&#22914;&#65306;<tt class="literal">@BatchSize(size=4)</tt>).
      &#24403;&#21152;&#36733;&#19968;&#29305;&#23450;&#30340;&#23454;&#20307;&#26102;,Hibernate&#23558;&#21152;&#36733;&#22312;&#25345;&#20037;&#19978;&#19979;&#25991;&#20013;&#26410;&#32463;&#21021;&#22987;&#21270;&#30340;&#21516;&#31867;&#22411;&#23454;&#20307;,&#30452;&#33267;&#25209;&#37327;&#25968;&#37327;(&#19978;&#38480;).</p><p><tt class="literal">@org.hibernate.annotations.Proxy</tt>
      &#23450;&#20041;&#20102;&#23454;&#20307;&#30340;&#24310;&#36831;&#23646;&#24615;.Lazy(&#40664;&#35748;&#20026;true)&#23450;&#20041;&#20102;&#31867;&#26159;&#21542;&#20026;&#24310;&#36831;(&#21152;&#36733;).
      proxyClassName&#26159;&#29992;&#26469;&#29983;&#25104;&#20195;&#29702;&#30340;&#25509;&#21475;(&#40664;&#35748;&#20026;&#35813;&#31867;&#26412;&#36523;).</p><p><tt class="literal">@org.hibernate.annotations.Where</tt>
		&#23450;&#20041;&#20102;&#24403;&#33719;&#21462;&#31867;&#23454;&#20363;&#26102;&#25152;&#29992;&#30340;SQL WHERE&#23376;&#21477;(&#35813;SQL WHERE&#23376;&#21477;&#20026;&#21487;&#36873;).</p><p><tt class="literal">@org.hibernate.annotations.Check</tt>
      &#23450;&#20041;&#20102;&#22312;DDL&#35821;&#21477;&#20013;&#23450;&#20041;&#30340;&#21512;&#27861;&#24615;&#26816;&#26597;&#32422;&#26463;(&#35813;&#32422;&#26463;&#20026;&#21487;&#36873;).</p><p><tt class="literal">@OnDelete(action=OnDeleteAction.CASCADE)</tt>
      &#23450;&#20041;&#20110;&#34987;&#36830;&#25509;&#30340;&#23376;&#31867;(joined subclass)&#65306;&#22312;&#21024;&#38500;&#26102;&#20351;&#29992;SQL&#32423;&#36830;&#21024;&#38500;,&#32780;&#38750;&#36890;&#24120;&#30340;Hibernate&#21024;&#38500;&#26426;&#21046;.</p><p><tt class="literal">@Table(name="tableName", indexes = {
      @Index(name="index1", columnNames={"column1", "column2"} ) } )</tt>
	  &#22312;<tt class="literal">tableName</tt>&#34920;&#30340;&#21015;&#19978;&#21019;&#24314;&#23450;&#20041;&#22909;&#30340;&#32034;&#24341;.
	  &#35813;&#27880;&#35299;&#21487;&#20197;&#34987;&#24212;&#29992;&#20110;&#20851;&#38190;&#34920;&#25110;&#32773;&#26159;&#20854;&#20182;&#27425;&#35201;&#30340;&#34920;.
      <tt class="literal">@Tables</tt> &#27880;&#35299;&#20801;&#35768;&#20320;&#22312;&#19981;&#21516;&#30340;&#34920;&#19978;&#24212;&#29992;&#32034;&#24341;.
      &#27492;&#27880;&#35299;&#39044;&#26399;&#22312;&#20351;&#29992;
      <tt class="literal">@javax.persistence.Table</tt>&#25110;
      <tt class="literal">@javax.persistence.SecondaryTable</tt>&#30340;&#22320;&#26041;&#20013;&#20986;&#29616;.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>
		<tt class="literal">@org.hibernate.annotations.Table</tt> &#26159;&#23545;
        <tt class="literal">@javax.persistence.Table</tt>&#30340;&#34917;&#20805;&#32780;&#19981;&#26159;&#23427;&#30340;&#26367;&#20195;&#21697;.
		&#29305;&#21035;&#26159;&#24403;&#20320;&#25171;&#31639;&#25913;&#21464;&#34920;&#21517;&#30340;&#40664;&#35748;&#20540;&#30340;&#26102;&#20505;&#65292;&#20320;&#24517;&#39035;&#20351;&#29992;<tt class="literal">@javax.persistence.Table</tt>,
		&#32780;&#19981;&#26159;<tt class="literal">@org.hibernate.annotations.Table</tt>.</p></div><pre class="programlisting">@Entity
@BatchSize(size=5)
@org.hibernate.annotations.Entity(
        selectBeforeUpdate = true,
        dynamicInsert = true, dynamicUpdate = true,
        optimisticLock = OptimisticLockType.ALL,
        polymorphism = PolymorphismType.EXPLICIT)
@Where(clause="1=1")
@org.hibernate.annotations.Table(name="Forest", indexes = { @Index(name="idx", columnNames = { "name", "length" } ) } )
public class Forest { ... }</pre><pre class="programlisting">@Entity
@Inheritance(
    strategy=InheritanceType.JOINED
)
public class Vegetable { ... }

@Entity
@OnDelete(action=OnDeleteAction.CASCADE)
public class Carrot extends Vegetable { ... }</pre></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2195"></a>2.4.2.&nbsp;&#26631;&#35782;&#31526;</h3></div></div><div></div></div><p><tt class="literal"><tt class="literal">@org.hibernate.annotations.GenericGenerator</tt>
      &#20801;&#35768;&#20320;&#23450;&#20041;&#19968;&#20010;Hibernate&#29305;&#23450;&#30340;id&#29983;&#25104;&#22120;.</tt></p><pre class="programlisting">@Id @GeneratedValue(generator="system-uuid")
@GenericGenerator(name="system-uuid", strategy = "uuid")
public String getId() {

@Id @GeneratedValue(generator="hibseq")
@GenericGenerator(name="hibseq", strategy = "seqhilo",
    parameters = {
        @Parameter(name="max_lo", value = "5"),
        @Parameter(name="sequence", value="heybabyhey")
    }
)
public Integer getId() {</pre><p><tt class="literal">strategy</tt>&#21487;&#20197;&#26159;Hibernate3&#29983;&#25104;&#22120;&#31574;&#30053;&#30340;&#31616;&#31216;,
	&#25110;&#32773;&#26159;&#19968;&#20010;<tt class="classname">IdentifierGenerator</tt>&#23454;&#29616;&#30340;(&#24102;&#21253;&#36335;&#24452;&#30340;)&#20840;&#38480;&#23450;&#31867;&#21517;.
	&#20320;&#21487;&#20197;&#36890;&#36807;<tt class="literal">parameters</tt>&#23646;&#24615;&#22686;&#21152;&#19968;&#20123;&#21442;&#25968;.</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="entity-hibspec-property"></a>2.4.3.&nbsp;&#23646;&#24615;</h3></div></div><div></div></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2219"></a>2.4.3.1.&nbsp;&#35775;&#38382;&#31867;&#22411;</h4></div></div><div></div></div><p>&#35775;&#38382;&#31867;&#22411;&#26159;&#26681;&#25454;<tt class="literal">@Id</tt>&#25110;<tt class="literal">@EmbeddedId</tt>
	&#22312;&#23454;&#20307;&#32487;&#25215;&#23618;&#27425;&#20013;&#25152;&#22788;&#30340;&#20301;&#32622;&#25512;&#28436;&#32780;&#24471;&#30340;.&#23376;&#23454;&#20307;(Sub-entities),
	&#20869;&#23884;&#23545;&#35937;&#21644;&#34987;&#26144;&#23556;&#30340;&#29238;&#31867;&#22343;&#32487;&#25215;&#20102;&#26681;&#23454;&#20307;(root entity)&#30340;&#35775;&#38382;&#31867;&#22411;.</p><p>&#22312;Hibernate&#20013;,&#20320;&#21487;&#20197;&#25226;&#35775;&#38382;&#31867;&#22411;&#35206;&#30422;&#25104;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;&#23450;&#21046;&#30340;&#35775;&#38382;&#31867;&#22411;&#31574;&#30053;</p></li><li><p>&#20248;&#21270;&#31867;&#32423;&#25110;&#23646;&#24615;&#32423;&#30340;&#35775;&#38382;&#31867;&#22411;</p></li></ul></div><p>&#20026;&#25903;&#25345;&#36825;&#31181;&#34892;&#20026;,Hibernate&#24341;&#20837;&#20102;@AccessType&#27880;&#35299;.&#20320;&#21487;&#20197;&#23545;&#20197;&#19979;&#20803;&#32032;&#23450;&#20041;&#35775;&#38382;&#31867;&#22411;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23454;&#20307;</p></li><li><p>&#29238;&#31867;</p></li><li><p>&#21487;&#20869;&#23884;&#30340;&#23545;&#35937;</p></li><li><p>&#23646;&#24615;</p></li></ul></div><p>&#34987;&#27880;&#35299;&#20803;&#32032;&#30340;&#35775;&#38382;&#31867;&#22411;&#20250;&#34987;&#35206;&#30422;,&#33509;&#35206;&#30422;&#26159;&#22312;&#31867;&#19968;&#32423;&#19978;,&#21017;&#25152;&#26377;&#30340;&#23646;&#24615;&#32487;&#25215;&#35775;&#38382;&#31867;&#22411;.
		&#23545;&#20110;&#26681;&#23454;&#20307;,&#20854;&#35775;&#38382;&#31867;&#22411;&#20250;&#34987;&#35748;&#20026;&#26159;&#25972;&#20010;&#32487;&#25215;&#23618;&#27425;&#20013;&#30340;&#32570;&#30465;&#35774;&#32622;(&#21487;&#22312;&#31867;&#25110;&#23646;&#24615;&#19968;&#32423;&#35206;&#30422;).</p><p>&#33509;&#35775;&#38382;&#31867;&#22411;&#34987;&#26631;&#20197;"property",&#21017;Hibernate&#20250;&#25195;&#25551;getter&#26041;&#27861;&#30340;&#27880;&#35299;,&#33509;&#35775;&#38382;&#31867;&#22411;&#34987;&#26631;&#20197;"field",
		&#21017;&#25195;&#25551;&#23383;&#27573;&#30340;&#27880;&#35299;.&#21542;&#21017;,&#25195;&#25551;&#26631;&#20026;@Id&#25110;@embeddedId&#30340;&#20803;&#32032;.</p><p>&#20320;&#21487;&#20197;&#35206;&#30422;&#26576;&#20010;&#23646;&#24615;(property)&#30340;&#35775;&#38382;&#31867;&#22411;,&#20294;&#26159;&#21463;&#27880;&#35299;&#30340;&#20803;&#32032;&#23558;&#19981;&#21463;&#24433;&#21709;&#65306;
			&#20363;&#22914;&#19968;&#20010;&#20855;&#26377;field&#35775;&#38382;&#31867;&#22411;&#30340;&#23454;&#20307;,(&#25105;&#20204;)&#21487;&#20197;&#23558;&#26576;&#20010;&#23383;&#27573;&#26631;&#27880;&#20026; @AccessType("property"),
			&#21017;&#35813;&#23383;&#27573;&#30340;&#35775;&#38382;&#31867;&#22411;&#38543;&#20043;&#23558;&#25104;&#20026;property,&#20294;&#26159;&#20854;&#20182;&#23383;&#27573;&#19978;&#20381;&#28982;&#38656;&#35201;&#25658;&#24102;&#27880;&#35299;.</p><p>&#33509;&#29238;&#31867;&#25110;&#21487;&#20869;&#23884;&#30340;&#23545;&#35937;&#27809;&#26377;&#34987;&#27880;&#35299;,&#21017;&#20351;&#29992;&#26681;&#23454;&#20307;&#30340;&#35775;&#38382;&#31867;&#22411;(&#21363;&#20351;&#24050;&#32463;&#22312;&#38750;&#30452;&#31995;&#29238;&#31867;&#25110;&#21487;&#20869;&#23884;&#23545;&#35937;&#19978;&#23450;&#20041;&#20102;&#35775;&#38382;&#31867;&#22411;).
			&#27492;&#26102;&#20420;&#32599;&#26031;&#22871;&#23043;(Russian doll)&#21407;&#29702;&#23601;&#19981;&#20877;&#36866;&#29992;.(&#35793;&#27880;&#65306;&#20420;&#32599;&#26031;&#22871;&#23043;(&#1084;&#1072;&#1090;&#1088;&#1105;&#1096;&#1082;&#1072;&#25110; &#1084;&#1072;&#1090;&#1088;&#1077;&#1096;&#1082;&#1072;)&#26159;&#20420;&#32599;&#26031;&#29305;&#20135;&#26408;&#21046;&#29609;&#20855;,
			&#19968;&#33324;&#30001;&#22810;&#20010;&#19968;&#26679;&#22270;&#26696;&#30340;&#31354;&#24515;&#26408;&#23043;&#23043;&#19968;&#20010;&#22871;&#19968;&#20010;&#32452;&#25104;,&#26368;&#22810;&#21487;&#36798;&#21313;&#22810;&#20010;,&#36890;&#24120;&#20026;&#22278;&#26609;&#24418;,&#24213;&#37096;&#24179;&#22374;&#21487;&#20197;&#30452;&#31435;.)</p><pre class="programlisting">@Entity
public class Person implements Serializable {
    @Id  @GeneratedValue //access type field
    Integer id;

    @Embedded
    @AttributeOverrides({
    @AttributeOverride(name = "iso2", column = @Column(name = "bornIso2")),
    @AttributeOverride(name = "name", column = @Column(name = "bornCountryName"))
            })
    Country bornIn;
}

@Embeddable
<span class="bold"><b>@AccessType("property")</b></span> //override access type for all properties in Country
public class Country implements Serializable {
    private String iso2;
    private String name;

    public String getIso2() {
        return iso2;
    }

    public void setIso2(String iso2) {
        this.iso2 = iso2;
    }

    @Column(name = "countryName")
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
</pre></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2267"></a>2.4.3.2.&nbsp;&#20844;&#24335;</h4></div></div><div></div></div><p>&#26377;&#26102;&#20505;,&#20320;&#24819;&#35753;&#25968;&#25454;&#24211;,&#32780;&#38750;JVM,&#26469;&#26367;&#20320;&#23436;&#25104;&#19968;&#20123;&#35745;&#31639;,&#20063;&#21487;&#33021;&#24819;&#21019;&#24314;&#26576;&#31181;&#34394;&#25311;&#21015;.
		&#20320;&#21487;&#20197;&#20351;&#29992;SQL&#29255;&#27573;(&#20134;&#31216;&#20026;&#20844;&#24335;),&#32780;&#19981;&#26159;&#23558;&#23646;&#24615;&#26144;&#23556;&#21040;(&#29289;&#29702;)&#21015;. &#36825;&#31181;&#23646;&#24615;&#26159;&#21482;&#35835;&#30340;(&#23646;&#24615;&#20540;&#30001;&#20844;&#27714;&#24471;).</p><pre class="programlisting">@Formula("obj_length * obj_height * obj_width")
		public long getObjectVolume()</pre><p>SQL&#29255;&#27573;&#21487;&#20197;&#26159;&#20219;&#24847;&#22797;&#26434;&#30340;,&#29978;&#33267;&#21487;&#21253;&#21547;&#23376;&#26597;&#35810;.</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2276"></a>2.4.3.3.&nbsp;&#31867;&#22411;</h4></div></div><div></div></div><p><tt class="literal">@org.hibernate.annotations.Type</tt>
		&#35206;&#30422;&#20102;Hibernate&#25152;&#29992;&#30340;&#40664;&#35748;&#31867;&#22411;&#65306;&#36825;&#36890;&#24120;&#19981;&#26159;&#24517;&#39035;&#30340;,&#22240;&#20026;&#31867;&#22411;&#21487;&#20197;&#30001;Hibernate&#27491;&#30830;&#25512;&#24471;.
		&#20851;&#20110;Hibernate&#31867;&#22411;&#30340;&#35814;&#32454;&#20449;&#24687;,&#35831;&#21442;&#32771;Hibernate&#20351;&#29992;&#25163;&#20876;.</p><p><tt class="literal">@org.hibernate.annotations.TypeDef</tt> &#21644;
		 <tt class="literal">@org.hibernate.annotations.TypeDefs</tt>&#20801;&#35768;&#20320;&#26469;&#22768;&#26126;&#31867;&#22411;&#23450;&#20041;.
		&#36825;&#20123;&#27880;&#35299;&#34987;&#32622;&#20110;&#31867;&#25110;&#21253;&#19968;&#32423;.&#27880;&#24847;,&#23545;session factory&#26469;&#35828;,
		&#36825;&#20123;&#23450;&#20041;&#23558;&#26159;&#20840;&#23616;&#30340;(&#21363;&#20351;&#23450;&#20041;&#20110;&#31867;&#19968;&#32423;),&#24182;&#19988;&#31867;&#22411;&#23450;&#20041;&#24517;&#39035;&#20808;&#20110;&#20219;&#20309;&#20351;&#29992;.</p><pre class="programlisting">@TypeDefs(
    {
    @TypeDef(
        name="caster",
        typeClass = CasterStringType.class,
        parameters = {
            @Parameter(name="cast", value="lower")
        }
    )
    }
)
package org.hibernate.test.annotations.entity;

...
public class Forest {
    @Type(type="caster")
    public String getSmallText() {
    ...
}
         </pre><p>&#24403;&#20351;&#29992;&#32452;&#21512;&#30340;&#29992;&#25143;&#33258;&#23450;&#20041;&#31867;&#22411;&#26102;,&#20320;&#24517;&#39035;&#33258;&#24049;&#34920;&#31034;&#21015;&#30340;&#23450;&#20041;.
<tt class="literal">@Columns</tt>&#23601;&#26159;&#20026;&#20102;&#27492;&#30446;&#30340;&#32780;&#24341;&#20837;&#30340;.</p><pre class="programlisting">@Type(type="org.hibernate.test.annotations.entity.MonetaryAmountUserType")
@Columns(columns = {
    @Column(name="r_amount"),
    @Column(name="r_currency")
})
public MonetaryAmount getAmount() {
    return amount;
}


public class MonetaryAmount implements Serializable {
    private BigDecimal amount;
    private Currency currency;
    ...
}</pre></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2299"></a>2.4.3.4.&nbsp;&#32034;&#24341;</h4></div></div><div></div></div><p>&#36890;&#36807;&#22312;&#21015;&#23646;&#24615;(property)&#19978;&#20351;&#29992;<tt class="literal">@Index</tt>&#27880;&#35299;,
		&#21487;&#20197;&#22312;&#29305;&#23450;&#21015;&#19978;&#23450;&#20041;&#32034;&#24341;,columnNames&#23646;&#24615;(attribute)&#23558;&#38543;&#20043;&#34987;&#24573;&#30053;.</p><pre class="programlisting">@Column(secondaryTable="Cat1")
@Index(name="story1index")
public String getStoryPart1() {
    return storyPart1;
}</pre></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2309"></a>2.4.3.5.&nbsp;@Parent</h4></div></div><div></div></div><p>&#22312;&#23884;&#20837;&#24335;&#23545;&#35937;&#20869;&#37096;,&#20320;&#21487;&#20197;&#22312;&#37027;&#20123;&#25351;&#21521;&#35813;&#23884;&#20837;&#24335;&#23545;&#35937;&#25152;&#23646;&#20803;&#32032;&#30340;&#23646;&#24615;&#19978;&#23450;&#20041;&#35813;&#27880;&#35299;.</p><pre class="programlisting">@Entity
public class Person {
    @Embeddable public Address address;
    ...
}

@Embeddable
public class Address {
    @Parent public Person owner;
    ...
}


person == person.address.owner</pre></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2316"></a>2.4.3.6.&nbsp;&#29983;&#25104;&#30340;&#23646;&#24615;</h4></div></div><div></div></div><p>
		&#26576;&#20123;&#23646;&#24615;&#21487;&#20197;&#22312;&#23545;&#25968;&#25454;&#24211;&#20570;&#25554;&#20837;&#25110;&#26356;&#26032;&#25805;&#20316;&#30340;&#26102;&#20505;&#29983;&#25104;.
		Hibernate&#33021;&#22815;&#22788;&#29702;&#36825;&#26679;&#30340;&#23646;&#24615;,&#24182;&#35302;&#21457;&#19968;&#20010;&#21518;&#32493;&#30340;&#26597;&#35810;&#26469;&#35835;&#21462;&#36825;&#20123;&#23646;&#24615;.
		</p><pre class="programlisting">@Entity
public class Antenna {
    @Id public Integer id;
    @Generated(GenerationTime.ALWAYS) @Column(insertable = false, updatable = false)
    public String longitude;

    @Generated(GenerationTime.INSERT) @Column(insertable = false)
    public String latitude;
}</pre><p>
		&#20320;&#21487;&#20197;&#23558;&#23646;&#24615;&#27880;&#35299;&#20026;<tt class="literal">@Generated</tt>.
		&#20294;&#26159;&#20320;&#35201;&#27880;&#24847;insertability&#21644;updatability&#19981;&#35201;&#21644;&#20320;&#36873;&#25321;&#30340;&#29983;&#25104;&#31574;&#30053;&#20914;&#31361;.
		&#22914;&#26524;&#36873;&#25321;&#20102;GenerationTime.INSERT,&#35813;&#23646;&#24615;&#19981;&#33021;&#21253;&#21547;insertable&#21015;,
		&#22914;&#26524;&#36873;&#25321;&#20102;GenerationTime.ALWAYS,&#35813;&#23646;&#24615;&#19981;&#33021;&#21253;&#21547;insertable&#21644;updatable&#21015;.</p><p><tt class="literal">@Version</tt>&#23646;&#24615;&#19981;&#21487;&#20197;&#20026;
        <tt class="literal">@Generated(INSERT)</tt>(&#35774;&#35745;&#26102;), &#21482;&#33021;&#26159;
        <tt class="literal">NEVER</tt>&#25110;<tt class="literal">ALWAYS</tt>.</p></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2341"></a>2.4.4.&nbsp;&#32487;&#25215;</h3></div></div><div></div></div><p>SINGLE_TABLE &#26159;&#20010;&#21151;&#33021;&#24378;&#22823;&#30340;&#31574;&#30053;,&#20294;&#26377;&#26102;,&#29305;&#21035;&#23545;&#36951;&#30041;&#31995;&#32479;&#32780;&#35328;,
		&#26159;&#26080;&#27861;&#21152;&#20837;&#19968;&#20010;&#39069;&#22806;&#30340;&#36776;&#21035;&#31526;&#21015;.
		&#30001;&#27492;,Hibernate&#24341;&#20837;&#20102;&#36776;&#21035;&#31526;&#20844;&#24335;(discriminator formula)&#30340;&#27010;&#24565;&#65306;
		<tt class="literal">@DiscriminatorFormula</tt>&#26159;<tt class="literal">@DiscriminatorColumn</tt>&#30340;&#26367;&#20195;&#21697;,
		&#23427;&#20351;&#29992;SQL&#29255;&#27573;&#20316;&#20026;&#36776;&#21035;&#31526;&#35299;&#20915;&#26041;&#26696;&#30340;&#20844;&#24335;( &#19981;&#38656;&#35201;&#26377;&#19968;&#20010;&#19987;&#38376;&#30340;&#23383;&#27573;).</p><pre class="programlisting">@Entity
@DiscriminatorForumla("case when forest_type is null then 0 else forest_type end")
public class Forest { ... }</pre></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2354"></a>2.4.5.&nbsp;&#20851;&#20110;&#21333;&#20010;&#20851;&#32852;&#20851;&#31995;&#30340;&#27880;&#35299;</h3></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;,&#24403;&#39044;&#26399;&#30340;&#34987;&#20851;&#32852;&#20803;&#32032;&#19981;&#22312;&#25968;&#25454;&#24211;&#20013;(&#20851;&#20046;&#20851;&#32852;&#21015;&#30340;&#38169;&#35823;id),&#33268;&#20351;Hiberante&#26080;&#27861;&#35299;&#20915;&#20851;&#32852;&#24615;&#38382;&#39064;&#26102;,Hibernate&#23601;&#20250;&#25243;&#20986;&#24322;&#24120;.
      &#36825;&#23545;&#36951;&#30041;schema&#21644;&#21382;&#32463;&#25305;&#21155;&#32500;&#25252;&#30340;schema&#32780;&#35328;,&#36825;&#25110;&#26377;&#35768;&#22810;&#19981;&#20415;.
      &#27492;&#26102;,&#20320;&#21487;&#29992; <tt class="literal">@NotFound </tt>&#27880;&#35299;&#35753;Hibernate&#30053;&#36807;&#36825;&#26679;&#30340;&#20803;&#32032;&#32780;&#19981;&#26159;&#25243;&#20986;&#24322;&#24120;.
      &#35813;&#27880;&#35299;&#21487;&#29992;&#20110; <tt class="literal">@OneToOne </tt> (&#26377;&#22806;&#38190;)&#12289; <tt class="literal">@ManyToOne </tt>&#12289;  
      <tt class="literal">@OneToMany </tt> &#25110; <tt class="literal">@ManyToMany </tt>&#20851;&#32852;.</p><pre class="programlisting">@Entity
public class Child {
    ...
    @ManyToOne
    @NotFound(action=NotFoundAction.IGNORE)
    public Parent getParent() { ... }
    ...
}</pre><p>
	  &#26377;&#26102;&#20505;&#21024;&#38500;&#26576;&#23454;&#20307;&#30340;&#26102;&#20505;&#38656;&#35201;&#35302;&#21457;&#25968;&#25454;&#24211;&#30340;&#32423;&#32852;&#21024;&#38500;.</p><pre class="programlisting">@Entity
public class Child {
    ...
    @ManyToOne
    @OnDelete(action=OnDeleteAction.CASCADE)
    public Parent getParent() { ... }
    ...
}</pre><p>&#19978;&#38754;&#36825;&#20010;&#20363;&#23376;&#20013;,Hibernate&#23558;&#29983;&#25104;&#19968;&#20010;&#25968;&#25454;&#24211;&#32423;&#30340;&#32423;&#32852;&#21024;&#38500;&#32422;&#26463;.</p><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2382"></a>2.4.5.1.&nbsp;&#24310;&#36831;&#36873;&#39033;&#21644;&#33719;&#21462;&#27169;&#24335;</h4></div></div><div></div></div><p>
		EJB3&#20026;&#24310;&#36831;&#21152;&#36733;&#21644;&#33719;&#21462;&#27169;&#24335;&#25552;&#20379;&#20102;<tt class="literal">fetch</tt>&#36873;&#39033;,&#32780;Hibernate
		&#36825;&#26041;&#38754;&#25552;&#20379;&#20102;&#26356;&#20016;&#23500;&#30340;&#36873;&#39033;&#38598;.&#20026;&#20102;&#26356;&#22909;&#30340;&#35843;&#25972;&#24310;&#36831;&#21152;&#36733;&#21644;&#33719;&#21462;&#31574;&#30053;,Hibernate&#24341;&#20837;&#20102;
		&#19968;&#20123;&#38468;&#21152;&#30340;&#27880;&#35299;:</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">@LazyToOne</tt>: &#23450;&#20041;&#20102;
             <tt class="literal">@ManyToOne</tt> &#21644; <tt class="literal">@OneToOne</tt>
            &#20851;&#32852;&#30340;&#24310;&#36831;&#36873;&#39033;. <tt class="literal">LazyToOneOption</tt> &#21487;&#20197;&#26159;
            <tt class="literal">PROXY</tt> (&#20363;&#22914;:&#22522;&#20110;&#20195;&#29702;&#30340;&#24310;&#36831;&#21152;&#36733;),
            <tt class="literal">NO_PROXY</tt> (&#20363;&#22914;:&#22522;&#20110;&#23383;&#33410;&#30721;&#22686;&#24378;&#30340;&#24310;&#36831;&#21152;&#36733; - &#27880;&#24847;&#38656;&#35201;&#22312;&#26500;&#24314;&#26399;&#22788;&#29702;&#23383;&#33410;&#30721;)
            &#21644; <tt class="literal">FALSE</tt> (&#38750;&#24310;&#36831;&#21152;&#36733;&#30340;&#20851;&#32852;)</p></li><li><p><tt class="literal">@LazyCollection</tt>: &#23450;&#20041;&#20102;
            <tt class="literal">@ManyToMany</tt>&#21644;
            <tt class="literal">@OneToMany</tt>  &#20851;&#32852;&#30340;&#24310;&#36831;&#36873;&#39033;. LazyCollectionOption
            &#21487;&#20197;&#26159;<tt class="literal">TRUE</tt> (&#38598;&#21512;&#20855;&#26377;&#24310;&#36831;&#24615;,&#21482;&#26377;&#22312;&#35775;&#38382;&#30340;&#26102;&#20505;&#25165;&#21152;&#36733;), 
			<tt class="literal">EXTRA</tt> (&#38598;&#21512;&#20855;&#26377;&#24310;&#36831;&#24615;,&#24182;&#19988;&#25152;&#26377;&#30340;&#25805;&#20316;&#37117;&#20250;&#23613;&#37327;&#36991;&#20813;&#21152;&#36733;&#38598;&#21512;,
			&#23545;&#20110;&#19968;&#20010;&#24040;&#22823;&#30340;&#38598;&#21512;&#29305;&#21035;&#26377;&#29992;,&#22240;&#20026;&#36825;&#26679;&#30340;&#38598;&#21512;&#20013;&#30340;&#20803;&#32032;&#27809;&#26377;&#24517;&#35201;&#20840;&#37096;&#21152;&#36733;)&#21644; FALSE
            (&#38750;&#24310;&#36831;&#21152;&#36733;&#30340;&#20851;&#32852;)</p></li><li><p><tt class="literal">@Fetch</tt>: 
			&#23450;&#20041;&#20102;&#21152;&#36733;&#20851;&#32852;&#20851;&#31995;&#30340;&#33719;&#21462;&#31574;&#30053;. <tt class="literal">FetchMode</tt> &#21487;&#20197;&#26159;
            <tt class="literal">SELECT</tt> (&#22312;&#38656;&#35201;&#21152;&#36733;&#20851;&#32852;&#30340;&#26102;&#20505;&#35302;&#21457;select&#25805;&#20316;), 
			<tt class="literal">SUBSELECT</tt>
            (&#21482;&#23545;&#38598;&#21512;&#26377;&#25928;,&#20351;&#29992;&#20102;&#23376;&#26597;&#35810;&#31574;&#30053;,&#35814;&#24773;&#21442;&#32771;Hibernate&#21442;&#32771;&#25991;&#26723;) or 
			<tt class="literal">JOIN</tt> (&#22312;&#21152;&#36733;&#20027;&#23454;&#20307;(owner entity)&#30340;&#26102;&#20505;&#20351;&#29992;SQL JOIN&#26469;&#21152;&#36733;&#20851;&#32852;&#20851;&#31995;).
            <tt class="literal">JOIN</tt> &#23558;&#35206;&#20889;&#20219;&#20309;&#24310;&#36831;&#23646;&#24615; 
			(&#36890;&#36807;<tt class="literal">JOIN</tt>&#31574;&#30053;&#21152;&#36733;&#30340;&#20851;&#32852;&#23558;&#19981;&#20877;&#20855;&#26377;&#24310;&#36831;&#24615;).</p></li></ul></div><p>The Hibernate annotations overrides the EJB3 fetching
        options.</p><p>Hibernate&#27880;&#35299;&#35206;&#20889;&#20102;EJB3&#25552;&#20379;&#30340;&#33719;&#21462;(fetch)&#36873;&#39033;.</p><div class="table"><a name="d0e2458"></a><p class="title"><b>&#34920;&nbsp;2.3.&nbsp;&#24310;&#36831;&#21644;&#33719;&#21462;&#36873;&#39033;&#30340;&#31561;&#25928;&#27880;&#35299;</b></p><table summary="&#24310;&#36831;&#21644;&#33719;&#21462;&#36873;&#39033;&#30340;&#31561;&#25928;&#27880;&#35299;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Annotations</th><th>Lazy</th><th>Fetch</th></tr></thead><tbody><tr><td>@[One|Many]ToOne](fetch=FetchType.LAZY)</td><td>@LazyToOne(PROXY)</td><td>@Fetch(SELECT)</td></tr><tr><td>@[One|Many]ToOne](fetch=FetchType.EAGER)</td><td>@LazyToOne(FALSE)</td><td>@Fetch(JOIN)</td></tr><tr><td>@ManyTo[One|Many](fetch=FetchType.LAZY)</td><td>@LazyCollection(TRUE)</td><td>@Fetch(SELECT)</td></tr><tr><td>@ManyTo[One|Many](fetch=FetchType.EAGER)</td><td>@LazyCollection(FALSE)</td><td>@Fetch(JOIN)</td></tr></tbody></table></div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="entity-hibspec-collection"></a>2.4.6.&nbsp;&#20851;&#20110;&#38598;&#21512;&#31867;&#22411;&#30340;&#27880;&#35299;</h3></div></div><div></div></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2502"></a>2.4.6.1.&nbsp;&#21442;&#25968;&#27880;&#35299;</h4></div></div><div></div></div><p>&#20197;&#19979;&#26159;&#21487;&#33021;&#30340;&#35774;&#32622;&#26041;&#24335;</p><div class="itemizedlist"><ul type="disc"><li>
               &#29992;@BatchSizebatch&#35774;&#32622;&#38598;&#21512;&#30340;batch&#22823;&#23567; 
            </li><li>
               &#29992;@Where&#27880;&#35299;&#35774;&#32622;Where&#23376;&#21477;
            </li><li>
               &#29992;&#27880;&#35299;@Check&#26469;&#35774;&#32622;check&#23376;&#21477;
            </li><li>
               &#29992;&#27880;&#35299;@OrderBy&#26469;&#35774;&#32622;SQL&#30340;order by&#23376;&#21477;
            </li><li>
               &#21033;&#29992;@OnDelete(action=OnDeleteAction.CASCADE) &#27880;&#35299;&#35774;&#32622;&#32423;&#36830;&#21024;&#38500;&#31574;&#30053;
            </li></ul></div><p>&#20320;&#20063;&#21487;&#20197;&#21033;&#29992;<tt class="literal">@Sort</tt>&#27880;&#35299;&#23450;&#20041;&#19968;&#20010;&#25490;&#24207;&#27604;&#36739;&#22120;(sort comparator),
		&#34920;&#26126;&#24076;&#26395;&#30340;&#27604;&#36739;&#22120;&#31867;&#22411;,&#26080;&#24207;&#12289;&#33258;&#28982;&#39034;&#24207;&#25110;&#33258;&#23450;&#20041;&#25490;&#24207;,&#19977;&#32773;&#25321;&#19968;.&#33509;&#20320;&#24819;&#29992;&#20320;&#33258;&#24049;&#23454;&#29616;&#30340;comparator,
		&#20320;&#36824;&#38656;&#35201;&#21033;&#29992;<tt class="literal">comparator</tt>&#23646;&#24615;(attribute)&#25351;&#26126;&#23454;&#29616;&#31867;.</p><pre class="programlisting">    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinColumn(name="CUST_ID")
    @Sort(type = SortType.COMPARATOR, comparator = TicketComparator.class)
    @Where(clause="1=1")
    @OnDelete(action=OnDeleteAction.CASCADE)
    public SortedSet&lt;Ticket&gt; getTickets() {
        return tickets;
    }</pre><p>&#20851;&#20110;&#36825;&#20123;&#27880;&#35299;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;,&#35831;&#21442;&#38405;&#27492;&#21069;&#30340;&#25551;&#36848;.</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2530"></a>2.4.6.2.&nbsp;&#26356;&#22810;&#30340;&#38598;&#21512;&#31867;&#22411;</h4></div></div><div></div></div><p>&#27604;EJB3&#26356;&#32988;&#19968;&#31609;&#30340;&#26159;,Hibernate Annotations&#25903;&#25345;&#30495;&#27491;&#30340;
			<tt class="classname">List</tt>&#21644;<tt class="classname">Array</tt>.
			&#26144;&#23556;&#38598;&#21512;&#30340;&#26041;&#24335;&#21644;&#20197;&#21069;&#23436;&#20840;&#19968;&#26679;,&#21482;&#19981;&#36807;&#35201;&#26032;&#22686;<tt class="literal">@IndexColumn</tt>&#27880;&#35299;.
			&#35813;&#27880;&#35299;&#20801;&#35768;&#20320;&#25351;&#26126;&#23384;&#25918;&#32034;&#24341;&#20540;&#30340;&#23383;&#27573;.&#20320;&#36824;&#21487;&#20197;&#23450;&#20041;&#20195;&#34920;&#25968;&#25454;&#24211;&#20013;&#39318;&#20010;&#20803;&#32032;&#30340;&#32034;&#24341;&#20540;(&#20134;&#31216;&#20026;&#32034;&#24341;&#22522;&#25968;).
			&#24120;&#35265;&#21462;&#20540;&#20026;<tt class="literal">0</tt>&#25110;<tt class="literal">1</tt>.</p><pre class="programlisting">@OneToMany(cascade = CascadeType.ALL)
@IndexColumn(name = "drawer_position", base=1)
public List&lt;Drawer&gt; getDrawers() {
    return drawers;
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#20551;&#22914;&#20320;&#24536;&#20102;&#35774;&#32622;<tt class="literal">@IndexColumn</tt>,
			Hibernate&#20250;&#37319;&#29992;&#21253;(bag)&#35821;&#20041;(&#35793;&#27880;&#65306;&#21363;&#20801;&#35768;&#37325;&#22797;&#20803;&#32032;&#30340;&#26080;&#24207;&#38598;&#21512;).</p></div><p>Hibernate&#27880;&#35299;&#25903;&#25345;true Map&#26144;&#23556;,
		&#22914;&#26524;&#27809;&#26377;&#35774;&#32622;<tt class="literal">@javax.persistence.MapKey</tt>,
		hibernate&#23558;key&#20803;&#32032;&#25110;&#23884;&#20837;&#24335;&#23545;&#35937;&#30452;&#25509;&#26144;&#23556;&#21040;&#20182;&#20204;&#25152;&#23646;&#30340;&#21015;.
		&#35201;&#35206;&#20889;&#40664;&#35748;&#30340;&#21015;,&#21487;&#20197;&#20351;&#29992;&#20197;&#19979;&#27880;&#35299;:
		<tt class="literal">@org.hibernate.annotations.MapKey</tt>&#36866;&#29992;&#30340;key&#20026;&#22522;&#26412;&#31867;&#22411;&#25110;&#32773;&#23884;&#20837;&#24335;&#23545;&#35937;,
		<tt class="literal">@org.hibernate.annotations.MapKey</tt>&#36866;&#29992;&#30340;key&#20026;&#23454;&#20307;.
        </p><p>Hibernate Annotations&#36824;&#25903;&#25345;&#26680;&#24515;&#31867;&#22411;&#38598;&#21512;(Integer, String, Enums, ......)&#12289;
		&#21487;&#20869;&#23884;&#23545;&#35937;&#30340;&#38598;&#21512;,&#29978;&#33267;&#22522;&#26412;&#31867;&#22411;&#25968;&#32452;.&#36825;&#23601;&#26159;&#25152;&#35859;&#30340;&#20803;&#32032;&#38598;&#21512;.</p><p>&#20803;&#32032;&#38598;&#21512;&#21487;&#29992;@CollectionOfElements&#26469;&#27880;&#35299;(&#20316;&#20026;@OneToMany&#30340;&#26367;&#20195;).
		&#20026;&#20102;&#23450;&#20041;&#38598;&#21512;&#34920;(&#35793;&#27880;&#65306;&#21363;&#23384;&#25918;&#38598;&#21512;&#20803;&#32032;&#30340;&#34920;,&#19982;&#19979;&#38754;&#25552;&#21040;&#30340;&#20027;&#34920;&#23545;&#24212;),&#35201;&#22312;&#20851;&#32852;&#23646;&#24615;&#19978;&#20351;&#29992;@JoinTable&#27880;&#35299;,
		joinColumns&#23450;&#20041;&#20102;&#20171;&#20046;&#23454;&#20307;&#20027;&#34920;&#19982;&#38598;&#21512;&#34920;&#20043;&#38388;&#30340;&#36830;&#25509;&#23383;&#27573;(inverseJoincolumn&#26159;&#26080;&#25928;&#30340;&#19988;&#20854;&#20540;&#24212;&#20026;&#31354;).
		&#23545;&#20110;&#26680;&#24515;&#31867;&#22411;&#30340;&#38598;&#21512;&#25110;&#22522;&#26412;&#31867;&#22411;&#25968;&#32452;,&#20320;&#21487;&#20197;&#22312;&#20851;&#32852;&#23646;&#24615;&#19978;&#29992;<tt class="literal">@Column</tt>&#26469;&#35206;&#30422;&#23384;&#25918;&#20803;&#32032;&#20540;&#30340;&#23383;&#27573;&#30340;&#23450;&#20041;.
		&#20320;&#36824;&#21487;&#20197;&#29992;<tt class="literal">@AttributeOverride</tt>&#26469;&#35206;&#30422;&#23384;&#25918;&#21487;&#20869;&#23884;&#23545;&#35937;&#30340;&#23383;&#27573;&#30340;&#23450;&#20041;.
		&#35201;&#35775;&#38382;&#38598;&#21512;&#20803;&#32032;,&#38656;&#35201;&#23558;&#35813;&#27880;&#35299;&#30340;name&#23646;&#24615;&#20540;&#35774;&#32622;&#20026;"element"("element"&#29992;&#20110;&#26680;&#24515;&#31867;&#22411;,&#32780;"element.serial"
		&#29992;&#20110;&#23884;&#20837;&#24335;&#23545;&#35937;&#30340;serial&#23646;&#24615;).&#35201;&#35775;&#38382;&#38598;&#21512;&#30340;index/key,&#21017;&#23558;&#35813;&#27880;&#35299;&#30340;name&#23646;&#24615;&#20540;&#35774;&#32622;&#20026;"key".
		</p><pre class="programlisting">@Entity
public class Boy {
    private Integer id;
    private Set&lt;String&gt; nickNames = new HashSet&lt;String&gt;();
    private int[] favoriteNumbers;
    private Set&lt;Toy&gt; favoriteToys = new HashSet&lt;Toy&gt;();
    private Set&lt;Character&gt; characters = new HashSet&lt;Character&gt;();

    @Id @GeneratedValue
    public Integer getId() {
        return id;
    }

    <span class="bold"><b>@CollectionOfElements
    public Set&lt;String&gt;</b></span> getNickNames() {
        return nickNames;
    }

    <span class="bold"><b>@CollectionOfElements
    @JoinTable(
            table=@Table(name="BoyFavoriteNumbers"),
            joinColumns = @JoinColumn(name="BoyId")
    )
    @Column(name="favoriteNumber", nullable=false)</b></span>
    @IndexColumn(name="nbr_index")
    public int[] getFavoriteNumbers() {
        return favoriteNumbers;
    }

    <span class="bold"><b>@CollectionOfElements
    @AttributeOverride( name="element.serial", column=@Column(name="serial_nbr") )</b></span>
    public Set&lt;Toy&gt; getFavoriteToys() {
        return favoriteToys;
    }

    <span class="bold"><b>@CollectionOfElements
    public Set&lt;Character&gt;</b></span> getCharacters() {
        return characters;
    }
    ...
}

public enum Character {
    GENTLE,
    NORMAL,
    AGGRESSIVE,
    ATTENTIVE,
    VIOLENT,
    CRAFTY
}

@Embeddable
public class Toy {
    public String name;
    public String serial;
    public Boy owner;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getSerial() {
        return serial;
    }

    public void setSerial(String serial) {
        this.serial = serial;
    }

    <span class="bold"><b>@Parent</b></span>
    public Boy getOwner() {
        return owner;
    }

    public void setOwner(Boy owner) {
        this.owner = owner;
    }


    public boolean equals(Object o) {
        if ( this == o ) return true;
        if ( o == null || getClass() != o.getClass() ) return false;

        final Toy toy = (Toy) o;

        if ( !name.equals( toy.name ) ) return false;
        if ( !serial.equals( toy.serial ) ) return false;

        return true;
    }

    public int hashCode() {
        int result;
        result = name.hashCode();
        result = 29 * result + serial.hashCode();
        return result;
    }
}</pre><p>
		&#22312;&#23884;&#20837;&#24335;&#23545;&#35937;&#30340;&#38598;&#21512;&#20013;,&#21487;&#20197;&#20351;&#29992; <tt class="literal">@Parent</tt>&#27880;&#35299;&#23884;&#20837;&#24335;&#23545;&#35937;&#30340;&#26576;&#23646;&#24615;.
		&#35813;&#23646;&#24615;&#25351;&#21521;&#35813;&#23884;&#20837;&#24335;&#23545;&#35937;&#25152;&#23646;&#30340;&#38598;&#21512;&#23454;&#20307;.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#26087;&#29256;&#30340;Hibernate Annotations&#29992;<tt class="literal">@OneToMany</tt>&#26469;&#26631;&#35782;&#38598;&#21512;&#20803;&#32032;.
			&#30001;&#20110;&#35821;&#20041;&#30683;&#30462;,&#25105;&#20204;&#24341;&#20837;&#20102;<tt class="literal">@CollectionOfElements</tt>&#27880;&#35299;.
			&#29992;<tt class="literal">@OneToMany</tt>&#26469;&#26631;&#35782;&#38598;&#21512;&#20803;&#32032;&#30340;&#36825;&#31181;&#26087;&#26377;&#26041;&#24335;&#30446;&#21069;&#23578;&#26377;&#25928;,
			&#20294;&#26159;&#19981;&#25512;&#33616;&#20351;&#29992;,&#32780;&#19988;&#22312;&#20197;&#21518;&#30340;&#21457;&#24067;&#29256;&#26412;&#20013;&#19981;&#20877;&#25903;&#25345;&#36825;&#31181;&#26041;&#24335;.</p></div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2613"></a>2.4.7.&nbsp;&#32531;&#23384;</h3></div></div><div></div></div><p>&#20026;&#20102;&#20248;&#21270;&#25968;&#25454;&#24211;&#35775;&#38382;,&#20320;&#21487;&#20197;&#28608;&#27963;&#25152;&#35859;&#30340;Hibernate&#20108;&#32423;&#32531;&#23384;.&#35813;&#32531;&#23384;&#26159;&#21487;&#20197;&#25353;&#27599;&#20010;&#23454;&#20307;&#21644;&#38598;&#21512;&#36827;&#34892;&#37197;&#32622;&#30340;.</p><p><tt class="literal">@org.hibernate.annotations.Cache</tt>&#23450;&#20041;&#20102;&#32531;&#23384;&#31574;&#30053;&#21450;&#32473;&#23450;&#30340;&#20108;&#32423;&#32531;&#23384;&#30340;&#33539;&#22260;.
		&#27492;&#27880;&#35299;&#36866;&#29992;&#20110;&#26681;&#23454;&#20307;(&#38750;&#23376;&#23454;&#20307;),&#36824;&#26377;&#38598;&#21512;.</p><pre class="programlisting">@Entity
@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
public class Forest { ... }</pre><pre class="programlisting">    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinColumn(name="CUST_ID")
    @Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
    public SortedSet&lt;Ticket&gt; getTickets() {
        return tickets;
    }</pre><p></p><div class="programlistingco"><pre class="programlisting">@Cache(
    CacheConcurrencyStrategy usage();                 <span class="co">(1)</span>
    String region() default "";                       <span class="co">(2)</span>
    String include() default "all";                   <span class="co">(3)</span>
)</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p>usage: &#32473;&#23450;&#32531;&#23384;&#30340;&#24182;&#21457;&#31574;&#30053;(NONE,
            READ_ONLY, NONSTRICT_READ_WRITE, READ_WRITE, TRANSACTIONAL)</p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p>region (&#21487;&#36873;&#30340;)&#65306;&#32531;&#23384;&#33539;&#22260;(&#40664;&#35748;&#20026;&#31867;&#30340;&#20840;&#38480;&#23450;&#31867;&#21517;&#25110;&#26159;&#38598;&#21512;&#30340;&#20840;&#38480;&#23450;&#35282;&#33394;&#21517;)</p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p><tt class="literal">include</tt> (&#21487;&#36873;&#30340;)&#65306;&#20540;&#20026;all&#26102;&#21253;&#25324;&#20102;&#25152;&#26377;&#30340;&#23646;&#24615;(proterty),
            &#20026;non-lazy&#26102;&#20165;&#21547;&#38750;&#24310;&#36831;&#23646;&#24615;(&#40664;&#35748;&#20540;&#20026;all)</p></td></tr></table></div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2646"></a>2.4.8.&nbsp;&#36807;&#28388;&#22120;</h3></div></div><div></div></div><p>Hibernate&#20855;&#26377;&#25968;&#25454;&#36807;&#28388;&#22120;&#30340;&#27010;&#24565;,&#21487;&#22312;&#36816;&#34892;&#26399;&#24212;&#29992;&#20110;&#19968;&#20010;&#32473;&#23450;&#30340;session.&#36807;&#28388;&#22120;&#38656;&#35201;&#20107;&#20808;&#23450;&#20041;&#22909;.</p><p><tt class="literal">@org.hibernate.annotations.FilterDef</tt> &#25110;
      <tt class="literal">@FilterDefs</tt> &#23450;&#20041;&#36807;&#28388;&#22120;&#22768;&#26126;,&#20026;&#21516;&#21517;&#36807;&#28388;&#22120;&#25152;&#29992;.
      &#36807;&#28388;&#22120;&#22768;&#26126;&#24102;&#26377;&#19968;&#20010;name()&#21644;&#19968;&#20010;parameters()&#25968;&#32452;,<tt class="literal">@ParamDef</tt>&#21253;&#21547;name&#21644;type,
      &#20320;&#36824;&#21487;&#20197;&#20026;&#32473;&#23450;&#30340;<tt class="literal">@filterDef</tt>&#23450;&#20041;&#19968;&#20010;defaultCondition()&#21442;&#25968;,
      &#24403;<tt class="literal">@Filter</tt>&#20013;&#27809;&#26377;&#20219;&#20309;&#23450;&#20041;&#26102;,&#21487;&#20351;&#29992;&#35813;&#21442;&#25968;&#23450;&#20041;&#32570;&#30465;&#26465;&#20214;.
     <tt class="literal">@FilterDef</tt> (s)&#21487;&#20197;&#22312;&#31867;&#25110;&#21253;&#19968;&#32423;&#36827;&#34892;&#23450;&#20041;.</p><p>&#29616;&#22312;&#25105;&#20204;&#26469;&#23450;&#20041;&#24212;&#29992;&#20110;&#23454;&#20307;&#25110;&#38598;&#21512;&#21152;&#36733;&#26102;&#30340;SQL&#36807;&#28388;&#22120;&#23376;&#21477;.&#25105;&#20204;&#20351;&#29992;<tt class="literal">@Filter</tt>,&#24182;&#23558;&#20854;&#32622;&#20110;&#23454;&#20307;&#25110;&#38598;&#21512;&#20803;&#32032;&#19978;.</p><pre class="programlisting">@Entity
@FilterDef(name="minLength", parameters=@ParamDef( name="minLength", type="integer" ) )
@Filters( {
    @Filter(name="betweenLength", condition=":minLength &lt;= length and :maxLength &gt;= length"),
    @Filter(name="minLength", condition=":minLength &lt;= length")
} )
public class Forest { ... }</pre></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2678"></a>2.4.9.&nbsp;&#26597;&#35810;</h3></div></div><div></div></div><p>&#30001;&#20110;Hibernate&#24341;&#20837;&#20102;
      <tt class="literal">@org.hibernate.annotations.NamedQuery</tt>,
      <tt class="literal">@org.hibernate.annotations.NamedQueries</tt>,
      <tt class="literal">@org.hibernate.annotations.NamedNativeQuery</tt> &#21644;
      <tt class="literal">@org.hibernate.annotations.NamedNativeQueries</tt> &#21629;&#21517;&#24335;&#26597;&#35810;,
      &#22240;&#27492;Hibernate&#22312;&#21629;&#21517;&#24335;&#26597;&#35810;&#19978;&#27604;EBJ3&#35268;&#33539;&#20013;&#25152;&#23450;&#20041;&#30340;&#21629;&#21517;&#24335;&#26597;&#35810;&#25552;&#20379;&#20102;&#26356;&#22810;&#30340;&#29305;&#24615;.
      &#20182;&#20204;&#22312;&#26631;&#20934;&#29256;&#20013;&#28155;&#21152;&#20102;&#21487;&#20316;&#20026;&#26367;&#20195;&#21697;&#30340;&#19968;&#20123;&#23646;&#24615;(attributes):</p><div class="itemizedlist"><ul type="disc"><li><p>flushMode: &#23450;&#20041;&#26597;&#35810;&#30340;&#21047;&#26032;&#27169;&#24335;(Always, Auto, Commit&#25110;Manual)</p></li><li><p>cacheable: &#26597;&#35810;&#35813;&#19981;&#35813;&#34987;&#32531;&#23384;</p></li><li><p>cacheRegion: &#33509;&#26597;&#35810;&#24050;&#34987;&#32531;&#23384;&#26102;&#25152;&#29992;&#32531;&#23384;&#30340;&#33539;&#22260;</p></li><li><p>fetchSize: &#38024;&#23545;&#35813;&#26597;&#35810;&#30340;JDBC statement&#21333;&#27425;&#33719;&#21462;&#35760;&#24405;&#30340;&#25968;&#30446;</p></li><li><p>timeout: &#26597;&#35810;&#36229;&#26102;</p></li><li><p>callable: &#20165;&#29992;&#20110;&#26412;&#22320;&#21270;&#26597;&#35810;(native query),&#23545;&#20110;&#23384;&#20648;&#36807;&#31243;&#35774;&#20026;true</p></li><li><p>comment: &#19968;&#26086;&#28608;&#27963;&#27880;&#37322;&#21151;&#33021;,&#25105;&#20204;&#20250;&#22312;&#21521;&#25968;&#25454;&#24211;&#20132;&#36865;&#26597;&#35810;&#35831;&#27714;&#26102;&#30475;&#21040;&#27880;&#37322;</p></li><li><p>cacheMode: &#32531;&#23384;&#20132;&#25252;&#27169;&#24335;(get, ignore,normal,&#25110;refresh)</p></li><li><p>readOnly: &#19981;&#31649;&#26159;&#21542;&#20174;&#26597;&#35810;&#33719;&#21462;&#20803;&#32032;&#37117;&#26159;&#22312;&#21482;&#35835;&#27169;&#24335;&#19979;</p></li></ul></div><p>&#27880;&#24847;,EJB3&#24050;&#20844;&#24320;&#30340;&#26368;&#32456;&#33609;&#26696;&#20013;&#24341;&#20837;&#20102;<tt class="literal">@QueryHint</tt>&#30340;&#27010;&#24565;,
      &#36825;&#21487;&#33021;&#26159;&#23450;&#20041;hints&#26356;&#22909;&#30340;&#26041;&#27861;.</p></div></div></div><div class="chapter" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="xml-overriding"></a>&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#36890;&#36807;XML&#35206;&#20889;&#20803;&#25968;&#25454;</h2></div></div><div></div></div><p>&#22312;EJB3&#20013;&#20803;&#25968;&#25454;&#30340;&#20027;&#35201;&#30446;&#26631;&#26159;&#20351;&#29992;&#27880;&#37322;,&#20294;&#26159;EJB3&#35268;&#33539;&#20063;&#25552;&#20379;&#36890;&#36807;XML&#37096;&#32626;&#25991;&#20214;&#26469;&#35206;&#20889;&#25110;&#32773;&#26367;&#25442;&#20803;&#25968;&#25454;&#27880;&#37322;.
  &#22312;&#24403;&#21069;&#30340;&#21457;&#24067;&#29256;&#26412;&#20165;&#20165;&#25903;&#25345;EJB3&#27880;&#37322;&#30340;&#35206;&#20889;,&#22914;&#26524;&#20320;&#24819;&#20351;&#29992;Hibernate&#29305;&#26377;&#30340;&#19968;&#20123;&#23454;&#20307;&#27880;&#37322;,
  &#20320;&#26377;&#20004;&#31181;&#36873;&#25321;:&#19968;,&#21482;&#20351;&#29992;&#27880;&#37322;;&#20108;,&#20351;&#29992;&#21407;&#26469;&#30340;hbm &#26144;&#23556;&#25991;&#20214;.&#20320;&#24403;&#28982;&#36824;&#26159;&#21487;&#20197;&#21516;&#26102;&#20351;&#29992;&#27880;&#37322;&#23454;&#20307;&#21644;hbm XML&#26144;&#23556;&#25991;&#20214;&#30340;&#23454;&#20307;.</p><p>&#22312;&#27979;&#35797;&#22871;&#20214;&#20013;&#26377;&#19968;&#20123;&#38468;&#21152;&#30340;XML&#25991;&#20214;&#30340;&#26679;&#20363;.</p><div class="section" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2735"></a>3.1.&nbsp;&#21407;&#21017;</h2></div></div><div></div></div><p>XML&#37096;&#32626;&#25991;&#20214;&#32467;&#26500;&#34987;&#35774;&#35745;&#20026;&#30452;&#25509;&#26144;&#23556;&#27880;&#37322;&#32467;&#26500;,&#25152;&#20197;&#22914;&#26524;&#20320;&#30693;&#36947;&#27880;&#37322;&#30340;&#32467;&#26500;,&#37027;&#20040;&#20351;&#29992;XML&#35821;&#27861;&#26159;&#24456;&#31616;&#21333;&#30340;.</p><p>&#20320;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;XML&#25991;&#20214;&#26469;&#25551;&#36848;&#20320;&#30340;&#20803;&#25968;&#25454;,&#36825;&#20123;&#25991;&#20214;&#20250;&#34987;&#35206;&#20889;&#24341;&#25806;&#21512;&#24182;(merged).</p><div class="section" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2742"></a>3.1.1.&nbsp;&#20840;&#23616;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#20351;&#29992;XML&#25991;&#20214;&#26469;&#23450;&#20041;&#20840;&#23616;&#20803;&#25968;&#25454;,&#23545;&#27599;&#19968;&#20010;&#37096;&#32626;&#25991;&#20214;&#20320;&#19981;&#33021;&#23450;&#20041;&#22810;&#20110;&#19968;&#20010;&#30340;&#20803;&#25968;&#25454;.</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;entity-mappings 
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_1_0.xsd"
  version="1.0"&gt;

    &lt;persistence-unit-metadata&gt;
        &lt;xml-mapping-metadata-complete/&gt;
        &lt;persistence-unit-defaults&gt;
            &lt;schema&gt;myschema&lt;/schema&gt;
            &lt;catalog&gt;mycatalog&lt;/catalog&gt;
            &lt;cascade-persist/&gt;
        &lt;/persistence-unit-defaults&gt;
    &lt;/persistence-unit-metadata&gt;</pre><p><tt class="literal">xml-mapping-metadata-complete</tt> &#24847;&#21619;&#30528;&#25152;&#26377;&#30340;&#23454;&#20307;,mapped-superclasses&#21644;&#23884;&#22871;&#30340;&#20803;&#25968;&#25454;&#24212;&#35813;&#20174;XML&#25991;&#20214;&#20013;&#21551;&#29992;(&#24573;&#30053;&#27880;&#37322;).</p><p><tt class="literal">schema / catalog</tt> &#23558;&#35206;&#20889;&#25152;&#26377;&#22312;&#20803;&#25968;&#25454;&#20013;&#40664;&#35748;&#23450;&#20041;&#30340;schema &#21644; catalog(&#21253;&#25324;XML&#21644;&#27880;&#37322;).</p><p><tt class="literal">cascade-persist</tt> &#24847;&#21619;&#30528;&#25152;&#26377;&#27880;&#37322;&#20316;&#20026;&#19968;&#20010; cascade type &#37117;&#26159;PERSIST&#30340;. &#25105;&#20204;&#25512;&#33616;&#20320;&#19981;&#35201;&#20351;&#29992;&#35813;&#29305;&#24615;.</p></div><div class="section" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2761"></a>3.1.2.&nbsp;&#23454;&#20307;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>&#20320;&#20063;&#21487;&#20197;&#22312;&#19968;&#20010;&#32473;&#23450;&#30340;&#23454;&#20307;&#19978;&#23450;&#20041;&#25110;&#32773;&#35206;&#20889;&#20803;&#25968;&#25454;</p><div class="programlistingco"><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;entity-mappings                                                                    <span class="co">(1)</span>
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_1_0.xsd"
  version="1.0"&gt;

    &lt;package&gt;org.hibernate.test.annotations.reflection&lt;/package&gt;                    <span class="co">(2)</span>
    &lt;entity class="Administration" access="PROPERTY" metadata-complete="true"&gt;      <span class="co">(3)</span>
        &lt;table name="tbl_admin"&gt;                                                    <span class="co">(4)</span>
            &lt;unique-constraint&gt;
                &lt;column-name&gt;firstname&lt;/column-name&gt;
                &lt;column-name&gt;lastname&lt;/column-name&gt;
            &lt;/unique-constraint&gt;
        &lt;/table&gt;
        &lt;secondary-table name="admin2"&gt;                                             <span class="co">(5)</span>
            &lt;primary-key-join-column name="admin_id" referenced-column-name="id"/&gt;
            &lt;unique-constraint&gt;
                &lt;column-name&gt;address&lt;/column-name&gt;
            &lt;/unique-constraint&gt;
        &lt;/secondary-table&gt;
        &lt;id-class class="SocialSecurityNumber"/&gt;                                    <span class="co">(6)</span>
        &lt;inheritance strategy="JOINED"/&gt;                                            <span class="co">(7)</span>
        &lt;sequence-generator name="seqhilo" sequence-name="seqhilo"/&gt;                <span class="co">(8)</span>
        &lt;table-generator name="table" table="tablehilo"/&gt;                           <span class="co">(9)</span>
        ...
    &lt;/entity&gt;

    &lt;entity class="PostalAdministration"&gt;
        &lt;primary-key-join-column name="id"/&gt;                                        <span class="co">(10)</span>
        ...
    &lt;/entity&gt;
&lt;/entity-mappings&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p><tt class="literal">entity-mappings</tt>:entity-mappings &#26159;&#25152;&#26377;XML&#25991;&#20214;&#30340;&#26681;&#20803;&#32032;.&#20320;&#24517;&#39035;&#23450;&#20041;XML Schema, &#35813;&#25991;&#20214;&#21253;&#21547;&#22312;hibernate-annotations.jar&#20013;,&#20351;&#29992;Hibernate Annotations &#19981;&#38656;&#35201;&#35775;&#38382;&#32593;&#32476;.</p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p><tt class="literal">package</tt> (&#21487;&#36873;&#30340;): &#20316;&#20026;&#40664;&#35748;&#30340;package&#29992;&#20110;&#22312;&#19968;&#20010;&#32473;&#23450;&#30340;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#20013;&#25152;&#26377;&#27809;&#26377;&#38480;&#23450;&#30340;&#31867;.</p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p><tt class="literal">entity</tt>: &#25551;&#36848;&#19968;&#20010;&#23454;&#20307;. </p><p><tt class="literal">metadata-complete</tt> &#23450;&#20041;&#23545;&#20110;&#35813;&#20803;&#32032;&#26159;&#21542;&#20840;&#37096;&#20351;&#29992;&#20803;&#25968;&#25454;(&#25442;&#21477;&#35805;&#26469;&#35828;&#23601;&#26159;,&#22914;&#26524;&#27880;&#37322;&#20986;&#29616;&#22312;&#31867;&#32423;&#21035;&#24212;&#35813;&#32771;&#34385;&#25110;&#32773;&#24573;&#30053;).</p><p>&#19968;&#20010;&#23454;&#20307;&#19981;&#24471;&#19981;&#26377;&#19968;&#20010; class &#23646;&#24615;&#26469;&#24341;&#29992; &#20803;&#25968;&#25454;&#25152;&#24212;&#29992;&#30340;&#31867;. </p><p>&#36890;&#36807;<tt class="literal">name</tt>&#23646;&#24615;&#20320;&#21487;&#20197;&#35206;&#20889;&#23454;&#20307;&#30340;&#21517;&#23383;,
			&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#24182;&#19988;<tt class="literal">@Entity.name</tt>&#20986;&#29616;&#20102;&#30340;&#35805;,&#37027;&#20040;&#23601;&#20351;&#29992;&#35813;&#27880;&#37322;(&#20551;&#22914;metadata complete &#27809;&#26377;&#34987;&#35774;&#32622;).</p><p>
			&#23545;&#20110;metadata complete (&#21442;&#32771;&#19979;&#38754;)&#20803;&#32032;, &#20320;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;  <tt class="literal">access</tt>(<tt class="literal">FIELD</tt> &#25110;&#32773; <tt class="literal">PROPERTY</tt>(&#40664;&#35748;&#20540;)),
			&#23545;&#20110;&#38750;metadata complete &#20803;&#32032;,&#20351;&#29992;&#27880;&#37322;&#30340;access type.</p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p><tt class="literal">table</tt>:  &#20320;&#21487;&#20197;&#22768;&#26126;table &#23646;&#24615;(name, schema, catalog), &#22914;&#26524;&#27809;&#26377;&#23450;&#20041;, &#23558;&#20351;&#29992;Java&#27880;&#37322;.</p><p>&#23601;&#35937;&#20363;&#23376;&#20013;&#25152;&#31034;&#30340;&#37027;&#26679;&#20320;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;unique constraints</p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p><tt class="literal">secondary-table</tt>: &#23450;&#20041;&#19968;&#20010;secondary-table,&#38500;&#20102;&#20320;&#21487;&#20197;&#36890;&#36807;<tt class="literal">primary-key-join-column </tt>&#20803;&#32032;&#23450;&#20041; primary key / foreign key &#21015;&#20197;&#22806;&#26159;&#21644;&#19968;&#33324;&#30340;table&#19968;&#26679;&#30340;. &#22312;&#38750;metadata complete&#19979;, annotation secondary tables &#20165;&#20165;&#22312;&#27809;&#26377;<tt class="literal">secondary-table </tt>&#23450;&#20041;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;, &#21542;&#21017; &#27880;&#37322;&#23558;&#34987;&#24573;&#30053;.</p></td></tr><tr><td width="5%" valign="top" align="left">(6)</td><td valign="top" align="left"><p><tt class="literal">id-class</tt>: &#21644;<tt class="literal">@IdClass</tt>&#19968;&#26679;&#23450;&#20041;&#19968;&#20010;id class.</p></td></tr><tr><td width="5%" valign="top" align="left">(7)</td><td valign="top" align="left"><p><tt class="literal">inheritance</tt>: 
			&#23450;&#20041;&#32487;&#25215;&#31574;&#30053;(<tt class="literal">JOINED</tt>,
            <tt class="literal">TABLE_PER_CLASS</tt>,
            <tt class="literal">SINGLE_TABLE</tt>), &#20165;&#20165;&#22312;&#26681;&#23454;&#20307;&#32423;&#21035;&#21487;&#20197;&#20351;&#29992;.</p></td></tr><tr><td width="5%" valign="top" align="left">(8)</td><td valign="top" align="left"><p><tt class="literal">sequence-generator</tt>: &#23450;&#20041;&#19968;&#20010;&#24207;&#21015;&#20135;&#29983;&#22120;.</p></td></tr><tr><td width="5%" valign="top" align="left">(9)</td><td valign="top" align="left"><p><tt class="literal">table-generator</tt>: &#23450;&#20041;&#19968;&#20010;table generator</p></td></tr><tr><td width="5%" valign="top" align="left">(10)</td><td valign="top" align="left"><p><tt class="literal"><tt class="literal">primary-key-join-column</tt></tt>:
            &#24403; JOINED &#32487;&#25215;&#31574;&#30053;&#20351;&#29992;&#26102;,&#20026;sub entities&#23450;&#20041;&#19968;&#20010; primary key join column.</p></td></tr></table></div></div><div class="programlistingco"><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;entity-mappings 
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_1_0.xsd"
  version="1.0"&gt;

    &lt;package&gt;org.hibernate.test.annotations.reflection&lt;/package&gt;
    &lt;entity class="Music" access="PROPERTY" metadata-complete="true"&gt;
        &lt;discriminator-value&gt;Generic&lt;/discriminator-value&gt;                          <span class="co">(1)</span>
        &lt;discriminator-column length="34"/&gt;
        ...
    &lt;/entity&gt;

    &lt;entity class="PostalAdministration"&gt;
        &lt;primary-key-join-column name="id"/&gt;
        &lt;named-query name="adminById"&gt;                                              <span class="co">(2)</span>
            &lt;query&gt;select m from Administration m where m.id = :id&lt;/query&gt;
            &lt;hint name="org.hibernate.timeout" value="200"/&gt;
        &lt;/named-query&gt;
        &lt;named-native-query name="allAdmin" result-set-mapping="adminrs"&gt;           <span class="co">(3)</span>
            &lt;query&gt;select *, count(taxpayer_id) as taxPayerNumber 
            from Administration, TaxPayer
            where taxpayer_admin_id = admin_id group by ...&lt;/query&gt;
            &lt;hint name="org.hibernate.timeout" value="200"/&gt;
        &lt;/named-native-query&gt;
        &lt;sql-result-set-mapping name="adminrs"&gt;                                     <span class="co">(4)</span>
            &lt;entity-result entity-class="Administration"&gt;
                &lt;field-result name="name" column="fld_name"/&gt;
            &lt;/entity-result&gt;
            &lt;column-result name="taxPayerNumber"/&gt;
        &lt;/sql-result-set-mapping&gt;
        &lt;attribute-override name="ground"&gt;                                          <span class="co">(5)</span>
            &lt;column name="fld_ground" unique="true" scale="2"/&gt;
        &lt;/attribute-override&gt;
        &lt;association-override name="referer"&gt;
            &lt;join-column name="referer_id" referenced-column-name="id"/&gt;
        &lt;/association-override&gt;
        ...
    &lt;/entity&gt;
&lt;/entity-mappings&gt;</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left">(1)</td><td valign="top" align="left"><p><tt class="literal">discriminator-value /
            discriminator-column</tt>: &#24403;SINGLE_TABLE&#32487;&#25215;&#31574;&#30053;&#20351;&#29992;&#26102;,&#23450;&#20041;&#37492;&#21035;&#22120;&#20540; &#21644; &#20445;&#23384;&#35813;&#20540;&#30340;&#21015;.</p></td></tr><tr><td width="5%" valign="top" align="left">(2)</td><td valign="top" align="left"><p><tt class="literal">named-query</tt>: &#23450;&#20041;&#21629;&#21517;&#26597;&#35810;&#21644;&#19968;&#20123;&#30456;&#20851;&#30340;&#21487;&#33021;&#30340;&#32447;&#32034;. &#35813;&#23450;&#20041;&#38468;&#21152;&#22312;&#27880;&#37322;&#30340;&#23450;&#20041;&#20013;,&#22914;&#26524;&#20004;&#20010;&#37117;&#23450;&#20041;&#20102;&#30456;&#21516;&#30340;&#21517;&#23383;,&#37027;&#20040;XML&#23558;&#20248;&#20808;&#32771;&#34385;.</p></td></tr><tr><td width="5%" valign="top" align="left">(3)</td><td valign="top" align="left"><p><tt class="literal">named-native-query</tt>: &#23450;&#20041;&#19968;&#20010;&#21629;&#21517;&#26412;&#22320;&#26597;&#35810; &#21644;&#20182;&#30340; sql result set  &#26144;&#23556;. &#20316;&#20026;&#21478;&#22806;&#19968;&#31181;&#36873;&#25321;,&#20320;&#21487;&#20197;&#23450;&#20041;<tt class="literal">result-class</tt>. &#36825;&#20123;&#23450;&#20041;&#38468;&#21152;&#22312;&#27880;&#37322;&#30340;&#23450;&#20041;&#20013;.&#22914;&#26524;&#20004;&#20010;&#23450;&#20041;&#20102;&#21516;&#26679;&#30340;&#21517;&#23383;,XML&#25991;&#20214;&#20248;&#20808;&#32771;&#34385;.</p></td></tr><tr><td width="5%" valign="top" align="left">(4)</td><td valign="top" align="left"><p><tt class="literal">sql-result-set-mapping</tt>: &#25551;&#36848;&#20102; result set mapping &#30340;&#32467;&#26500;. &#20320;&#21487;&#20197;&#23450;&#20041; &#23454;&#20307;&#21644;&#21015;&#26144;&#23556;. &#36825;&#20123;&#23450;&#20041;&#38468;&#21152;&#22312;&#27880;&#37322;&#30340;&#23450;&#20041;&#20013;,&#22914;&#26524;&#23450;&#20041;&#20102;&#21516;&#26679;&#30340;&#21517;&#23383;,XML&#25991;&#20214;&#20248;&#20808;&#32771;&#34385;.</p></td></tr><tr><td width="5%" valign="top" align="left">(5)</td><td valign="top" align="left"><p><tt class="literal">attribute-override /
            association-override</tt>: &#23450;&#20041;&#19968;&#21015;&#25110;&#32773;join column overriding. &#35813;overriding &#38468;&#21152;&#22312;&#27880;&#37322;&#30340;&#23450;&#20041;&#20013;.</p></td></tr></table></div></div><p>&#19968;&#20123;&#24212;&#29992;&#20110; <tt class="literal">&lt;embeddable&gt;</tt> &#21644;
      <tt class="literal">&lt;mapped-superclass&gt;</tt>.</p></div><div class="section" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2923"></a>3.1.3.&nbsp;&#23646;&#24615;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>
	  &#20320;&#24403;&#28982;&#21487;&#20197;&#23450;&#20041;XML&#26469;&#35206;&#20889;&#23646;&#24615;. &#22914;&#26524;metadata complete &#32473;&#23450;&#20041;&#20102;,&#37027;&#20040;&#38468;&#21152;&#30340;&#23646;&#24615;(&#22914;: &#22312;Java &#32423;&#21035;&#30340;)&#23558;&#34987;&#24573;&#30053;.
&#21478;&#22806;,&#19968;&#26086;&#20320;&#24320;&#22987;&#35206;&#20889;&#19968;&#20010;&#23646;&#24615;,&#22312;&#35813;&#23646;&#24615;&#19978;&#30340;&#25152;&#26377;&#27880;&#37322;&#37117;&#20250;&#34987;&#24573;&#30053;.&#25152;&#26377;&#23646;&#24615;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;&#24212;&#29992;&#20110;<tt class="literal">entity/attributes</tt>,
      <tt class="literal">mapped-superclass/attributes</tt> &#25110;
      <tt class="literal">embeddable/attributes</tt>.</p><pre class="programlisting">    &lt;attributes&gt;
        &lt;id name="id"&gt;
            &lt;column name="fld_id"/&gt;
            &lt;generated-value generator="generator" strategy="SEQUENCE"/&gt;
            &lt;temporal&gt;DATE&lt;/temporal&gt;
            &lt;sequence-generator name="generator" sequence-name="seq"/&gt;
        &lt;/id&gt;
        &lt;version name="version"/&gt;
        &lt;embedded name="embeddedObject"&gt;
            &lt;attribute-override name"subproperty"&gt;
                &lt;column name="my_column"/&gt;
            &lt;/attribute-override&gt;
        &lt;/embedded&gt;
        &lt;basic name="status" optional="false"&gt;
            &lt;enumerated&gt;STRING&lt;/enumerated&gt;
        &lt;/basic&gt;
        &lt;basic name="serial" optional="true"&gt;
            &lt;column name="serialbytes"/&gt;
            &lt;lob/&gt;
        &lt;/basic&gt;
        &lt;basic name="terminusTime" fetch="LAZY"&gt;
            &lt;temporal&gt;TIMESTAMP&lt;/temporal&gt;
        &lt;/basic&gt;
    &lt;/attributes&gt;</pre><p>
	  &#36890;&#36807; <tt class="literal">id</tt>,
      <tt class="literal">embedded-id</tt>, <tt class="literal">version</tt>,
      <tt class="literal">embedded</tt> &#21644; <tt class="literal">basic</tt>&#20320;&#21487;&#20197;&#35206;&#20889;&#19968;&#20010;&#23646;&#24615;,
	  &#36825;&#20123;&#20803;&#32032;&#20013;&#30340;&#27599;&#19968;&#20010;&#20803;&#32032;&#37117;&#26377;&#30456;&#24212;&#30340;subelements&#65306;<tt class="literal">lob</tt>,
      <tt class="literal">temporal</tt>, <tt class="literal">enumerated</tt>,
      <tt class="literal">column</tt>.</p></div><div class="section" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2968"></a>3.1.4.&nbsp;&#20851;&#32852;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;</h3></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#23450;&#20041;XML&#35206;&#20889;&#20851;&#32852;&#27880;&#37322;. &#25152;&#26377;&#30340;&#20851;&#32852;&#32423;&#21035;&#30340;&#20803;&#25968;&#25454;&#20316;&#29992;&#20110;
	   <tt class="literal">entity/attributes</tt>,
      <tt class="literal">mapped-superclass/attributes</tt> &#25110;
      <tt class="literal">embeddable/attributes</tt>.</p><pre class="programlisting">    &lt;attributes&gt;
        &lt;one-to-many name="players" fetch="EAGER"&gt;
            &lt;map-key name="name"/&gt;
            &lt;join-column name="driver"/&gt;
            &lt;join-column name="number"/&gt;
        &lt;/one-to-many&gt;
        &lt;many-to-many name="roads" target-entity="Administration"&gt;
            &lt;order-by&gt;maxSpeed&lt;/order-by&gt;
            &lt;join-table name="bus_road"&gt;
                &lt;join-column name="driver"/&gt;
                &lt;join-column name="number"/&gt;
                &lt;inverse-join-column name="road_id"/&gt;
                &lt;unique-constraint&gt;
                    &lt;column-name&gt;driver&lt;/column-name&gt;
                    &lt;column-name&gt;number&lt;/column-name&gt;
                &lt;/unique-constraint&gt;
            &lt;/join-table&gt;
        &lt;/many-to-many&gt;
        &lt;many-to-many name="allTimeDrivers" mapped-by="drivenBuses"&gt;
    &lt;/attributes&gt;</pre><p>&#36890;&#36807;<tt class="literal">one-to-many</tt>, <tt class="literal">one-to-one</tt>,
      <tt class="literal">many-to-one</tt>, &#21644; <tt class="literal">many-to-many</tt>.
	  &#20320;&#21487;&#20197;&#37325;&#20889;&#19968;&#20010;&#20851;&#32852;&#20851;&#31995;.&#36825;&#20123;&#20803;&#32032;&#20013;&#30340;&#27599;&#19968;&#20010;&#37117;&#26377;&#30456;&#24212;&#30340;subelements. <tt class="literal">join-table</tt>  (&#21487;&#20197;&#26377;
	  <tt class="literal">join-column</tt>&#21644;
      <tt class="literal">inverse-join-column</tt>),
      <tt class="literal"><tt class="literal">join-column</tt></tt>,
      <tt class="literal">map-key</tt>, &#21644; <tt class="literal">order-by</tt>.
      <tt class="literal">mapped-by</tt> &#21644; <tt class="literal">target-entity</tt>
	  &#24403;&#20182;&#20204;&#26377;&#24847;&#20041;&#30340;&#26102;&#20505;&#21487;&#20197;&#23450;&#20041;&#23646;&#24615;. &#20877;&#19968;&#27425;&#24378;&#35843; &#35813;&#32467;&#26500;&#26144;&#23556;&#20110;&#27880;&#37322;&#30340;&#32467;&#26500;.&#22312;&#25551;&#36848;&#27880;&#37322;&#30340;&#19968;&#31456;&#20013; &#20320;&#21487;&#20197;&#25214;&#21040;&#25152;&#26377;&#30340;&#35821;&#20041;&#20449;&#24687;.</p></div></div></div><div class="chapter" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="validator"></a>&#31532;&nbsp;4&nbsp;&#31456;&nbsp;Hibernate&#39564;&#35777;&#22120;</h2></div></div><div></div></div><p>&#27880;&#35299;&#26159;&#19968;&#31181;&#20026;&#39046;&#22495;&#27169;&#22411;(domain model)&#25351;&#23450;&#19981;&#21464;&#32422;&#26463;&#30340;&#31616;&#27905;&#32780;&#24189;&#38597;&#30340;&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;&#20320;&#33021;
  &#34920;&#31034;&#19968;&#20010;&#23646;&#24615;&#27704;&#36828;&#19981;&#20026;null&#65292;&#19968;&#20010;&#24080;&#25143;&#20313;&#39069;&#19968;&#23450;&#26159;&#27491;&#20540;&#65292;&#31561;&#31561;&#12290;&#36825;&#20123;&#22495;&#27169;&#22411;&#32422;&#26463;&#36890;&#36807;&#20026;bean&#20013;&#30340;&#23646;&#24615;&#28155;&#21152;
  &#27880;&#35299;&#26469;&#21152;&#20197;&#22768;&#26126;&#12290;&#38543;&#21518;&#19968;&#20010;&#39564;&#35777;&#22120;(validator)&#20250;&#35835;&#21462;&#24182;&#26816;&#26597;&#36825;&#20123;&#32422;&#26463;&#12290;&#39564;&#35777;&#26426;&#21046;&#21487;&#20197;&#25191;&#34892;&#20110;&#24212;&#29992;&#31243;&#24207;&#20013;&#30340;
  &#19981;&#21516;&#23618;&#65288;&#34920;&#29616;&#23618;&#12289;&#25968;&#25454;&#35775;&#38382;&#23618;&#65289;&#65292;&#32780;&#19981;&#24517;&#22797;&#36848;&#20219;&#20309;&#65288;&#21069;&#36848;&#65289;&#36825;&#20123;&#35268;&#21017;&#12290;Hibernate&#39564;&#35777;&#22120;&#27491;&#20026;&#36825;&#19968;&#30446;&#30340;&#32780;&#35774;&#35745;&#30340;&#12290;</p><p>Hibernate&#39564;&#35777;&#22120;&#24037;&#20316;&#22312;&#20004;&#20010;&#23618;&#27425;&#19978;&#12290;&#31532;&#19968;&#23618;&#65292;&#23427;&#33021;&#26816;&#26597;&#20869;&#23384;&#20013;&#19968;&#20010;&#31867;&#30340;&#23454;&#20363;&#26159;&#21542;&#36829;&#21453;&#32422;&#26463;&#12290;
  &#31532;&#20108;&#23618;&#65292;&#23427;&#33021;&#23558;&#32422;&#26463;&#24212;&#29992;&#20110;Hibernate&#20803;&#27169;&#22411;&#19978;&#65292;&#24182;&#23558;&#23427;&#20204;&#34701;&#20837;&#29983;&#25104;&#30340;&#25968;&#25454;&#24211;schema&#20013;&#12290;</p><p>&#27599;&#20010;&#32422;&#26463;&#27880;&#35299;&#65288;constraint annotation&#65289;&#21644;&#19968;&#20010;&#39564;&#35777;&#22120;&#23454;&#29616;&#20851;&#32852;&#65292;&#35813;&#39564;&#35777;&#22120;&#36127;&#36131;&#26816;&#26597;&#20301;&#20110;&#23454;&#20307;&#23454;&#20363;&#19978;&#30340;&#32422;&#26463;&#12290;
  &#19968;&#20010;&#39564;&#35777;&#22120;&#20063;&#33021;(&#21487;&#36873;&#22320;)&#23558;&#32422;&#26463;&#24212;&#29992;&#20110;Hibernate&#20803;&#27169;&#22411;&#19978;&#65292;&#35753;Hibernate&#29983;&#25104;&#34920;&#31034;&#36825;&#19968;&#32422;&#26463;&#30340;DDL&#12290;&#20351;&#29992;&#21512;&#36866;&#30340;&#20107;&#20214;&#30417;&#21548;&#22120;&#65292;&#20320;&#33021;
  &#35753;Hibernate&#22312;&#25554;&#20837;&#21644;&#26356;&#26032;&#26102;&#25191;&#34892;&#26816;&#26597;&#25805;&#20316;&#12290;Hibernate&#39564;&#35777;&#22120;&#24182;&#19981;&#23616;&#38480;&#20110;&#21516;Hibernate&#19968;&#36215;&#20351;&#29992;&#12290;
  &#20320;&#33021;&#22312;&#20320;&#24212;&#29992;&#31243;&#24207;&#30340;&#20219;&#20309;&#22320;&#26041;&#26041;&#20415;&#22320;&#20351;&#29992;&#23427;&#12290;</p><p>&#22312;&#36816;&#34892;&#26102;&#26816;&#26597;&#23454;&#20363;&#26102;&#65292;Hibernate&#39564;&#35777;&#22120;&#36820;&#22238;&#36829;&#21453;&#32422;&#26463;&#30340;&#20449;&#24687;&#65292;
  &#36825;&#20123;&#20449;&#24687;&#20197;&#19968;&#20010;<tt class="classname">InvalidValue</tt>&#25968;&#32452;&#30340;&#24418;&#24335;&#36820;&#22238;&#12290;
  &#38500;&#20102;&#20247;&#22810;&#20854;&#20182;&#20449;&#24687;&#22806;&#65292;<tt class="classname">InvalidValue</tt>&#21253;&#21547;&#20102;&#19968;&#20010;&#38169;&#35823;&#25551;&#36848;&#28040;
  &#24687;&#65292;&#35813;&#20449;&#24687;&#21487;&#20197;&#20869;&#23884;&#19982;&#27880;&#35299;&#30456;&#25414;&#32465;&#30340;&#21442;&#25968;&#20540;&#65288;&#20363;&#22914;&#38271;&#24230;&#38480;&#21046;&#65289;&#65292;&#20197;&#21450;&#33021;&#34987;&#25552;&#21462;&#33267;ResourceBundle&#30340;&#28040;&#24687;&#23383;&#20018;&#12290;</p><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="validator-constraints"></a>4.1.&nbsp;&#32422;&#26463;</h2></div></div><div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3043"></a>4.1.1.&nbsp;&#20160;&#20040;&#26159;&#32422;&#26463;&#65311;</h3></div></div><div></div></div><p>&#32422;&#26463;&#36890;&#36807;&#27880;&#35299;&#34920;&#31034;&#12290;&#19968;&#20010;&#32422;&#26463;&#36890;&#24120;&#26377;&#19968;&#20123;&#29992;&#26469;&#21442;&#25968;&#21270;&#32422;&#26463;&#38480;&#21046;&#30340;&#23646;&#24615;&#12290;&#32422;&#26463;&#24212;&#29992;&#20110;&#24102;&#27880;&#35299;&#30340;&#20803;&#32032;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3048"></a>4.1.2.&nbsp;&#20869;&#24314;&#32422;&#26463;</h3></div></div><div></div></div><p>Hibernate&#39564;&#35777;&#22120;&#26377;&#20123;&#20869;&#24314;&#32422;&#26463;&#65292;&#36825;&#20123;&#32422;&#26463;&#35206;&#30422;&#20102;&#22823;&#22810;&#25968;&#30340;&#22522;&#26412;&#25968;&#25454;&#26816;&#26597;&#12290;&#38543;&#21518;&#25105;&#20204;&#20250;&#30475;&#21040;&#65292;
      &#20320;&#19981;&#24517;&#21463;&#21046;&#20110;&#36825;&#20123;&#20869;&#32622;&#32422;&#26463;&#65292;&#22240;&#20026;&#19968;&#20998;&#38047;&#20869;&#23601;&#21487;&#20197;&#20889;&#20986;&#20320;&#33258;&#24049;&#30340;&#32422;&#26463;&#12290;</p><div class="table"><a name="d0e3053"></a><p class="title"><b>&#34920;&nbsp;4.1.&nbsp;&#20869;&#24314;&#32422;&#26463;</b></p><table summary="&#20869;&#24314;&#32422;&#26463;" border="1"><colgroup><col align="center"><col><col><col></colgroup><thead><tr><th align="center">&#27880;&#35299;</th><th>&#24212;&#29992;&#30446;&#26631;</th><th>&#36816;&#34892;&#26102;&#26816;&#26597;</th><th>Hibernate&#20803;&#25968;&#25454;&#24433;&#21709;</th></tr></thead><tbody><tr><td align="center">@Length(min=, max=)</td><td>&#23646;&#24615;(String)</td><td>&#26816;&#26597;&#23383;&#31526;&#20018;&#38271;&#24230;&#26159;&#21542;&#31526;&#21512;&#33539;&#22260;</td><td>&#21015;&#38271;&#24230;&#20250;&#34987;&#35774;&#21040;&#26368;&#22823;&#20540;</td></tr><tr><td align="center">@Max(value=)</td><td>&#23646;&#24615; (&#20197;numeric&#25110;&#32773;string&#31867;&#22411;&#26469;&#34920;&#31034;&#19968;&#20010;&#25968;&#23383;)</td><td>&#26816;&#26597;&#20540;&#26159;&#21542;&#23567;&#20110;&#25110;&#31561;&#20110;&#26368;&#22823;&#20540;</td><td>&#23545;&#21015;&#22686;&#21152;&#19968;&#20010;&#26816;&#26597;&#32422;&#26463;</td></tr><tr><td align="center">@Min(value=)</td><td>&#23646;&#24615;(&#20197;numeric&#25110;&#32773;string&#31867;&#22411;&#26469;&#34920;&#31034;&#19968;&#20010;&#25968;&#23383;)</td><td>&#26816;&#26597;&#20540;&#26159;&#21542;&#22823;&#20110;&#25110;&#31561;&#20110;&#26368;&#23567;&#20540;</td><td>&#23545;&#21015;&#22686;&#21152;&#19968;&#20010;&#26816;&#26597;&#32422;&#26463;</td></tr><tr><td align="center">@NotNull</td><td>&#23646;&#24615;</td><td>&#26816;&#26597;&#20540;&#26159;&#21542;&#38750;&#31354;(not null)</td><td>&#21015;&#19981;&#20026;&#31354;</td></tr><tr><td align="center">@Past</td><td>&#23646;&#24615;(date&#25110;calendar)</td><td>&#26816;&#26597;&#26085;&#26399;&#26159;&#21542;&#26159;&#36807;&#21435;&#26102;</td><td>&#23545;&#21015;&#22686;&#21152;&#19968;&#20010;&#26816;&#26597;&#32422;&#26463;</td></tr><tr><td align="center">@Future</td><td>&#23646;&#24615; (date &#25110; calendar)</td><td>&#26816;&#26597;&#26085;&#26399;&#26159;&#21542;&#26159;&#23558;&#26469;&#26102;</td><td>&#26080;</td></tr><tr><td align="center">@Pattern(regex="regexp", flag=)</td><td>&#23646;&#24615; (string)</td><td>&#26816;&#26597;&#23646;&#24615;&#26159;&#21542;&#19982;&#32473;&#23450;&#21305;&#37197;&#26631;&#24535;&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;&#30456;&#21305;&#37197;(&#35265;<tt class="classname"> 
              java.util.regex.Pattern </tt>)</td><td>&#26080;</td></tr><tr><td align="center">@Range(min=, max=)</td><td>&#23646;&#24615;(&#20197;numeric&#25110;&#32773;string&#31867;&#22411;&#26469;&#34920;&#31034;&#19968;&#20010;&#25968;&#23383;)</td><td>&#26816;&#26597;&#20540;&#26159;&#21542;&#22312;&#26368;&#23567;&#21644;&#26368;&#22823;&#20540;&#20043;&#38388;(&#21253;&#25324;&#20020;&#30028;&#20540;)</td><td>&#23545;&#21015;&#22686;&#21152;&#19968;&#20010;&#26816;&#26597;&#32422;&#26463;</td></tr><tr><td align="center">@Size(min=, max=)</td><td>&#23646;&#24615; (array, collection, map)</td><td>&#26816;&#26597;&#20803;&#32032;&#22823;&#23567;&#26159;&#21542;&#22312;&#26368;&#23567;&#21644;&#26368;&#22823;&#20540;&#20043;&#38388;(&#21253;&#25324;&#20020;&#30028;&#20540;)</td><td>&#26080;</td></tr><tr><td align="center">@AssertFalse</td><td>&#23646;&#24615;</td><td>&#26816;&#26597;&#26041;&#27861;&#30340;&#28436;&#31639;&#32467;&#26524;&#26159;&#21542;&#20026;false(&#23545;&#20197;&#20195;&#30721;&#26041;&#24335;&#32780;&#19981;&#26159;&#27880;&#35299;&#34920;&#31034;&#30340;&#32422;&#26463;&#24456;&#26377;&#29992;)</td><td>&#26080;</td></tr><tr><td align="center">@AssertTrue</td><td>&#23646;&#24615;</td><td>&#26816;&#26597;&#26041;&#27861;&#30340;&#28436;&#31639;&#32467;&#26524;&#26159;&#21542;&#20026;true(&#23545;&#20197;&#20195;&#30721;&#26041;&#24335;&#32780;&#19981;&#26159;&#27880;&#35299;&#34920;&#31034;&#30340;&#32422;&#26463;&#24456;&#26377;&#29992;)</td><td>&#26080;</td></tr><tr><td align="center">@Valid</td><td>&#23646;&#24615; (object)</td><td>&#23545;&#20851;&#32852;&#23545;&#35937;&#36882;&#24402;&#30340;&#36827;&#34892;&#39564;&#35777;&#12290;&#22914;&#26524;&#23545;&#35937;&#26159;&#38598;&#21512;&#25110;&#25968;&#32452;&#65292;&#23601;&#36882;&#24402;&#22320;&#39564;&#35777;&#20854;&#20803;&#32032;&#12290;&#22914;&#26524;&#23545;&#35937;&#26159;Map&#65292;&#21017;&#36882;&#24402;&#39564;&#35777;&#20854;&#20540;&#20803;&#32032;&#12290;</td><td>&#26080;</td></tr><tr><td align="center">@Email</td><td>&#23646;&#24615;&#65288;String&#65289;</td><td>&#26816;&#26597;&#23383;&#31526;&#20018;&#26159;&#21542;&#31526;&#21512;&#26377;&#25928;&#30340;email&#22320;&#22336;&#35268;&#33539;&#12290;</td><td>&#26080;</td></tr></tbody></table></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="validator-constraints-error"></a>4.1.3.&nbsp;&#38169;&#35823;&#20449;&#24687;</h3></div></div><div></div></div><p>Hibernate&#39564;&#35777;&#22120;&#25552;&#20379;&#20102;&#19968;&#32452;&#40664;&#35748;&#30340;&#38169;&#35823;&#25552;&#31034;&#20449;&#24687;&#65292;&#23427;&#20204;&#34987;&#32763;&#35793;&#25104;&#22810;&#31181;&#35821;&#35328;(&#22914;&#26524;&#20320;&#30340;&#35821;&#35328;&#19981;&#22312;&#20854;&#20013;&#65292;&#35831;&#32473;
      &#25105;&#20204;&#23492;&#19968;&#20010;&#34917;&#19969;)&#12290;&#20320;&#21487;&#20197;&#22312;<tt class="filename">org.hibernate.validator.resources.DefaultValidatorMessages.properties</tt>
      &#20043;&#22806;&#21019;&#24314;<tt class="filename">ValidatorMessages.properties</tt>&#25110;<tt class="filename">ValidatorMessages_loc.properties</tt>
      &#25991;&#20214;&#24182;&#25913;&#21464;&#30456;&#24212;&#30340;&#38190;&#20540;&#65292;&#31821;&#27492;&#35206;&#30422;&#37027;&#20123;&#65288;&#40664;&#35748;&#65289;&#20449;&#24687;&#12290;&#20320;&#29978;&#33267;&#21487;&#20197;&#22312;&#20889;&#33258;&#24049;&#30340;&#39564;&#35777;&#22120;
      &#27880;&#35299;&#26102;&#28155;&#21152;&#20320;&#33258;&#24049;&#30340;&#38468;&#21152;&#28040;&#24687;&#38598;&#12290;</p><p>&#25110;&#32773;&#20320;&#21487;&#20197;&#20197;&#32534;&#31243;&#26041;&#24335;&#26816;&#26597;bean&#30340;&#39564;&#35777;&#35268;&#21017;&#24182;&#25552;&#20379;&#30456;&#24212;&#30340;<tt class="classname">ResourceBundle</tt>&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3208"></a>4.1.4.&nbsp;&#32534;&#20889;&#20320;&#33258;&#24049;&#30340;&#32422;&#26463;</h3></div></div><div></div></div><p>&#25193;&#23637;&#20869;&#24314;&#32422;&#26463;&#38598;&#26159;&#26497;&#20854;&#26041;&#20415;&#30340;&#12290;&#20219;&#20309;&#32422;&#26463;&#37117;&#21253;&#25324;&#20004;&#37096;&#20998;&#65306;&#32422;&#26463;<span class="emphasis"><em>&#25551;&#36848;&#31526;</em></span>(&#27880;&#35299;)
      &#21644;&#32422;&#26463;<span class="emphasis"><em>&#39564;&#35777;&#22120;</em></span>(&#23454;&#29616;&#31867;)&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#29992;&#25143;&#23450;&#20041;&#25551;&#36848;&#31526;&#65306;</p><pre class="programlisting">@ValidatorClass(CapitalizedValidator.class)
@Target(METHOD) 
@Retention(RUNTIME)
@Documented
public @interface Capitalized {
    CapitalizeType type() default Capitalize.FIRST;
    String message() default "has incorrect capitalization";
}</pre><p><tt class="literal">type</tt>&#21442;&#25968;&#25551;&#36848;&#23646;&#24615;&#24212;&#35813;&#22914;&#20309;&#34987;&#22823;&#20889;&#12290;&#36825;&#26159;&#19968;&#20010;&#23436;&#20840;&#20381;&#36182;&#20110;&#27880;&#35299;&#19994;&#21153;(&#36923;&#36753;)&#30340;&#29992;&#25143;
      &#21442;&#25968;&#12290;</p><p><tt class="literal">message</tt>&#26159;&#29992;&#20110;&#25551;&#36848;&#32422;&#26463;&#36829;&#35268;&#30340;&#40664;&#35748;&#23383;&#31526;&#20018;&#65292;&#23427;&#26159;&#24378;&#21046;&#35201;&#27714;&#30340;&#12290;&#20320;&#21487;&#20197;&#37319;&#21462;&#30828;&#32534;&#30721;&#30340;&#26041;&#24335;&#65292;
      &#25110;&#32773;&#36890;&#36807;Java ResourceBundle&#26426;&#21046;&#23558;message&#30340;&#37096;&#20998;/&#20840;&#37096;&#20869;&#23481;&#25552;&#21462;&#33267;&#22806;&#37096;&#25991;&#20214;&#12290;&#19968;&#26086;&#21457;&#29616;message&#20013;{parameter}&#23383;&#31526;&#20018;&#65292;
      &#23601;&#20250;&#22312;{parameter}&#36825;&#20010;&#20301;&#32622;&#27880;&#20837;&#30456;&#24212;&#30340;&#21442;&#25968;&#20540;(&#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#37324;Capitalization is not {type}&#20250;&#29983;&#25104; Capitalization is not FIRST)&#65292;
      &#21487;&#20197;&#23558;message&#23545;&#24212;&#30340;&#25972;&#20010;&#23383;&#31526;&#20018;&#25552;&#21462;&#33267;&#22806;&#37096;&#25991;&#20214;ValidatorMessages.properties&#65292;&#36825;&#20063;&#26159;&#19968;&#31181;&#33391;&#22909;&#23454;&#36341;&#12290;
      &#35265;<a href="#validator-constraints-error">Error messages</a>&#12290;</p><pre class="programlisting">@ValidatorClass(CapitalizedValidator.class)
@Target(METHOD) 
@Retention(RUNTIME)
@Documented
public @interface Capitalized {
    CapitalizeType type() default Capitalize.FIRST;
    String message() default "{validator.capitalized}";
}

...
#in ValidatorMessages.properties
validator.capitalized=<tt class="literal">Capitalization is not {type}</tt></pre><p>&#22914;&#20320;&#25152;&#35265;{}&#31526;&#21495;&#26159;&#36882;&#24402;&#30340;&#12290;</p><p>&#20026;&#20102;&#23558;&#19968;&#20010;&#25551;&#36848;&#31526;&#36830;&#25509;&#21040;&#23427;&#30340;&#39564;&#35777;&#22120;&#23454;&#29616;&#65292;&#25105;&#20204;&#20351;&#29992;<tt class="literal">@ValidatorClass</tt>
      &#20803;&#27880;&#35299;&#12290;&#39564;&#35777;&#22120;&#31867;&#21442;&#25968;&#24517;&#39035;&#25351;&#23450;&#19968;&#20010;&#23454;&#29616;&#20102;<tt class="literal">Validator&lt;ConstraintAnnotation&gt;</tt>
      &#30340;&#31867;&#12290;</p><p>&#25105;&#20204;&#29616;&#22312;&#35201;&#23454;&#29616;&#39564;&#35777;&#22120;(&#20063;&#23601;&#26159;&#23454;&#29616;&#35268;&#21017;&#26816;&#26597;)&#12290;&#19968;&#20010;&#39564;&#35777;&#22120;&#23454;&#29616;&#33021;&#26816;&#26597;&#19968;&#20010;&#23646;&#24615;&#30340;&#20540;
      (&#23454;&#29616;<tt class="literal">PropertyConstraint</tt>)&#65292;&#24182;&#19988;/&#25110;&#32773;&#21487;&#20197;&#20462;&#25913;hibernate&#26144;&#23556;&#20803;&#25968;&#25454;
      (&#23454;&#29616;<tt class="literal">PersistentClassConstraint</tt>)&#65292;&#31821;&#27492;&#34920;&#31034;&#25968;&#25454;&#24211;&#32423;&#30340;&#32422;&#26463;&#12290;</p><pre class="programlisting">public class CapitalizedValidator 
        implements Validator&lt;Capitalized&gt;, PropertyConstraint {
    private CapitalizeType type;

    //part of the Validator&lt;Annotation&gt; contract, 
    //allows to get and use the annotation values
    public void initialize(Capitalized parameters) {
        type = parameters.type();
    }

    //part of the property constraint contract
    public boolean isValid(Object value) {
        if (value==null) return true;
        if ( !(value instanceof String) ) return false;
        String string = (String) value;
        if (type == CapitalizeType.ALL) {
            return string.equals( string.toUpperCase() );
        }
        else {
            String first = string.substring(0,1);
            return first.equals( first.toUpperCase();
        }
    }
}</pre><p>&#22914;&#26524;&#36829;&#21453;&#32422;&#26463;&#65292;<tt class="literal">isValid()</tt>&#26041;&#27861;&#23558;&#36820;&#22238;false&#12290;&#26356;&#22810;&#20363;&#23376;&#35831;&#21442;&#32771;&#20869;&#24314;&#39564;&#35777;&#22120;&#23454;&#29616;&#12290;</p><p>&#33267;&#27492;&#25105;&#20204;&#21482;&#30475;&#21040;&#23646;&#24615;&#32423;&#30340;&#39564;&#35777;&#65292;&#20320;&#36824;&#21487;&#20197;&#20889;&#19968;&#20010;Bean&#32423;&#21035;&#30340;&#39564;&#35777;&#27880;&#35299;&#12290;Bean&#33258;&#36523;&#20250;&#34987;&#20256;&#36882;&#32473;&#39564;&#35777;&#22120;&#65292;
      &#32780;&#19981;&#26159;bean&#30340;&#23646;&#24615;&#23454;&#20363;&#12290;&#21482;&#35201;&#23545;bean&#33258;&#36523;&#36827;&#34892;&#27880;&#35299;&#21363;&#21487;&#28608;&#27963;&#39564;&#35777;&#26816;&#26597;&#12290;&#22312;&#21333;&#20803;&#27979;&#35797;&#22871;&#20214;&#20013;&#36824;&#21487;&#20197;&#25214;&#21040;&#19968;&#20010;&#23567;&#20363;&#23376;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3262"></a>4.1.5.&nbsp;&#27880;&#35299;&#20320;&#30340;&#39046;&#22495;&#27169;&#22411;</h3></div></div><div></div></div><p>&#26082;&#28982;&#20320;&#29616;&#22312;&#24050;&#32463;&#29087;&#24713;&#27880;&#35299;&#20102;&#65292;&#37027;&#20040;&#23545;&#35821;&#27861;&#20063;&#24212;&#35813;&#24456;&#28165;&#26970;&#20102;&#12290;</p><pre class="programlisting">public class Address {
    private String line1;
    private String line2;
    private String zip;
    private String state;
    private String country;
    private long id;
    
    // a not null string of 20 characters maximum
    @Length(max=20) 
    @NotNull
    public String getCountry() {
        return country;
    }
    
    // a non null string
    @NotNull
    public String getLine1() {
        return line1;
    }

    //no constraint    
    public String getLine2() {
        return line2;
    }
    
    // a not null string of 3 characters maximum
    @Length(max=3) @NotNull
    public String getState() {
        return state;
    }

    // a not null numeric string of 5 characters maximum
    // if the string is longer, the message will 
    //be searched in the resource bundle at key 'long'
    @Length(max=5, message="{long}")
    @Pattern(regex="[0-9]+")
    @NotNull
    public String getZip() {
        return zip;
    }
    
    // should always be true
    @AssertTrue
    public boolean isValid() {
        return true;
    }

    // a numeric between 1 and 2000
    @Id @Min(1)
    @Range(max=2000)
    public long getId() {
        return id;
    }
}</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#21482;&#23637;&#31034;&#20102;&#20844;&#20849;&#23646;&#24615;&#39564;&#35777;&#65292;&#20320;&#36824;&#21487;&#20197;&#23545;&#20219;&#20309;&#21487;&#35265;&#24230;&#30340;&#23383;&#27573;(field)&#36827;&#34892;&#27880;&#35299;&#12290;</p><pre class="programlisting">@MyBeanConstraint(max=45)
public class Dog {
    @AssertTrue private boolean isMale;
    @NotNull protected String getName() { ... };
    ...
}</pre><p>&#20320;&#21487;&#20197;&#23545;&#25509;&#21475;&#36827;&#34892;&#27880;&#35299;&#12290;Hibernate&#39564;&#35777;&#22120;&#20250;&#26816;&#26597;&#32473;&#23450;bean&#25152;&#25193;&#23637;&#25110;&#23454;&#29616;&#30340;&#25152;&#26377;&#29238;&#31867;&#21644;&#25509;&#21475;&#65292;
      &#31821;&#20197;&#35835;&#21462;&#30456;&#24212;&#30340;&#39564;&#35777;&#22120;&#27880;&#35299;(&#20449;&#24687;)&#12290;</p><pre class="programlisting">public interface Named {
    @NotNull String getName();
    ...
}

public class Dog implements Named {

    @AssertTrue private boolean isMale;

    public String getName() { ... };

}</pre><p>&#22312;&#39564;&#35777;Dog bean&#26102;&#20250;&#26816;&#26597;name&#23646;&#24615;&#30340;&#26377;&#25928;&#24615;(&#19981;&#20026;null)&#12290;</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3279"></a>4.2.&nbsp;&#20351;&#29992;&#39564;&#35777;&#22120;&#26694;&#26550;</h2></div></div><div></div></div><p>Hibernate&#39564;&#35777;&#22120;&#26088;&#22312;&#23454;&#29616;&#22810;&#23618;&#25968;&#25454;&#39564;&#35777;&#65292;&#25105;&#20204;&#22312;&#19968;&#22788;&#34920;&#31034;&#32422;&#26463;(&#24102;&#27880;&#35299;&#30340;&#22495;&#27169;&#22411;)&#65292;&#28982;&#21518;&#23558;&#20854;&#36816;&#29992;&#20110;
    &#24212;&#29992;&#31243;&#24207;&#30340;&#19981;&#21516;&#23618;&#12290;</p><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3284"></a>4.2.1.&nbsp;&#25968;&#25454;&#24211;schema&#23618;&#27425;&#39564;&#35777;</h3></div></div><div></div></div><p>&#26080;&#39035;&#39069;&#22806;&#25163;&#32493;&#65292;Hibernate Annotations&#20250;&#33258;&#21160;&#23558;&#20320;&#20026;&#23454;&#20307;&#23450;&#20041;&#30340;&#32422;&#26463;&#32763;&#35793;&#20026;&#26144;&#23556;&#20803;&#25968;&#25454;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#30340;&#23454;&#20307;
      &#30340;&#19968;&#20010;&#23646;&#24615;&#27880;&#35299;&#20026;<tt class="literal">@NotNull</tt>&#65292;&#22312;Hibernate&#29983;&#25104;&#30340;DDL schema&#20013;&#36825;&#21015;&#20250;&#34987;&#23450;&#20041;&#20026;
      <tt class="literal">not null</tt>&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3295"></a>4.2.2.&nbsp;Hibernate&#22522;&#20110;&#20107;&#20214;&#30340;&#39564;&#35777;</h3></div></div><div></div></div><p>Hibernate&#39564;&#35777;&#22120;&#26377;&#20004;&#20010;&#20869;&#24314;Hibernate&#20107;&#20214;&#30417;&#21548;&#22120;&#12290;&#24403;&#19968;&#20010;<tt class="literal">PreInsertEvent</tt>
      &#25110;<tt class="literal">PreUpdateEvent</tt>&#21457;&#29983;&#26102;&#65292;&#30417;&#21548;&#22120;&#20250;&#39564;&#35777;&#35813;&#23454;&#20307;&#23454;&#20363;&#30340;&#25152;&#26377;&#32422;&#26463;&#65292;&#22914;&#26377;&#36829;&#21453;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#12290;
      &#22522;&#26412;&#19978;&#65292;&#22312;Hibernate&#25191;&#34892;&#20219;&#20309;&#25554;&#20837;&#21644;&#26356;&#26032;&#21069;&#23545;&#35937;&#20250;&#34987;&#26816;&#26597;&#12290;&#36825;&#26159;&#28608;&#27963;&#39564;&#35777;&#36807;&#31243;&#30340;&#26368;&#20415;&#25463;&#26368;&#31616;&#21333;&#30340;&#26041;&#27861;&#12290;&#24403;&#36935;&#21040;&#32422;&#26463;
      &#36829;&#35268;&#26102;&#65292;&#20107;&#20214;&#20250;&#24341;&#21457;&#19968;&#20010;&#36816;&#34892;&#26102;<tt class="classname">InvalidStateException</tt>&#65292;&#35813;&#24322;&#24120;&#21253;&#21547;&#19968;&#20010;&#25551;&#36848;&#27599;&#20010;&#38169;&#35823;&#30340;
      <tt class="literal">InvalidValue</tt>&#25968;&#32452;&#12290;</p><pre class="programlisting">&lt;hibernate-configuration&gt;
    ...
    &lt;event type="pre-update"&gt;
        &lt;listener 
          class="org.hibernate.validator.event.ValidatePreUpdateEventListener"/&gt;
    &lt;/event&gt;
    &lt;event type="pre-insert"&gt;
        &lt;listener 
          class="org.hibernate.validator.event.ValidatePreInsertEventListener"/&gt;
    &lt;/event&gt;
&lt;/hibernate-configuration&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#27880;&#24847;</h3><p>&#22312;&#20351;&#29992;Hibernate Entity Manager&#26102;&#65292;Validation&#26694;&#26550;&#20250;&#34987;&#33258;&#21160;&#28608;&#27963;&#12290;&#22914;&#26524;bean&#19981;&#24102;&#39564;&#35777;&#27880;&#35299;&#65292;
          &#23601;&#19981;&#20250;&#26377;&#24615;&#33021;&#25439;&#22833;&#12290;</p></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3318"></a>4.2.3.&nbsp;&#31243;&#24207;&#32423;&#39564;&#35777;</h3></div></div><div></div></div><p>Hibernate&#39564;&#35777;&#22120;&#33021;&#24212;&#29992;&#20110;&#20320;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#20013;&#30340;&#20219;&#20309;&#22320;&#26041;&#12290;</p><pre class="programlisting">ClassValidator personValidator = new ClassValidator( Person.class );
ClassValidator addressValidator = new ClassValidator( Address.class, ResourceBundle.getBundle("messages", Locale.ENGLISH) );

InvalidValue[] validationMessages = addressValidator.getInvalidValues(address);</pre><p>&#22836;&#20004;&#34892;&#20026;&#25191;&#34892;&#31867;&#26816;&#26597;&#32780;&#20934;&#22791;Hibernate&#39564;&#35777;&#22120;&#12290;&#31532;&#19968;&#34892;&#20381;&#36182;&#20110;&#23884;&#20837;&#22312;Hibernate&#39564;&#35777;&#22120;&#20869;&#30340;&#38169;&#35823;
      &#28040;&#24687;(&#35265;<a href="#validator-constraints-error">Error messages</a>)&#65292;&#31532;&#20108;&#34892;&#20026;&#36825;&#20123;&#28040;&#24687;&#20934;&#22791;&#36164;&#28304;&#21253;&#12290;&#36825;&#20123;&#20195;&#30721;&#21482;&#25191;&#34892;&#19968;&#27425;&#65292;
      &#24182;&#23558;&#39564;&#35777;&#22120;&#36827;&#34892;&#32531;&#23384;&#22788;&#29702;&#65292;&#36825;&#31181;&#26041;&#24335;&#26159;&#19968;&#31181;&#33391;&#22909;&#23454;&#36341;&#12290;</p><p>&#31532;&#19977;&#34892;&#30495;&#27491;&#39564;&#35777;&#20102;<tt class="literal">Address</tt>&#23454;&#20363;&#24182;&#36820;&#22238;&#19968;&#20010;<tt class="literal">InvalidValue</tt>&#25968;&#32452;&#12290;
      &#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#36923;&#36753;&#38543;&#21518;&#21487;&#20197;&#23545;&#38169;&#35823;&#20570;&#20986;&#21709;&#24212;&#12290;</p><p>&#38500;&#20102;&#38024;&#23545;&#25972;&#20010;bean&#20320;&#36824;&#21487;&#20197;&#23545;&#26576;&#20010;&#29305;&#23450;&#23646;&#24615;&#36827;&#34892;&#26816;&#26597;&#12290;&#36825;&#23545;&#20110;&#19968;&#20010;&#23646;&#24615;&#19968;&#20010;&#23646;&#24615;&#30340;&#29992;&#25143;&#20132;&#20114;&#24773;&#24418;&#25110;&#35768;&#26159;&#26377;&#29992;&#30340;&#12290;</p><pre class="programlisting">ClassValidator addressValidator = new ClassValidator( Address.class, ResourceBundle.getBundle("messages", Locale.ENGLISH) );

//only get city property invalid values
InvalidValue[] validationMessages = addressValidator.getInvalidValues(address, "city");

//only get potential city property invalid values
InvalidValue[] validationMessages = addressValidator.getPotentialInvalidValues("city", "Paris")</pre></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3341"></a>4.2.4.&nbsp;&#39564;&#35777;&#20449;&#24687;</h3></div></div><div></div></div><p>&#20316;&#20026;&#19968;&#20010;&#39564;&#35777;&#20449;&#24687;&#30340;&#36733;&#20307;&#65292;hibernate&#25552;&#20379;&#20102;&#19968;&#20010;<tt class="classname">InvalidValue</tt>&#25968;&#32452;&#12290;
      &#27599;&#20010;<tt class="literal">InvalidValue</tt>&#26377;&#19968;&#32452;&#65292;&#36825;&#20123;&#26041;&#27861;&#20998;&#21035;&#25551;&#36848;&#30456;&#24212;&#30340;&#20010;&#20307;&#38382;&#39064;&#12290;</p><p><tt class="methodname">getBeanClass()</tt>&#33719;&#21462;&#22833;&#36133;&#30340;bean&#31867;&#22411;&#12290;</p><p><tt class="methodname">getBean()</tt>&#33719;&#21462;&#39564;&#35777;&#22833;&#36133;&#30340;&#23454;&#20363;(&#22914;&#26524;&#26377;&#30340;&#35805;&#65292;&#24403;&#20351;&#29992;
      <tt class="methodname">getPotentianInvalidValues()</tt>&#26102;&#21017;&#19981;&#20250;&#21462;&#21040;) </p><p><tt class="methodname">getValue()</tt>&#33719;&#21462;&#39564;&#35777;&#22833;&#36133;&#30340;&#20540;</p><p><tt class="methodname">getMessage()</tt>&#33719;&#21462;&#21512;&#36866;&#30340;&#22269;&#38469;&#21270;&#38169;&#35823;&#28040;&#24687;</p><p><tt class="methodname">getRootBean()</tt>&#33719;&#21462;&#20135;&#29983;&#38382;&#39064;&#30340;&#26681;bean&#23454;&#20363;(&#22312;&#19982;<tt class="literal">@Valid</tt>&#36830;&#29992;
      &#26102;&#24456;&#26377;&#29992;)&#65292;&#22914;&#29992;getPotentianInvalidValues()&#21017;&#36820;&#22238;null&#12290;</p><p><tt class="literal">getPropertyPath()</tt>&#33719;&#21462;&#8220;&#38382;&#39064;&#8221;&#23646;&#24615;&#20174;&#26681;bean&#24320;&#22987;&#30340;&#24102;&#28857;&#30340;&#36335;&#24452;</p></div></div></div><div class="chapter" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="lucene"></a>&#31532;&nbsp;5&nbsp;&#31456;&nbsp;Hibernate&#19982;Lucene&#38598;&#25104;</h2></div></div><div></div></div><p>Lucene&#26159;&#19968;&#20010;&#39640;&#24615;&#33021;&#30340;java&#25628;&#32034;&#24341;&#25806;&#24211;&#65292;&#21487;&#20197;&#20174; Apache&#36719;&#20214;&#22522;&#37329;&#32452;&#32455;&#33719;&#21462;&#12290;
  Hibernate Annotations&#21253;&#25324;&#19968;&#20010;&#27880;&#35299;&#21253;&#65292;&#23427;&#20801;&#35768;&#25226;&#20219;&#20309;&#22495;&#27169;&#22411;&#23545;&#35937;&#26631;&#35760;&#20026;&#21487;&#32034;&#24341;&#30340;&#65292;
  &#24182;&#19988;&#23545;&#20219;&#20309;&#32463;&#30001;Hibernate&#36827;&#34892;&#25345;&#32493;&#21270;&#30340;&#23454;&#20363;&#65292;Hibernate &#37117;&#20250;&#20026;&#20043;&#32500;&#25252;&#19968;&#20010;&#23545;&#24212;&#30340;Lucene&#32034;&#24341;&#12290;</p><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="lucene-intro"></a>5.1.&nbsp;&#20351;&#29992;Lucene&#20026;&#23454;&#20307;&#24314;&#31435;&#32034;&#24341;</h2></div></div><div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3390"></a>5.1.1.&nbsp;&#27880;&#35299;&#39046;&#22495;&#27169;&#22411;</h3></div></div><div></div></div><p>&#39318;&#20808;&#65292;&#24517;&#39035;&#23558;&#19968;&#20010;&#25345;&#20037;&#31867;&#22768;&#26126;&#20026;
      <tt class="literal">@Indexed</tt>:</p><pre class="programlisting">@Entity
@Indexed(index="indexes/essays")
public class Essay {
    ...
}</pre><p>&#23646;&#24615;<tt class="literal">index</tt>&#26159;&#21578;&#35785;Hibernate&#65292; Lucene&#32034;&#24341;&#20449;&#24687;&#25152;&#22312;&#30340;&#20301;&#32622;&#65288;&#20320;&#25991;&#20214;&#31995;&#32479;&#30340;&#26576;&#20010;&#30446;&#24405;&#65289;&#12290;
	  &#22914;&#26524;&#20320;&#24819;&#20026;&#25152;&#26377;&#30340;Lucene&#32034;&#24341;&#23450;&#20041;&#19968;&#20010;&#26681;&#30446;&#24405;&#65292;&#20320;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#29992;&#23646;&#24615;<tt class="literal">hibernate.lucene.index_dir</tt>&#36827;&#34892;&#37197;&#32622;&#12290;
	  </p><p>Lucene&#32034;&#24341;&#21253;&#25324;&#22235;&#31181;&#23383;&#27573;&#65306;<span class="emphasis"><em>keyword</em></span> &#23383;&#27573;&#65292;<span class="emphasis"><em>text</em></span>
      &#23383;&#27573;&#65292;<span class="emphasis"><em>unstored</em></span>&#23383;&#27573;&#21644;<span class="emphasis"><em>unindexed</em></span>&#23383;&#27573;&#12290;
      Hibernate&#27880;&#35299;&#25552;&#20379;&#20102;&#23558;&#23454;&#20307;&#23646;&#24615;&#26631;&#35760;&#20026;&#21069;&#19977;&#31181;&#34987;&#32034;&#24341;&#23383;&#27573;&#30340;&#27880;&#35299;&#12290;</p><pre class="programlisting">@Entity
@Indexed(index="indexes/essays")
public class Essay {
    ...

    @Id
    @Keyword(id=true)
    public Long getId() { return id; }
    
    @Text(name="Abstract")
    public String getSummary() { return summary; }
    
    @Lob
    @Unstored
    public String getText() { return text; }
    
}</pre><p>&#36825;&#20123;&#27880;&#35299;&#23450;&#20041;&#20102;&#19968;&#20010;&#24102;&#26377;&#19977;&#20010;&#23383;&#27573;&#30340;&#32034;&#24341;:
      <tt class="literal">Id</tt>, <tt class="literal">Abstract</tt> &#21644;
      <tt class="literal">Text</tt>.</p><p>&#27880;&#24847;:&#20320;&#24517;&#39035;&#22312;&#20320;&#30340;&#23454;&#20307;&#31867;&#30340;&#26631;&#24535;&#23646;&#24615;&#19978;&#25351;&#23450;
      <tt class="literal">@Keyword(id=true)</tt> .</p><p>&#29992;&#20110;&#23545;&#20803;&#32032;&#24314;&#31435;&#32034;&#24341;&#30340;&#20998;&#26512;&#22120;&#31867;&#26159;&#21487;&#20197;&#36890;&#36807;<tt class="literal">hibernate.lucene.analyzer</tt>&#23646;&#24615;&#36827;&#34892;&#37197;&#32622;&#30340;&#12290;
	  &#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#65292;&#21017;&#25226; <tt class="classname">org.apache.lucene.analysis.standard.StandardAnalyzer</tt>&#20316;&#20026;&#32570;&#30465;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3448"></a>5.1.2.&nbsp;&#21551;&#29992;&#33258;&#21160;&#32034;&#24341;</h3></div></div><div></div></div><p>&#25105;&#20204;&#28608;&#27963;&#29992;&#20110;&#24103;&#21548;&#19977;&#31867;Hibernate&#20107;&#20214;&#30340; <tt class="literal">LuceneEventListener</tt>&#65292;
	  &#36825;&#20123;&#20107;&#20214;&#20250;&#22312;&#21464;&#26356;&#34987;&#25552;&#20132;&#33267;&#25968;&#25454;&#24211;&#21518;&#20135;&#29983;&#12290;</p><pre class="programlisting">&lt;hibernate-configuration&gt;
    ...
    &lt;event type="post-commit-update" 
        &lt;listener  
            class="org.hibernate.lucene.event.LuceneEventListener"/&gt;
    &lt;/event&gt;
    &lt;event type="post-commit-insert" 
        &lt;listener 
            class="org.hibernate.lucene.event.LuceneEventListener"/&gt;
    &lt;/event&gt;
    &lt;event type="post-commit-delete" 
        &lt;listener 
            class="org.hibernate.lucene.event.LuceneEventListener"/&gt;
    &lt;/event&gt;
&lt;/hibernate-configuration&gt;</pre></div></div></div><div class="appendix" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="d0e3458"></a>&#38468;&#24405;&nbsp;A.&nbsp;&#26415;&#35821;&#34920;</h2></div></div><div></div></div><p>Redsaga&#30340;wiki&#19978;&#32500;&#25252;&#20102;&#26412;&#25991;&#32763;&#35793;&#36807;&#31243;&#20013;&#25152;&#21442;&#29031;&#30340;&#20013;&#33521;&#25991;&#23545;&#29031;&#30340;&#26415;&#35821;&#34920;,&#22320;&#22336;:http://wiki.redsaga.com/confluence/display/HART/glossary.</p></div></div></body></html>